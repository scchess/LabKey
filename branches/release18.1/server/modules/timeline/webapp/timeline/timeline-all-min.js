(function(){function a(a,b){b.src?e.ajax({url:b.src,async:!1,dataType:"script"}):e.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function b(a,b){return a[0]&&parseInt(e.curCSS(a[0],b,!0),10)||0}function c(){if(!z){z=!0;document.addEventListener&&!e.browser.opera&&document.addEventListener("DOMContentLoaded",e.ready,!1);e.browser.msie&&window==top&&function(){if(!e.isReady){try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}e.ready()}}();e.browser.opera&&document.addEventListener("DOMContentLoaded",function(){if(!e.isReady){for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].disabled){setTimeout(arguments.callee,0);return}e.ready()}},!1);if(e.browser.safari){var a;(function(){if(!e.isReady)if(document.readyState!="loaded"&&document.readyState!="complete")setTimeout(arguments.callee,0);else{if(a===h)a=e("style, link[rel=stylesheet]").length;document.styleSheets.length!=a?setTimeout(arguments.callee,
0):e.ready()}})()}e.event.add(window,"load",e.ready)}}var d=window.jQuery,f=window.$,e=window.jQuery=window.$=function(a,b){return new e.fn.init(a,b)},g=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/,j=/^.[^:#\[\.]*$/,h;e.fn=e.prototype={init:function(a,b){a=a||document;if(a.nodeType)return this[0]=a,this.length=1,this;if(typeof a=="string"){var c=g.exec(a);if(c&&(c[1]||!b))if(c[1])a=e.clean([c[1]],b);else{var d=document.getElementById(c[3]);if(d)return d.id!=c[3]?e().find(a):e(d);a=[]}else return e(b).find(a)}else if(e.isFunction(a))return e(document)[e.fn.ready?
"ready":"load"](a);return this.setArray(e.makeArray(a))},jquery:"1.2.6",size:function(){return this.length},length:0,get:function(a){return a==h?e.makeArray(this):this[a]},pushStack:function(a){a=e(a);a.prevObject=this;return a},setArray:function(a){this.length=0;Array.prototype.push.apply(this,a);return this},each:function(a,b){return e.each(this,a,b)},index:function(a){return e.inArray(a&&a.jquery?a[0]:a,this)},attr:function(a,b,c){var d=a;if(a.constructor==String)if(b===h)return this[0]&&e[c||
"attr"](this[0],a);else d={},d[a]=b;return this.each(function(b){for(a in d)e.attr(c?this.style:this,a,e.prop(this,d[a],c,b,a))})},css:function(a,b){if((a=="width"||a=="height")&&parseFloat(b)<0)b=h;return this.attr(a,b,"curCSS")},text:function(a){if(typeof a!="object"&&a!=null)return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a));var b="";e.each(a||this,function(){e.each(this.childNodes,function(){this.nodeType!=8&&(b+=this.nodeType!=1?this.nodeValue:e.fn.text([this]))})});
return b},wrapAll:function(a){this[0]&&e(a,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){for(var a=this;a.firstChild;)a=a.firstChild;return a}).append(this);return this},wrapInner:function(a){return this.each(function(){e(this).contents().wrapAll(a)})},wrap:function(a){return this.each(function(){e(this).wrapAll(a)})},append:function(){return this.domManip(arguments,!0,!1,function(a){this.nodeType==1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,
!0,function(a){this.nodeType==1&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,!1,function(a){this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,!0,function(a){this.parentNode.insertBefore(a,this.nextSibling)})},end:function(){return this.prevObject||e([])},find:function(a){var b=e.map(this,function(b){return e.find(a,b)});return this.pushStack(/[^+>] [^+>]/.test(a)||a.indexOf("..")>-1?e.unique(b):b)},clone:function(a){var b=
this.map(function(){if(e.browser.msie&&!e.isXMLDoc(this)){var a=this.cloneNode(!0),b=document.createElement("div");b.appendChild(a);return e.clean([b.innerHTML])[0]}else return this.cloneNode(!0)}),c=b.find("*").andSelf().each(function(){this[k]!=h&&(this[k]=null)});a===!0&&this.find("*").andSelf().each(function(a){if(this.nodeType!=3){var b=e.data(this,"events"),d;for(d in b)for(var w in b[d])e.event.add(c[a],d,b[d][w],b[d][w].data)}});return b},filter:function(a){return this.pushStack(e.isFunction(a)&&
e.grep(this,function(b,c){return a.call(b,c)})||e.multiFilter(a,this))},not:function(a){if(a.constructor==String)if(j.test(a))return this.pushStack(e.multiFilter(a,this,!0));else a=e.multiFilter(a,this);var b=a.length&&a[a.length-1]!==h&&!a.nodeType;return this.filter(function(){return b?e.inArray(this,a)<0:this!=a})},add:function(a){return this.pushStack(e.unique(e.merge(this.get(),typeof a=="string"?e(a):e.makeArray(a))))},is:function(a){return!!a&&e.multiFilter(a,this).length>0},hasClass:function(a){return this.is("."+
a)},val:function(a){if(a==h){if(this.length){var b=this[0];if(e.nodeName(b,"select")){var c=b.selectedIndex,d=[],f=b.options,b=b.type=="select-one";if(c<0)return null;for(var g=b?c:0,c=b?c+1:f.length;g<c;g++){var i=f[g];if(i.selected){a=e.browser.msie&&!i.attributes.value.specified?i.text:i.value;if(b)return a;d.push(a)}}return d}else return(this[0].value||"").replace(/\r/g,"")}return h}a.constructor==Number&&(a+="");return this.each(function(){if(this.nodeType==1)if(a.constructor==Array&&/radio|checkbox/.test(this.type))this.checked=
e.inArray(this.value,a)>=0||e.inArray(this.name,a)>=0;else if(e.nodeName(this,"select")){var b=e.makeArray(a);e("option",this).each(function(){this.selected=e.inArray(this.value,b)>=0||e.inArray(this.text,b)>=0});if(!b.length)this.selectedIndex=-1}else this.value=a})},html:function(a){return a==h?this[0]?this[0].innerHTML:null:this.empty().append(a)},replaceWith:function(a){return this.after(a).remove()},eq:function(a){return this.slice(a,a+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,
arguments))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},andSelf:function(){return this.add(this.prevObject)},data:function(a,b){var c=a.split(".");c[1]=c[1]?"."+c[1]:"";if(b===h){var d=this.triggerHandler("getData"+c[1]+"!",[c[0]]);d===h&&this.length&&(d=e.data(this[0],a));return d===h&&c[1]?this.data(c[0]):d}else return this.trigger("setData"+c[1]+"!",[c[0],b]).each(function(){e.data(this,a,b)})},removeData:function(a){return this.each(function(){e.removeData(this,
a)})},domManip:function(b,c,d,h){var f=this.length>1,g;return this.each(function(){g||(g=e.clean(b,this.ownerDocument),d&&g.reverse());var i=this;c&&e.nodeName(this,"table")&&e.nodeName(g[0],"tr")&&(i=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody")));var k=e([]);e.each(g,function(){var a=f?e(this).clone(!0)[0]:this;e.nodeName(a,"script")?k=k.add(a):(a.nodeType==1&&(k=k.add(e("script",a).remove())),h.call(i,a))});k.each(a)})}};e.fn.init.prototype=e.fn;
e.extend=e.fn.extend=function(){var a=arguments[0]||{},b=1,c=arguments.length,d=!1,f;a.constructor==Boolean&&(d=a,a=arguments[1]||{},b=2);typeof a!="object"&&typeof a!="function"&&(a={});c==b&&(a=this,--b);for(;b<c;b++)if((f=arguments[b])!=null)for(var g in f){var i=a[g],k=f[g];a!==k&&(d&&k&&typeof k=="object"&&!k.nodeType?a[g]=e.extend(d,i||(k.length!=null?[]:{}),k):k!==h&&(a[g]=k))}return a};var k="jQuery"+ +new Date,l=0,m={},p=/z-?index|font-?weight|opacity|zoom|line-?height/i,r=document.defaultView||
{};e.extend({noConflict:function(a){window.$=f;if(a)window.jQuery=d;return e},isFunction:function(a){return!!a&&typeof a!="string"&&!a.nodeName&&a.constructor!=Array&&/^[\s[]?function/.test(a+"")},isXMLDoc:function(a){return a.documentElement&&!a.body||a.tagName&&a.ownerDocument&&!a.ownerDocument.body},globalEval:function(a){if(a=e.trim(a)){var b=document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("script");c.type="text/javascript";e.browser.msie?c.text=a:c.appendChild(document.createTextNode(a));
b.insertBefore(c,b.firstChild);b.removeChild(c)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()==b.toUpperCase()},cache:{},data:function(a,b,c){var a=a==window?m:a,d=a[k];d||(d=a[k]=++l);b&&!e.cache[d]&&(e.cache[d]={});c!==h&&(e.cache[d][b]=c);return b?e.cache[d][b]:d},removeData:function(a,b){var a=a==window?m:a,c=a[k];if(b){if(e.cache[c]){delete e.cache[c][b];b="";for(b in e.cache[c])break;b||e.removeData(a)}}else{try{delete a[k]}catch(d){a.removeAttribute&&a.removeAttribute(k)}delete e.cache[c]}},
each:function(a,b,c){var e,d=0,f=a.length;if(c)if(f==h)for(e in a){if(b.apply(a[e],c)===!1)break}else for(;d<f;){if(b.apply(a[d++],c)===!1)break}else if(f==h)for(e in a){if(b.call(a[e],e,a[e])===!1)break}else for(c=a[0];d<f&&b.call(c,d,c)!==!1;c=a[++d]);return a},prop:function(a,b,c,d,h){e.isFunction(b)&&(b=b.call(a,d));return b&&b.constructor==Number&&c=="curCSS"&&!p.test(h)?b+"px":b},className:{add:function(a,b){e.each((b||"").split(/\s+/),function(b,c){a.nodeType==1&&!e.className.has(a.className,
c)&&(a.className+=(a.className?" ":"")+c)})},remove:function(a,b){if(a.nodeType==1)a.className=b!=h?e.grep(a.className.split(/\s+/),function(a){return!e.className.has(b,a)}).join(" "):""},has:function(a,b){return e.inArray(b,(a.className||a).toString().split(/\s+/))>-1}},swap:function(a,b,c){var e={},d;for(d in b)e[d]=a.style[d],a.style[d]=b[d];c.call(a);for(d in b)a.style[d]=e[d]},css:function(a,b,c){if(b=="width"||b=="height"){var d,c={position:"absolute",visibility:"hidden",display:"block"},h=
b=="width"?["Left","Right"]:["Top","Bottom"],f=function(){d=b=="width"?a.offsetWidth:a.offsetHeight;var c=0,f=0;e.each(h,function(){c+=parseFloat(e.curCSS(a,"padding"+this,!0))||0;f+=parseFloat(e.curCSS(a,"border"+this+"Width",!0))||0});d-=Math.round(c+f)};e(a).is(":visible")?f():e.swap(a,c,f);return Math.max(0,d)}return e.curCSS(a,b,c)},curCSS:function(a,b,c){function d(a){if(!e.browser.safari)return!1;a=r.getComputedStyle(a,null);return!a||a.getPropertyValue("color")==""}var h,f=a.style;if(b=="opacity"&&
e.browser.msie)return h=e.attr(f,"opacity"),h==""?"1":h;if(e.browser.opera&&b=="display"){var i=f.outline;f.outline="0 solid black";f.outline=i}b.match(/float/i)&&(b=o);if(!c&&f&&f[b])h=f[b];else if(r.getComputedStyle){b.match(/float/i)&&(b="float");b=b.replace(/([A-Z])/g,"-$1").toLowerCase();if((h=r.getComputedStyle(a,null))&&!d(a))h=h.getPropertyValue(b);else{f=[];c=[];i=a;for(a=0;i&&d(i);i=i.parentNode)c.unshift(i);for(;a<c.length;a++)if(d(c[a]))f[a]=c[a].style.display,c[a].style.display="block";
h=b=="display"&&f[c.length-1]!=null?"none":h&&h.getPropertyValue(b)||"";for(a=0;a<f.length;a++)if(f[a]!=null)c[a].style.display=f[a]}b=="opacity"&&h==""&&(h="1")}else if(a.currentStyle&&(h=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),h=a.currentStyle[b]||a.currentStyle[h],!/^\d+(px)?$/i.test(h)&&/^\d/.test(h)))b=f.left,c=a.runtimeStyle.left,a.runtimeStyle.left=a.currentStyle.left,f.left=h||0,h=f.pixelLeft+"px",f.left=b,a.runtimeStyle.left=c;return h},clean:function(a,b){var c=[],b=b||
document;typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||document);e.each(a,function(a,d){if(d){d.constructor==Number&&(d+="");if(typeof d=="string"){var d=d.replace(/(<(\w+)[^>]*?)\/>/g,function(a,b,c){return c.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?a:b+"></"+c+">"}),w=e.trim(d).toLowerCase(),i=b.createElement("div"),f=!w.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!w.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||
w.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!w.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!w.indexOf("<td")||!w.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!w.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||e.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];for(i.innerHTML=f[1]+d+f[2];f[0]--;)i=i.lastChild;if(e.browser.msie){w=!w.indexOf("<table")&&w.indexOf("<tbody")<0?i.firstChild&&i.firstChild.childNodes:
f[1]=="<table>"&&w.indexOf("<tbody")<0?i.childNodes:[];for(f=w.length-1;f>=0;--f)e.nodeName(w[f],"tbody")&&!w[f].childNodes.length&&w[f].parentNode.removeChild(w[f]);/^\s/.test(d)&&i.insertBefore(b.createTextNode(d.match(/^\s*/)[0]),i.firstChild)}d=e.makeArray(i.childNodes)}d.length===0&&!e.nodeName(d,"form")&&!e.nodeName(d,"select")||(d[0]==h||e.nodeName(d,"form")||d.options?c.push(d):c=e.merge(c,d))}});return c},attr:function(a,b,c){if(!a||a.nodeType==3||a.nodeType==8)return h;var d=!e.isXMLDoc(a),
f=c!==h,g=e.browser.msie,b=d&&e.props[b]||b;if(a.tagName){var i=/href|src|style/.test(b);if(b in a&&d&&!i){if(f){if(b=="type"&&e.nodeName(a,"input")&&a.parentNode)throw"type property can't be changed";a[b]=c}return e.nodeName(a,"form")&&a.getAttributeNode(b)?a.getAttributeNode(b).nodeValue:a[b]}if(g&&d&&b=="style")return e.attr(a.style,"cssText",c);f&&a.setAttribute(b,""+c);a=g&&d&&i?a.getAttribute(b,2):a.getAttribute(b);return a===null?h:a}if(g&&b=="opacity"){if(f)a.zoom=1,a.filter=(a.filter||"").replace(/alpha\([^)]*\)/,
"")+(parseInt(c)+""=="NaN"?"":"alpha(opacity="+c*100+")");return a.filter&&a.filter.indexOf("opacity=")>=0?parseFloat(a.filter.match(/opacity=([^)]*)/)[1])/100+"":""}b=b.replace(/-([a-z])/ig,function(a,b){return b.toUpperCase()});f&&(a[b]=c);return a[b]},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},makeArray:function(a){var b=[];if(a!=null){var c=a.length;if(c==null||a.split||a.setInterval||a.call)b[0]=a;else for(;c;)b[--c]=a[c]}return b},inArray:function(a,b){for(var c=0,e=b.length;c<
e;c++)if(b[c]===a)return c;return-1},merge:function(a,b){var c=0,d,h=a.length;if(e.browser.msie)for(;d=b[c++];)d.nodeType!=8&&(a[h++]=d);else for(;d=b[c++];)a[h++]=d;return a},unique:function(a){var b=[],c={};try{for(var d=0,h=a.length;d<h;d++){var f=e.data(a[d]);c[f]||(c[f]=!0,b.push(a[d]))}}catch(i){b=a}return b},grep:function(a,b,c){for(var d=[],e=0,h=a.length;e<h;e++)!c!=!b(a[e],e)&&d.push(a[e]);return d},map:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var h=b(a[d],d);h!=null&&(c[c.length]=
h)}return c.concat.apply([],c)}});var q=navigator.userAgent.toLowerCase();e.browser={version:(q.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(q),opera:/opera/.test(q),msie:/msie/.test(q)&&!/opera/.test(q),mozilla:/mozilla/.test(q)&&!/(compatible|webkit)/.test(q)};var o=e.browser.msie?"styleFloat":"cssFloat";e.extend({boxModel:!e.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className","float":o,cssFloat:o,styleFloat:o,readonly:"readOnly",maxlength:"maxLength",
cellspacing:"cellSpacing"}});e.each({parent:function(a){return a.parentNode},parents:function(a){return e.dir(a,"parentNode")},next:function(a){return e.nth(a,2,"nextSibling")},prev:function(a){return e.nth(a,2,"previousSibling")},nextAll:function(a){return e.dir(a,"nextSibling")},prevAll:function(a){return e.dir(a,"previousSibling")},siblings:function(a){return e.sibling(a.parentNode.firstChild,a)},children:function(a){return e.sibling(a.firstChild)},contents:function(a){return e.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:e.makeArray(a.childNodes)}},function(a,b){e.fn[a]=function(a){var c=e.map(this,b);a&&typeof a=="string"&&(c=e.multiFilter(a,c));return this.pushStack(e.unique(c))}});e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){e.fn[a]=function(){var a=arguments;return this.each(function(){for(var c=0,d=a.length;c<d;c++)e(a[c])[b](this)})}});e.each({removeAttr:function(a){e.attr(this,a,"");
this.nodeType==1&&this.removeAttribute(a)},addClass:function(a){e.className.add(this,a)},removeClass:function(a){e.className.remove(this,a)},toggleClass:function(a){e.className[e.className.has(this,a)?"remove":"add"](this,a)},remove:function(a){if(!a||e.filter(a,[this]).r.length)e("*",this).add(this).each(function(){e.event.remove(this);e.removeData(this)}),this.parentNode&&this.parentNode.removeChild(this)},empty:function(){for(e(">*",this).remove();this.firstChild;)this.removeChild(this.firstChild)}},
function(a,b){e.fn[a]=function(){return this.each(b,arguments)}});e.each(["Height","Width"],function(a,b){var c=b.toLowerCase();e.fn[c]=function(a){return this[0]==window?e.browser.opera&&document.body["client"+b]||e.browser.safari&&window["inner"+b]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+b]||document.body["client"+b]:this[0]==document?Math.max(Math.max(document.body["scroll"+b],document.documentElement["scroll"+b]),Math.max(document.body["offset"+b],document.documentElement["offset"+
b])):a==h?this.length?e.css(this[0],c):null:this.css(c,a.constructor==String?a:a+"px")}});var v=e.browser.safari&&parseInt(e.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uffff*_-]|\\\\.)",s=RegExp("^>\\s*("+v+"+)"),y=RegExp("^("+v+"+)(#)("+v+"+)"),u=RegExp("^([#.]?)("+v+"*)");e.extend({expr:{"":function(a,b,c){return c[2]=="*"||e.nodeName(a,c[2])},"#":function(a,b,c){return a.getAttribute("id")==c[2]},":":{lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,
b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==b},first:function(a,b){return b==0},last:function(a,b,c,d){return b==d.length-1},even:function(a,b){return b%2==0},odd:function(a,b){return b%2},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a},"last-child":function(a){return e.nth(a.parentNode.lastChild,1,"previousSibling")==a},"only-child":function(a){return!e.nth(a.parentNode.lastChild,2,"previousSibling")},parent:function(a){return a.firstChild},empty:function(a){return!a.firstChild},
contains:function(a,b,c){return(a.textContent||a.innerText||e(a).text()||"").indexOf(c[3])>=0},visible:function(a){return"hidden"!=a.type&&e.css(a,"display")!="none"&&e.css(a,"visibility")!="hidden"},hidden:function(a){return"hidden"==a.type||e.css(a,"display")=="none"||e.css(a,"visibility")=="hidden"},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked},selected:function(a){return a.selected||e.attr(a,"selected")},text:function(a){return"text"==
a.type},radio:function(a){return"radio"==a.type},checkbox:function(a){return"checkbox"==a.type},file:function(a){return"file"==a.type},password:function(a){return"password"==a.type},submit:function(a){return"submit"==a.type},image:function(a){return"image"==a.type},reset:function(a){return"reset"==a.type},button:function(a){return"button"==a.type||e.nodeName(a,"button")},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},has:function(a,b,c){return e.find(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},
animated:function(a){return e.grep(e.timers,function(b){return a==b.elem}).length}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,RegExp("^([:.#]*)("+v+"+)")],multiFilter:function(a,b,c){for(var d,h=[];a&&a!=d;){d=a;var f=e.filter(a,b,c),a=f.t.replace(/^\s*,\s*/,""),h=c?b=f.r:e.merge(h,f.r)}return h},find:function(a,b){if(typeof a!="string")return[a];if(b&&b.nodeType!=1&&b.nodeType!=9)return[];for(var b=b||document,c=[b],d=[],h,f;a&&h!=
a;){var i=[];h=a;a=e.trim(a);f=!1;var g=s,k=g.exec(a);if(k){f=k[1].toUpperCase();for(var j=0;c[j];j++)for(k=c[j].firstChild;k;k=k.nextSibling)k.nodeType==1&&(f=="*"||k.nodeName.toUpperCase()==f)&&i.push(k);c=i;a=a.replace(g,"");if(a.indexOf(" ")==0)continue;f=!0}else if(g=/^([>+~])\s*(\w*)/i,(k=g.exec(a))!=null){i=[];j={};f=k[2].toUpperCase();for(var k=k[1],l=0,m=c.length;l<m;l++)for(var p=k=="~"||k=="+"?c[l].nextSibling:c[l].firstChild;p;p=p.nextSibling)if(p.nodeType==1){var o=e.data(p);if(k=="~"&&
j[o])break;if(!f||p.nodeName.toUpperCase()==f)k=="~"&&(j[o]=!0),i.push(p);if(k=="+")break}c=i;a=e.trim(a.replace(g,""));f=!0}if(a&&!f)if(a.indexOf(",")){g=y;(k=g.exec(a))?k=[0,k[2],k[3],k[1]]:(g=u,k=g.exec(a));k[2]=k[2].replace(/\\/g,"");f=c[c.length-1];if(k[1]=="#"&&f&&f.getElementById&&!e.isXMLDoc(f)){c=f.getElementById(k[2]);if((e.browser.msie||e.browser.opera)&&c&&typeof c.id=="string"&&c.id!=k[2])c=e('[@id="'+k[2]+'"]',f)[0];c=i=c&&(!k[3]||e.nodeName(c,k[3]))?[c]:[]}else{for(j=0;c[j];j++)f=k[1]==
"#"&&k[3]?k[3]:k[1]!=""||k[0]==""?"*":k[2],f=="*"&&c[j].nodeName.toLowerCase()=="object"&&(f="param"),i=e.merge(i,c[j].getElementsByTagName(f));k[1]=="."&&(i=e.classFilter(i,k[2]));if(k[1]=="#"){c=[];for(j=0;i[j];j++)if(i[j].getAttribute("id")==k[2]){c=[i[j]];break}i=c}c=i}a=a.replace(g,"")}else b==c[0]&&c.shift(),d=e.merge(d,c),i=c=[b],a=" "+a.substr(1,a.length);if(a)i=e.filter(a,i),c=i.r,a=e.trim(i.t)}a&&(c=[]);c&&b==c[0]&&c.shift();return d=e.merge(d,c)},classFilter:function(a,b,c){for(var b=" "+
b+" ",d=[],e=0;a[e];e++){var h=(" "+a[e].className+" ").indexOf(b)>=0;(!c&&h||c&&!h)&&d.push(a[e])}return d},filter:function(a,b,c){for(var d;a&&a!=d;){d=a;for(var h=e.parse,f,i=0;h[i];i++)if(f=h[i].exec(a)){a=a.substring(f[0].length);f[2]=f[2].replace(/\\/g,"");break}if(!f)break;if(f[1]==":"&&f[2]=="not")b=j.test(f[3])?e.filter(f[3],b,!0).r:e(b).not(f[3]);else if(f[1]==".")b=e.classFilter(b,f[2],c);else if(f[1]=="["){for(var h=[],g=f[3],i=0,k=b.length;i<k;i++){var l=b[i],m=l[e.props[f[2]]||f[2]];
if(m==null||/href|src|selected/.test(f[2]))m=e.attr(l,f[2])||"";(g==""&&!!m||g=="="&&m==f[5]||g=="!="&&m!=f[5]||g=="^="&&m&&!m.indexOf(f[5])||g=="$="&&m.substr(m.length-f[5].length)==f[5]||(g=="*="||g=="~=")&&m.indexOf(f[5])>=0)^c&&h.push(l)}b=h}else if(f[1]==":"&&f[2]=="nth-child"){g={};h=[];d=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(f[3]=="even"&&"2n"||f[3]=="odd"&&"2n+1"||!/\D/.test(f[3])&&"0n+"+f[3]||f[3]);l=d[1]+(d[2]||1)-0;d=d[3]-0;i=0;for(k=b.length;i<k;i++){var m=b[i],p=m.parentNode,o=e.data(p);if(!g[o]){for(var q=
1,p=p.firstChild;p;p=p.nextSibling)if(p.nodeType==1)p.nodeIndex=q++;g[o]=!0}o=!1;l==0?m.nodeIndex==d&&(o=!0):(m.nodeIndex-d)%l==0&&(m.nodeIndex-d)/l>=0&&(o=!0);o^c&&h.push(m)}b=h}else{var r=e.expr[f[1]];typeof r=="object"&&(r=r[f[2]]);typeof r=="string"&&(r=eval("false||function(a,i){return "+r+";}"));b=e.grep(b,function(a,c){return r(a,c,f,b)},c)}}return{r:b,t:a}},dir:function(a,b){for(var c=[],d=a[b];d&&d!=document;)d.nodeType==1&&c.push(d),d=d[b];return c},nth:function(a,b,c){for(var b=b||1,d=
0;a;a=a[c])if(a.nodeType==1&&++d==b)break;return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType==1&&a!=b&&c.push(a);return c}});e.event={add:function(a,b,c,d){if(!(a.nodeType==3||a.nodeType==8)){e.browser.msie&&a.setInterval&&(a=window);if(!c.guid)c.guid=this.guid++;if(d!=h){var f=c,c=this.proxy(f,function(){return f.apply(this,arguments)});c.data=d}var g=e.data(a,"events")||e.data(a,"events",{}),i=e.data(a,"handle")||e.data(a,"handle",function(){if(typeof e!="undefined"&&!e.event.triggered)return e.event.handle.apply(arguments.callee.elem,
arguments)});i.elem=a;e.each(b.split(/\s+/),function(b,d){var h=d.split("."),d=h[0];c.type=h[1];h=g[d];if(!h&&(h=g[d]={},!e.event.special[d]||e.event.special[d].setup.call(a)===!1))a.addEventListener?a.addEventListener(d,i,!1):a.attachEvent&&a.attachEvent("on"+d,i);h[c.guid]=c;e.event.global[d]=!0});a=null}},guid:1,global:{},remove:function(a,b,c){if(!(a.nodeType==3||a.nodeType==8)){var d=e.data(a,"events"),f;if(d){if(b==h||typeof b=="string"&&b.charAt(0)==".")for(var g in d)this.remove(a,g+(b||""));
else{if(b.type)c=b.handler,b=b.type;e.each(b.split(/\s+/),function(b,h){var g=h.split("."),h=g[0];if(d[h]){if(c)delete d[h][c.guid];else for(c in d[h])(!g[1]||d[h][c].type==g[1])&&delete d[h][c];for(f in d[h])break;if(!f){if(!e.event.special[h]||e.event.special[h].teardown.call(a)===!1)a.removeEventListener?a.removeEventListener(h,e.data(a,"handle"),!1):a.detachEvent&&a.detachEvent("on"+h,e.data(a,"handle"));f=null;delete d[h]}}})}for(f in d)break;if(!f){if(b=e.data(a,"handle"))b.elem=null;e.removeData(a,
"events");e.removeData(a,"handle")}}}},trigger:function(a,b,c,d,f){b=e.makeArray(b);if(a.indexOf("!")>=0)var a=a.slice(0,-1),g=!0;if(c){if(c.nodeType==3||c.nodeType==8)return h;var i,j=e.isFunction(c[a]||null),l=!b[0]||!b[0].preventDefault;l&&(b.unshift({type:a,target:c,preventDefault:function(){},stopPropagation:function(){},timeStamp:+new Date}),b[0][k]=!0);b[0].type=a;if(g)b[0].exclusive=!0;(g=e.data(c,"handle"))&&(i=g.apply(c,b));if((!j||e.nodeName(c,"a")&&a=="click")&&c["on"+a]&&c["on"+a].apply(c,
b)===!1)i=!1;l&&b.shift();f&&e.isFunction(f)&&(b=f.apply(c,i==null?b:b.concat(i)),b!==h&&(i=b));if(j&&d!==!1&&i!==!1&&!(e.nodeName(c,"a")&&a=="click")){this.triggered=!0;try{c[a]()}catch(m){}}this.triggered=!1}else this.global[a]&&e("*").add([window,document]).trigger(a,b);return i},handle:function(a){var b,c,d,h,f,a=arguments[0]=e.event.fix(a||window.event);d=a.type.split(".");a.type=d[0];d=d[1];h=!d&&!a.exclusive;f=(e.data(this,"events")||{})[a.type];for(var i in f)if(c=f[i],h||c.type==d)a.handler=
c,a.data=c.data,c=c.apply(this,arguments),b!==!1&&(b=c),c===!1&&(a.preventDefault(),a.stopPropagation());return b},fix:function(a){if(a[k]==!0)return a;for(var b=a,a={originalEvent:b},c="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" "),
d=c.length;d;d--)a[c[d]]=b[c[d]];a[k]=!0;a.preventDefault=function(){b.preventDefault&&b.preventDefault();b.returnValue=!1};a.stopPropagation=function(){b.stopPropagation&&b.stopPropagation();b.cancelBubble=!0};a.timeStamp=a.timeStamp||+new Date;if(!a.target)a.target=a.srcElement||document;if(a.target.nodeType==3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement==a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null)c=document.documentElement,
d=document.body,a.pageX=a.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c.clientLeft||0),a.pageY=a.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c.clientTop||0);if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},proxy:function(a,b){b.guid=a.guid=a.guid||b.guid||this.guid++;return b},special:{ready:{setup:function(){c()},teardown:function(){}},
mouseenter:{setup:function(){if(e.browser.msie)return!1;e(this).bind("mouseover",e.event.special.mouseenter.handler);return!0},teardown:function(){if(e.browser.msie)return!1;e(this).unbind("mouseover",e.event.special.mouseenter.handler);return!0},handler:function(a){if(C(a,this))return!0;a.type="mouseenter";return e.event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(e.browser.msie)return!1;e(this).bind("mouseout",e.event.special.mouseleave.handler);return!0},teardown:function(){if(e.browser.msie)return!1;
e(this).unbind("mouseout",e.event.special.mouseleave.handler);return!0},handler:function(a){if(C(a,this))return!0;a.type="mouseleave";return e.event.handle.apply(this,arguments)}}}};e.fn.extend({bind:function(a,b,c){return a=="unload"?this.one(a,b,c):this.each(function(){e.event.add(this,a,c||b,c&&b)})},one:function(a,b,c){var d=e.event.proxy(c||b,function(a){e(this).unbind(a,d);return(c||b).apply(this,arguments)});return this.each(function(){e.event.add(this,a,d,c&&b)})},unbind:function(a,b){return this.each(function(){e.event.remove(this,
a,b)})},trigger:function(a,b,c){return this.each(function(){e.event.trigger(a,b,this,!0,c)})},triggerHandler:function(a,b,c){return this[0]&&e.event.trigger(a,b,this[0],!1,c)},toggle:function(a){for(var b=arguments,c=1;c<b.length;)e.event.proxy(a,b[c++]);return this.click(e.event.proxy(a,function(a){this.lastToggle=(this.lastToggle||0)%c;a.preventDefault();return b[this.lastToggle++].apply(this,arguments)||!1}))},hover:function(a,b){return this.bind("mouseenter",a).bind("mouseleave",b)},ready:function(a){c();
e.isReady?a.call(document,e):e.readyList.push(function(){return a.call(this,e)});return this}});e.extend({isReady:!1,readyList:[],ready:function(){if(!e.isReady){e.isReady=!0;if(e.readyList)e.each(e.readyList,function(){this.call(document)}),e.readyList=null;e(document).triggerHandler("ready")}}});var z=!1;e.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error".split(","),function(a,b){e.fn[b]=function(a){return a?
this.bind(b,a):this.trigger(b)}});var C=function(a,b){for(var c=a.relatedTarget;c&&c!=b;)try{c=c.parentNode}catch(d){c=b}return c==b};e(window).bind("unload",function(){e("*").add(document).unbind()});e.fn.extend({_load:e.fn.load,load:function(a,b,c){if(typeof a!="string")return this._load(a);var d=a.indexOf(" ");if(d>=0)var h=a.slice(d,a.length),a=a.slice(0,d);c=c||function(){};d="GET";b&&(e.isFunction(b)?(c=b,b=null):(b=e.param(b),d="POST"));var f=this;e.ajax({url:a,type:d,dataType:"html",data:b,
complete:function(a,b){if(b=="success"||b=="notmodified")f.html(h?e("<div/>").append(a.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(h):a.responseText);f.each(c,[a.responseText,b,a])}});return this},serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return e.nodeName(this,"form")?e.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(a,
b){var c=e(this).val();return c==null?null:c.constructor==Array?e.map(c,function(a){return{name:b.name,value:a}}):{name:b.name,value:c}}).get()}});e.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(a,b){e.fn[b]=function(a){return this.bind(b,a)}});var D=+new Date;e.extend({get:function(a,b,c,d){e.isFunction(b)&&(c=b,b=null);return e.ajax({type:"GET",url:a,data:b,success:c,dataType:d})},getScript:function(a,b){return e.get(a,null,b,"script")},getJSON:function(a,
b,c){return e.get(a,b,c,"json")},post:function(a,b,c,d){e.isFunction(b)&&(c=b,b={});return e.ajax({type:"POST",url:a,data:b,success:c,dataType:d})},ajaxSetup:function(a){e.extend(e.ajaxSettings,a)},ajaxSettings:{url:location.href,global:!0,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",
text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(a){function b(){a.success&&a.success(i,g);a.global&&e.event.trigger("ajaxSuccess",[r,a])}function c(){a.complete&&a.complete(r,g);a.global&&e.event.trigger("ajaxComplete",[r,a]);a.global&&!--e.active&&e.event.trigger("ajaxStop")}var a=e.extend(!0,a,e.extend(!0,{},e.ajaxSettings,a)),d,f=/=\?(&|$)/g,g,i,k=a.type.toUpperCase();if(a.data&&a.processData&&typeof a.data!="string")a.data=e.param(a.data);if(a.dataType=="jsonp"){if(k=="GET")a.url.match(f)||
(a.url+=(a.url.match(/\?/)?"&":"?")+(a.jsonp||"callback")+"=?");else if(!a.data||!a.data.match(f))a.data=(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?";a.dataType="json"}if(a.dataType=="json"&&(a.data&&a.data.match(f)||a.url.match(f))){d="jsonp"+D++;if(a.data)a.data=(a.data+"").replace(f,"="+d+"$1");a.url=a.url.replace(f,"="+d+"$1");a.dataType="script";window[d]=function(a){i=a;b();c();window[d]=h;try{delete window[d]}catch(e){}l&&l.removeChild(m)}}if(a.dataType=="script"&&a.cache==null)a.cache=
!1;if(a.cache===!1&&k=="GET"){var f=+new Date,j=a.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+f+"$2");a.url=j+(j==a.url?(a.url.match(/\?/)?"&":"?")+"_="+f:"")}if(a.data&&k=="GET")a.url+=(a.url.match(/\?/)?"&":"?")+a.data,a.data=null;a.global&&!e.active++&&e.event.trigger("ajaxStart");f=/^(?:\w+:)?\/\/([^\/?#]+)/;if(a.dataType=="script"&&k=="GET"&&f.test(a.url)&&f.exec(a.url)[1]!=location.host){var l=document.getElementsByTagName("head")[0],m=document.createElement("script");m.src=a.url;if(a.scriptCharset)m.charset=
a.scriptCharset;if(!d){var p=!1;m.onload=m.onreadystatechange=function(){if(!p&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"))p=!0,b(),c(),l.removeChild(m)}}l.appendChild(m);return h}var o=!1,r=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;a.username?r.open(k,a.url,a.async,a.username,a.password):r.open(k,a.url,a.async);try{a.data&&r.setRequestHeader("Content-Type",a.contentType),a.ifModified&&r.setRequestHeader("If-Modified-Since",e.lastModified[a.url]||
"Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept",a.dataType&&a.accepts[a.dataType]?a.accepts[a.dataType]+", */*":a.accepts._default)}catch(q){}if(a.beforeSend&&a.beforeSend(r,a)===!1)return a.global&&e.active--,r.abort(),!1;a.global&&e.event.trigger("ajaxSend",[r,a]);var v=function(h){if(!o&&r&&(r.readyState==4||h=="timeout")){o=!0;s&&(clearInterval(s),s=null);g=h=="timeout"&&"timeout"||!e.httpSuccess(r)&&"error"||a.ifModified&&e.httpNotModified(r,
a.url)&&"notmodified"||"success";if(g=="success")try{i=e.httpData(r,a.dataType,a.dataFilter)}catch(f){g="parsererror"}if(g=="success"){var k;try{k=r.getResponseHeader("Last-Modified")}catch(j){}a.ifModified&&k&&(e.lastModified[a.url]=k);d||b()}else e.handleError(a,r,g);c();a.async&&(r=null)}};if(a.async){var s=setInterval(v,13);a.timeout>0&&setTimeout(function(){r&&(r.abort(),o||v("timeout"))},a.timeout)}try{r.send(a.data)}catch(y){e.handleError(a,r,null,y)}a.async||v();return r},handleError:function(a,
b,c,d){a.error&&a.error(b,c,d);a.global&&e.event.trigger("ajaxError",[b,a,d])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol=="file:"||a.status>=200&&a.status<300||a.status==304||a.status==1223||e.browser.safari&&a.status==h}catch(b){}return!1},httpNotModified:function(a,b){try{var c=a.getResponseHeader("Last-Modified");return a.status==304||c==e.lastModified[b]||e.browser.safari&&a.status==h}catch(d){}return!1},httpData:function(a,b,c){var d=a.getResponseHeader("content-type"),
a=(d=b=="xml"||!b&&d&&d.indexOf("xml")>=0)?a.responseXML:a.responseText;if(d&&a.documentElement.tagName=="parsererror")throw"parsererror";c&&(a=c(a,b));b=="script"&&e.globalEval(a);b=="json"&&(a=eval("("+a+")"));return a},param:function(a){var b=[];if(a.constructor==Array||a.jquery)e.each(a,function(){b.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var c in a)a[c]&&a[c].constructor==Array?e.each(a[c],function(){b.push(encodeURIComponent(c)+"="+encodeURIComponent(this))}):
b.push(encodeURIComponent(c)+"="+encodeURIComponent(e.isFunction(a[c])?a[c]():a[c]));return b.join("&").replace(/%20/g,"+")}});e.fn.extend({show:function(a,b){return a?this.animate({height:"show",width:"show",opacity:"show"},a,b):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(e.css(this,"display")=="none"){var a=e("<"+this.tagName+" />").appendTo("body");this.style.display=a.css("display");if(this.style.display=="none")this.style.display="block";a.remove()}}).end()},
hide:function(a,b){return a?this.animate({height:"hide",width:"hide",opacity:"hide"},a,b):this.filter(":visible").each(function(){this.oldblock=this.oldblock||e.css(this,"display");this.style.display="none"}).end()},_toggle:e.fn.toggle,toggle:function(a,b){return e.isFunction(a)&&e.isFunction(b)?this._toggle.apply(this,arguments):a?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},a,b):this.each(function(){e(this)[e(this).is(":hidden")?"show":"hide"]()})},slideDown:function(a,b){return this.animate({height:"show"},
a,b)},slideUp:function(a,b){return this.animate({height:"hide"},a,b)},slideToggle:function(a,b){return this.animate({height:"toggle"},a,b)},fadeIn:function(a,b){return this.animate({opacity:"show"},a,b)},fadeOut:function(a,b){return this.animate({opacity:"hide"},a,b)},fadeTo:function(a,b,c){return this.animate({opacity:b},a,c)},animate:function(a,b,c,d){var h=e.speed(b,c,d);return this[h.queue===!1?"each":"queue"](function(){if(this.nodeType!=1)return!1;var b=e.extend({},h),c,d=e(this).is(":hidden"),
f=this;for(c in a){if(a[c]=="hide"&&d||a[c]=="show"&&!d)return b.complete.call(this);if(c=="height"||c=="width")b.display=e.css(this,"display"),b.overflow=this.style.overflow}if(b.overflow!=null)this.style.overflow="hidden";b.curAnim=e.extend({},a);e.each(a,function(c,i){var h=new e.fx(f,b,c);if(/toggle|show|hide/.test(i))h[i=="toggle"?d?"show":"hide":i](a);else{var g=i.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),k=h.cur(!0)||0;if(g){var j=parseFloat(g[2]),l=g[3]||"px";l!="px"&&(f.style[c]=(j||1)+
l,k*=(j||1)/h.cur(!0),f.style[c]=k+l);g[1]&&(j=(g[1]=="-="?-1:1)*j+k);h.custom(k,j,l)}else h.custom(k,i,"")}});return!0})},queue:function(a,b){if(e.isFunction(a)||a&&a.constructor==Array)b=a,a="fx";return!a||typeof a=="string"&&!b?A(this[0],a):this.each(function(){b.constructor==Array?A(this,a,b):(A(this,a).push(b),A(this,a).length==1&&b.call(this))})},stop:function(a,b){var c=e.timers;a&&this.queue([]);this.each(function(){for(var a=c.length-1;a>=0;a--)if(c[a].elem==this){if(b)c[a](!0);c.splice(a,
1)}});b||this.dequeue();return this}});var A=function(a,b,c){if(a){var b=b||"fx",d=e.data(a,b+"queue");if(!d||c)d=e.data(a,b+"queue",e.makeArray(c))}return d};e.fn.dequeue=function(a){a=a||"fx";return this.each(function(){var b=A(this,a);b.shift();b.length&&b[0].call(this)})};e.extend({speed:function(a,b,c){var d=a&&a.constructor==Object?a:{complete:c||!c&&b||e.isFunction(a)&&a,duration:a,easing:c&&b||b&&b.constructor!=Function&&b};d.duration=(d.duration&&d.duration.constructor==Number?d.duration:
e.fx.speeds[d.duration])||e.fx.speeds.def;d.old=d.complete;d.complete=function(){d.queue!==!1&&e(this).dequeue();e.isFunction(d.old)&&d.old.call(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],timerId:null,fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;if(!b.orig)b.orig={}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||
e.fx.step._default)(this);if(this.prop=="height"||this.prop=="width")this.elem.style.display="block"},cur:function(a){return this.elem[this.prop]!=null&&this.elem.style[this.prop]==null?this.elem[this.prop]:(a=parseFloat(e.css(this.elem,this.prop,a)))&&a>-1E4?a:parseFloat(e.curCSS(this.elem,this.prop))||0},custom:function(a,b,c){function d(a){return h.step(a)}this.startTime=+new Date;this.start=a;this.end=b;this.unit=c||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var h=
this;d.elem=this.elem;e.timers.push(d);if(e.timerId==null)e.timerId=setInterval(function(){for(var a=e.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);if(!a.length)clearInterval(e.timerId),e.timerId=null},13)},show:function(){this.options.orig[this.prop]=e.attr(this.elem.style,this.prop);this.options.show=!0;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height")this.elem.style[this.prop]="1px";e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e.attr(this.elem.style,
this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b=+new Date;if(a||b>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();var a=this.options.curAnim[this.prop]=!0,c;for(c in this.options.curAnim)this.options.curAnim[c]!==!0&&(a=!1);if(a){if(this.options.display!=null&&(this.elem.style.overflow=this.options.overflow,this.elem.style.display=this.options.display,e.css(this.elem,"display")=="none"))this.elem.style.display="block";if(this.options.hide)this.elem.style.display=
"none";if(this.options.hide||this.options.show)for(var d in this.options.curAnim)e.attr(this.elem.style,d,this.options.orig[d])}a&&this.options.complete.call(this.elem);return!1}else c=b-this.startTime,this.state=c/this.options.duration,this.pos=e.easing[this.options.easing||(e.easing.swing?"swing":"linear")](this.state,c,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update();return!0}};e.extend(e.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(a){a.elem.scrollLeft=
a.now},scrollTop:function(a){a.elem.scrollTop=a.now},opacity:function(a){e.attr(a.elem.style,"opacity",a.now)},_default:function(a){a.elem.style[a.prop]=a.now+a.unit}}});e.fn.offset=function(){function a(c){b(e.curCSS(c,"borderLeftWidth",!0),e.curCSS(c,"borderTopWidth",!0))}function b(a,e){c+=parseInt(a,10)||0;d+=parseInt(e,10)||0}var c=0,d=0,h=this[0],f;if(h)with(e.browser){var i=h.parentNode,g=h,k=h.offsetParent;f=h.ownerDocument;var j=safari&&parseInt(version)<522&&!/adobeair/i.test(q),l=e.curCSS,
m=l(h,"position")=="fixed";if(h.getBoundingClientRect)h=h.getBoundingClientRect(),b(h.left+Math.max(f.documentElement.scrollLeft,f.body.scrollLeft),h.top+Math.max(f.documentElement.scrollTop,f.body.scrollTop)),b(-f.documentElement.clientLeft,-f.documentElement.clientTop);else{for(b(h.offsetLeft,h.offsetTop);k;)b(k.offsetLeft,k.offsetTop),(mozilla&&!/^t(able|d|h)$/i.test(k.tagName)||safari&&!j)&&a(k),!m&&l(k,"position")=="fixed"&&(m=!0),g=/^body$/i.test(k.tagName)?g:k,k=k.offsetParent;for(;i&&i.tagName&&
!/^body|html$/i.test(i.tagName);)/^inline|table.*$/i.test(l(i,"display"))||b(-i.scrollLeft,-i.scrollTop),mozilla&&l(i,"overflow")!="visible"&&a(i),i=i.parentNode;(j&&(m||l(g,"position")=="absolute")||mozilla&&l(g,"position")!="absolute")&&b(-f.body.offsetLeft,-f.body.offsetTop);m&&b(Math.max(f.documentElement.scrollLeft,f.body.scrollLeft),Math.max(f.documentElement.scrollTop,f.body.scrollTop))}f={top:d,left:c}}return f};e.fn.extend({position:function(){var a;if(this[0]){a=this.offsetParent();var c=
this.offset(),d=/^body|html$/i.test(a[0].tagName)?{top:0,left:0}:a.offset();c.top-=b(this,"marginTop");c.left-=b(this,"marginLeft");d.top+=b(a,"borderTopWidth");d.left+=b(a,"borderLeftWidth");a={top:c.top-d.top,left:c.left-d.left}}return a},offsetParent:function(){for(var a=this[0].offsetParent;a&&!/^body|html$/i.test(a.tagName)&&e.css(a,"position")=="static";)a=a.offsetParent;return e(a)}});e.each(["Left","Top"],function(a,b){var c="scroll"+b;e.fn[c]=function(b){return!this[0]?void 0:b!=h?this.each(function(){this==
window||this==document?window.scrollTo(!a?b:e(window).scrollLeft(),a?b:e(window).scrollTop()):this[c]=b}):this[0]==window||this[0]==document?self[a?"pageYOffset":"pageXOffset"]||e.boxModel&&document.documentElement[c]||document.body[c]:this[0][c]}});e.each(["Height","Width"],function(a,c){var d=a?"Left":"Top",h=a?"Right":"Bottom";e.fn["inner"+c]=function(){return this[c.toLowerCase()]()+b(this,"padding"+d)+b(this,"padding"+h)};e.fn["outer"+c]=function(a){return this["inner"+c]()+b(this,"border"+d+
"Width")+b(this,"border"+h+"Width")+(a?b(this,"margin"+d)+b(this,"margin"+h):0)}})})();SimileAjax.version="pre 2.3.0";SimileAjax.jQuery=jQuery.noConflict(!0);if(typeof window.$=="undefined")window.$=SimileAjax.jQuery;SimileAjax.Platform.os={isMac:!1,isWin:!1,isWin32:!1,isUnix:!1};SimileAjax.Platform.browser={isIE:!1,isNetscape:!1,isMozilla:!1,isFirefox:!1,isOpera:!1,isSafari:!1,majorVersion:0,minorVersion:0};
(function(){var a=navigator.appName.toLowerCase(),b=navigator.userAgent.toLowerCase();SimileAjax.Platform.os.isMac=b.indexOf("mac")!=-1;SimileAjax.Platform.os.isWin=b.indexOf("win")!=-1;SimileAjax.Platform.os.isWin32=SimileAjax.Platform.isWin&&(b.indexOf("95")!=-1||b.indexOf("98")!=-1||b.indexOf("nt")!=-1||b.indexOf("win32")!=-1||b.indexOf("32bit")!=-1);SimileAjax.Platform.os.isUnix=b.indexOf("x11")!=-1;SimileAjax.Platform.browser.isIE=a.indexOf("microsoft")!=-1;SimileAjax.Platform.browser.isNetscape=
a.indexOf("netscape")!=-1;SimileAjax.Platform.browser.isMozilla=b.indexOf("mozilla")!=-1;SimileAjax.Platform.browser.isFirefox=b.indexOf("firefox")!=-1;SimileAjax.Platform.browser.isOpera=a.indexOf("opera")!=-1;SimileAjax.Platform.browser.isSafari=a.indexOf("safari")!=-1;var a=function(a){a=a.split(".");SimileAjax.Platform.browser.majorVersion=parseInt(a[0]);SimileAjax.Platform.browser.minorVersion=parseInt(a[1])},c=function(a,b,c){b=a.indexOf(b,c);return b>=0?b:a.length};if(SimileAjax.Platform.browser.isMozilla){var d=
b.indexOf("mozilla/");d>=0&&a(b.substring(d+8,c(b," ",d)))}SimileAjax.Platform.browser.isIE&&(d=b.indexOf("msie "),d>=0&&a(b.substring(d+5,c(b,";",d))));SimileAjax.Platform.browser.isNetscape&&(d=b.indexOf("rv:"),d>=0&&a(b.substring(d+3,c(b,")",d))));SimileAjax.Platform.browser.isFirefox&&(d=b.indexOf("firefox/"),d>=0&&a(b.substring(d+8,c(b," ",d))));if(!("localeCompare"in String.prototype))String.prototype.localeCompare=function(a){return this<a?-1:this>a?1:0}})();
SimileAjax.Platform.getDefaultLocale=function(){return SimileAjax.Platform.clientLocale};SimileAjax.ListenerQueue=function(a){this._listeners=[];this._wildcardHandlerName=a};SimileAjax.ListenerQueue.prototype.add=function(a){this._listeners.push(a)};SimileAjax.ListenerQueue.prototype.remove=function(a){for(var b=this._listeners,c=0;c<b.length;c++)if(b[c]==a){b.splice(c,1);break}};
SimileAjax.ListenerQueue.prototype.fire=function(a,b){for(var c=[].concat(this._listeners),d=0;d<c.length;d++){var f=c[d];if(a in f)try{f[a].apply(f,b)}catch(e){SimileAjax.Debug.exception("Error firing event of name "+a,e)}else if(this._wildcardHandlerName!=null&&this._wildcardHandlerName in f)try{f[this._wildcardHandlerName].apply(f,[a])}catch(g){SimileAjax.Debug.exception("Error firing event of name "+a+" to wildcard handler",g)}}};
SimileAjax.Set=function(a){this._hash={};this._count=0;if(a instanceof Array)for(var b=0;b<a.length;b++)this.add(a[b]);else a instanceof SimileAjax.Set&&this.addSet(a)};SimileAjax.Set.prototype.add=function(a){return!(a in this._hash)?(this._hash[a]=!0,this._count++,!0):!1};SimileAjax.Set.prototype.addSet=function(a){for(var b in a._hash)this.add(b)};SimileAjax.Set.prototype.remove=function(a){return a in this._hash?(delete this._hash[a],this._count--,!0):!1};SimileAjax.Set.prototype.removeSet=function(a){for(var b in a._hash)this.remove(b)};
SimileAjax.Set.prototype.retainSet=function(a){for(var b in this._hash)a.contains(b)||(delete this._hash[b],this._count--)};SimileAjax.Set.prototype.contains=function(a){return a in this._hash};SimileAjax.Set.prototype.size=function(){return this._count};SimileAjax.Set.prototype.toArray=function(){var a=[],b;for(b in this._hash)a.push(b);return a};SimileAjax.Set.prototype.visit=function(a){for(var b in this._hash)if(a(b)==!0)break};
SimileAjax.SortedArray=function(a,b){this._a=b instanceof Array?b:[];this._compare=a};SimileAjax.SortedArray.prototype.add=function(a){var b=this,c=this.find(function(c){return b._compare(c,a)});c<this._a.length?this._a.splice(c,0,a):this._a.push(a)};SimileAjax.SortedArray.prototype.remove=function(a){for(var b=this,c=this.find(function(c){return b._compare(c,a)});c<this._a.length&&this._compare(this._a[c],a)==0;)if(this._a[c]==a)return this._a.splice(c,1),!0;else c++;return!1};
SimileAjax.SortedArray.prototype.removeAll=function(){this._a=[]};SimileAjax.SortedArray.prototype.elementAt=function(a){return this._a[a]};SimileAjax.SortedArray.prototype.length=function(){return this._a.length};SimileAjax.SortedArray.prototype.find=function(a){for(var b=0,c=this._a.length;b<c;){var d=Math.floor((b+c)/2),f=a(this._a[d]);if(d==b)return f<0?b+1:b;else f<0?b=d:c=d}return b};SimileAjax.SortedArray.prototype.getFirst=function(){return this._a.length>0?this._a[0]:null};
SimileAjax.SortedArray.prototype.getLast=function(){return this._a.length>0?this._a[this._a.length-1]:null};SimileAjax.EventIndex=function(a){var b=this;this._unit=a!=null?a:SimileAjax.NativeDateUnit;this._events=new SimileAjax.SortedArray(function(a,d){return b._unit.compare(a.getStart(),d.getStart())});this._idToEvent={};this._indexed=!0};SimileAjax.EventIndex.prototype.getUnit=function(){return this._unit};SimileAjax.EventIndex.prototype.getEvent=function(a){return this._idToEvent[a]};
SimileAjax.EventIndex.prototype.add=function(a){this._events.add(a);this._idToEvent[a.getID()]=a;this._indexed=!1};SimileAjax.EventIndex.prototype.removeAll=function(){this._events.removeAll();this._idToEvent={};this._indexed=!1};SimileAjax.EventIndex.prototype.getCount=function(){return this._events.length()};SimileAjax.EventIndex.prototype.getIterator=function(a,b){this._indexed||this._index();return new SimileAjax.EventIndex._Iterator(this._events,a,b,this._unit)};
SimileAjax.EventIndex.prototype.getReverseIterator=function(a,b){this._indexed||this._index();return new SimileAjax.EventIndex._ReverseIterator(this._events,a,b,this._unit)};SimileAjax.EventIndex.prototype.getAllIterator=function(){return new SimileAjax.EventIndex._AllIterator(this._events)};SimileAjax.EventIndex.prototype.getEarliestDate=function(){var a=this._events.getFirst();return a==null?null:a.getStart()};
SimileAjax.EventIndex.prototype.getLatestDate=function(){var a=this._events.getLast();if(a==null)return null;this._indexed||this._index();var b=a._earliestOverlapIndex,a=this._events.elementAt(b).getEnd();for(b+=1;b<this._events.length();b++)a=this._unit.later(a,this._events.elementAt(b).getEnd());return a};
SimileAjax.EventIndex.prototype._index=function(){for(var a=this._events.length(),b=0;b<a;b++){var c=this._events.elementAt(b);c._earliestOverlapIndex=b}for(var d=1,b=0;b<a;b++){c=this._events.elementAt(b);c=c.getEnd();for(d=Math.max(d,b+1);d<a;){var f=this._events.elementAt(d);if(this._unit.compare(f.getStart(),c)<0)f._earliestOverlapIndex=b,d++;else break}}this._indexed=!0};
SimileAjax.EventIndex._Iterator=function(a,b,c,d){this._events=a;this._startDate=b;this._endDate=c;this._unit=d;this._currentIndex=a.find(function(a){return d.compare(a.getStart(),b)});if(this._currentIndex-1>=0)this._currentIndex=this._events.elementAt(this._currentIndex-1)._earliestOverlapIndex;this._currentIndex--;this._maxIndex=a.find(function(a){return d.compare(a.getStart(),c)});this._hasNext=!1;this._next=null;this._findNext()};
SimileAjax.EventIndex._Iterator.prototype={hasNext:function(){return this._hasNext},next:function(){if(this._hasNext){var a=this._next;this._findNext();return a}else return null},_findNext:function(){for(var a=this._unit;++this._currentIndex<this._maxIndex;){var b=this._events.elementAt(this._currentIndex);if(a.compare(b.getStart(),this._endDate)<0&&a.compare(b.getEnd(),this._startDate)>0){this._next=b;this._hasNext=!0;return}}this._next=null;this._hasNext=!1}};
SimileAjax.EventIndex._ReverseIterator=function(a,b,c,d){this._events=a;this._startDate=b;this._endDate=c;this._unit=d;this._minIndex=a.find(function(a){return d.compare(a.getStart(),b)});if(this._minIndex-1>=0)this._minIndex=this._events.elementAt(this._minIndex-1)._earliestOverlapIndex;this._currentIndex=this._maxIndex=a.find(function(a){return d.compare(a.getStart(),c)});this._hasNext=!1;this._next=null;this._findNext()};
SimileAjax.EventIndex._ReverseIterator.prototype={hasNext:function(){return this._hasNext},next:function(){if(this._hasNext){var a=this._next;this._findNext();return a}else return null},_findNext:function(){for(var a=this._unit;--this._currentIndex>=this._minIndex;){var b=this._events.elementAt(this._currentIndex);if(a.compare(b.getStart(),this._endDate)<0&&a.compare(b.getEnd(),this._startDate)>0){this._next=b;this._hasNext=!0;return}}this._next=null;this._hasNext=!1}};
SimileAjax.EventIndex._AllIterator=function(a){this._events=a;this._index=0};SimileAjax.EventIndex._AllIterator.prototype={hasNext:function(){return this._index<this._events.length()},next:function(){return this._index<this._events.length()?this._events.elementAt(this._index++):null}};SimileAjax.DateTime={};SimileAjax.DateTime.MILLISECOND=0;SimileAjax.DateTime.SECOND=1;SimileAjax.DateTime.MINUTE=2;SimileAjax.DateTime.HOUR=3;SimileAjax.DateTime.DAY=4;SimileAjax.DateTime.WEEK=5;
SimileAjax.DateTime.MONTH=6;SimileAjax.DateTime.YEAR=7;SimileAjax.DateTime.DECADE=8;SimileAjax.DateTime.CENTURY=9;SimileAjax.DateTime.MILLENNIUM=10;SimileAjax.DateTime.EPOCH=-1;SimileAjax.DateTime.ERA=-2;SimileAjax.DateTime.gregorianUnitLengths=[];
(function(){var a=SimileAjax.DateTime,b=a.gregorianUnitLengths;b[a.MILLISECOND]=1;b[a.SECOND]=1E3;b[a.MINUTE]=b[a.SECOND]*60;b[a.HOUR]=b[a.MINUTE]*60;b[a.DAY]=b[a.HOUR]*24;b[a.WEEK]=b[a.DAY]*7;b[a.MONTH]=b[a.DAY]*31;b[a.YEAR]=b[a.DAY]*365;b[a.DECADE]=b[a.YEAR]*10;b[a.CENTURY]=b[a.YEAR]*100;b[a.MILLENNIUM]=b[a.YEAR]*1E3})();SimileAjax.DateTime._dateRegexp=/^(-?)([0-9]{4})((-?([0-9]{2})(-?([0-9]{2}))?)|(-?([0-9]{3}))|(-?W([0-9]{2})(-?([1-7]))?))?$/;SimileAjax.DateTime._timezoneRegexp=/Z|(([-+])([0-9]{2})(:?([0-9]{2}))?)$/;
SimileAjax.DateTime._timeRegexp=/^([0-9]{2})(:?([0-9]{2})(:?([0-9]{2})(.([0-9]+))?)?)?$/;
SimileAjax.DateTime.setIso8601Date=function(a,b){var c=b.match(SimileAjax.DateTime._dateRegexp);if(!c)throw Error("Invalid date string: "+b);var d=c[5],f=c[7],e=c[9],g=c[11],j=c[13]?c[13]:1;a.setUTCFullYear((c[1]=="-"?-1:1)*c[2]);e?(a.setUTCMonth(0),a.setUTCDate(Number(e))):g?(a.setUTCMonth(0),a.setUTCDate(1),c=(c=a.getUTCDay())?c:7,g=Number(j)+7*Number(g),c<=4?a.setUTCDate(g+1-c):a.setUTCDate(g+8-c)):(d&&(a.setUTCDate(1),a.setUTCMonth(d-1)),f&&a.setUTCDate(f));return a};
SimileAjax.DateTime.setIso8601Time=function(a,b){var c=b.match(SimileAjax.DateTime._timeRegexp);if(!c)return SimileAjax.Debug.warn("Invalid time string: "+b),!1;var d=Number(c[3]?c[3]:0),f=c[5]?c[5]:0,e=c[7]?Number("0."+c[7])*1E3:0;a.setUTCHours(c[1]);a.setUTCMinutes(d);a.setUTCSeconds(f);a.setUTCMilliseconds(e);return a};SimileAjax.DateTime.timezoneOffset=(new Date).getTimezoneOffset();
SimileAjax.DateTime.setIso8601=function(a,b){var c=null,d=b.indexOf("T")==-1?b.split(" "):b.split("T");SimileAjax.DateTime.setIso8601Date(a,d[0]);if(d.length==2){var f=d[1].match(SimileAjax.DateTime._timezoneRegexp);f&&(f[0]=="Z"?c=0:(c=Number(f[3])*60+Number(f[5]),c*=f[2]=="-"?1:-1),d[1]=d[1].substr(0,d[1].length-f[0].length));SimileAjax.DateTime.setIso8601Time(a,d[1])}c==null&&(c=a.getTimezoneOffset());a.setTime(a.getTime()+c*6E4);return a};
SimileAjax.DateTime.parseIso8601DateTime=function(a){try{return SimileAjax.DateTime.setIso8601(new Date(0),a)}catch(b){return null}};SimileAjax.DateTime.parseGregorianDateTime=function(a){if(a==null)return null;else if(a instanceof Date)return a;var b=a.toString();if(b.length>0&&b.length<8){var c=b.indexOf(" ");c>0?(a=parseInt(b.substr(0,c)),b.substr(c+1).toLowerCase()=="bc"&&(a=1-a)):a=parseInt(b);b=new Date(0);b.setUTCFullYear(a);return b}try{return new Date(Date.parse(b))}catch(d){return null}};
SimileAjax.DateTime.roundDownToInterval=function(a,b,c,d,f){c*=SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR];var e=new Date(a.getTime()+c),g=function(a){a.setUTCMilliseconds(0);a.setUTCSeconds(0);a.setUTCMinutes(0);a.setUTCHours(0)},j=function(a){g(a);a.setUTCDate(1);a.setUTCMonth(0)};switch(b){case SimileAjax.DateTime.MILLISECOND:b=e.getUTCMilliseconds();e.setUTCMilliseconds(b-b%d);break;case SimileAjax.DateTime.SECOND:e.setUTCMilliseconds(0);b=e.getUTCSeconds();e.setUTCSeconds(b-
b%d);break;case SimileAjax.DateTime.MINUTE:e.setUTCMilliseconds(0);e.setUTCSeconds(0);b=e.getUTCMinutes();e.setTime(e.getTime()-b%d*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.MINUTE]);break;case SimileAjax.DateTime.HOUR:e.setUTCMilliseconds(0);e.setUTCSeconds(0);e.setUTCMinutes(0);b=e.getUTCHours();e.setUTCHours(b-b%d);break;case SimileAjax.DateTime.DAY:g(e);break;case SimileAjax.DateTime.WEEK:g(e);d=(e.getUTCDay()+7-f)%7;e.setTime(e.getTime()-d*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.DAY]);
break;case SimileAjax.DateTime.MONTH:g(e);e.setUTCDate(1);b=e.getUTCMonth();e.setUTCMonth(b-b%d);break;case SimileAjax.DateTime.YEAR:j(e);b=e.getUTCFullYear();e.setUTCFullYear(b-b%d);break;case SimileAjax.DateTime.DECADE:j(e);e.setUTCFullYear(Math.floor(e.getUTCFullYear()/10)*10);break;case SimileAjax.DateTime.CENTURY:j(e);e.setUTCFullYear(Math.floor(e.getUTCFullYear()/100)*100);break;case SimileAjax.DateTime.MILLENNIUM:j(e),e.setUTCFullYear(Math.floor(e.getUTCFullYear()/1E3)*1E3)}a.setTime(e.getTime()-
c)};SimileAjax.DateTime.roundUpToInterval=function(a,b,c,d,f){var e=a.getTime();SimileAjax.DateTime.roundDownToInterval(a,b,c,d,f);a.getTime()<e&&a.setTime(a.getTime()+SimileAjax.DateTime.gregorianUnitLengths[b]*d)};
SimileAjax.DateTime.incrementByInterval=function(a,b,c){var c=(typeof c=="undefined"?0:c)*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR],d=new Date(a.getTime()+c);switch(b){case SimileAjax.DateTime.MILLISECOND:d.setTime(d.getTime()+1);break;case SimileAjax.DateTime.SECOND:d.setTime(d.getTime()+1E3);break;case SimileAjax.DateTime.MINUTE:d.setTime(d.getTime()+SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.MINUTE]);break;case SimileAjax.DateTime.HOUR:d.setTime(d.getTime()+
SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR]);break;case SimileAjax.DateTime.DAY:d.setUTCDate(d.getUTCDate()+1);break;case SimileAjax.DateTime.WEEK:d.setUTCDate(d.getUTCDate()+7);break;case SimileAjax.DateTime.MONTH:d.setUTCMonth(d.getUTCMonth()+1);break;case SimileAjax.DateTime.YEAR:d.setUTCFullYear(d.getUTCFullYear()+1);break;case SimileAjax.DateTime.DECADE:d.setUTCFullYear(d.getUTCFullYear()+10);break;case SimileAjax.DateTime.CENTURY:d.setUTCFullYear(d.getUTCFullYear()+100);
break;case SimileAjax.DateTime.MILLENNIUM:d.setUTCFullYear(d.getUTCFullYear()+1E3)}a.setTime(d.getTime()-c)};SimileAjax.DateTime.removeTimeZoneOffset=function(a,b){return new Date(a.getTime()+b*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR])};SimileAjax.DateTime.getTimezone=function(){return(new Date).getTimezoneOffset()/-60};SimileAjax.Debug={silent:!1};
SimileAjax.Debug.log=function(a){var b;b="console"in window&&"log"in window.console?function(a){console.log(a)}:function(a){SimileAjax.Debug.silent||alert(a)};SimileAjax.Debug.log=b;b(a)};SimileAjax.Debug.warn=function(a){var b;b="console"in window&&"warn"in window.console?function(a){console.warn(a)}:function(a){SimileAjax.Debug.silent||alert(a)};SimileAjax.Debug.warn=b;b(a)};
SimileAjax.Debug.exception=function(a,b){var c;c=SimileAjax.parseURLParameters().errors=="throw"||SimileAjax.params.errors=="throw"?function(a){throw a;}:"console"in window&&"error"in window.console?function(a,b){b!=null?console.error(b+" %o",a):console.error(a);throw a;}:function(a,b){SimileAjax.Debug.silent||alert("Caught exception: "+b+"\n\nDetails: "+("description"in a?a.description:a));throw a;};SimileAjax.Debug.exception=c;c(a,b)};
SimileAjax.Debug.objectToString=function(a){return SimileAjax.Debug._objectToString(a,"")};SimileAjax.Debug._objectToString=function(a,b){var c=b+" ";if(typeof a=="object"){var d="{";for(f in a)d+=c+f+": "+SimileAjax.Debug._objectToString(a[f],c)+"\n";d+=b+"}";return d}else if(typeof a=="array"){for(var d="[",f=0;f<a.length;f++)d+=SimileAjax.Debug._objectToString(a[f],c)+"\n";d+=b+"]";return d}else return a};SimileAjax.DOM={};
SimileAjax.DOM.registerEventWithObject=function(a,b,c,d){SimileAjax.DOM.registerEvent(a,b,function(a,b,g){return c[d].call(c,a,b,g)})};SimileAjax.DOM.registerEvent=function(a,b,c){var d=function(b){if(b=b?b:event?event:null){var d=b.target?b.target:b.srcElement?b.srcElement:null;d&&(d=d.nodeType==1||d.nodeType==9?d:d.parentNode);return c(a,b,d)}return!0};SimileAjax.Platform.browser.isIE?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1)};
SimileAjax.DOM.getPageCoordinates=function(a){var b=0,c=0;if(a.nodeType!=1)a=a.parentNode;for(var d=a;d!=null;)b+=d.offsetLeft,c+=d.offsetTop,d=d.offsetParent;for(d=document.body;a!=null&&a!=d;)"scrollLeft"in a&&(b-=a.scrollLeft,c-=a.scrollTop),a=a.parentNode;return{left:b,top:c}};SimileAjax.DOM.getSize=function(a){var b=this.getStyle(a,"width"),a=this.getStyle(a,"height");b.indexOf("px")>-1&&(b=b.replace("px",""));a.indexOf("px")>-1&&(a=a.replace("px",""));return{w:b,h:a}};
SimileAjax.DOM.getStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):""};
SimileAjax.DOM.getEventRelativeCoordinates=function(a,b){if(SimileAjax.Platform.browser.isIE)if(a.type=="mousewheel"){var c=SimileAjax.DOM.getPageCoordinates(b);return{x:a.clientX-c.left,y:a.clientY-c.top}}else return{x:a.offsetX,y:a.offsetY};else return c=SimileAjax.DOM.getPageCoordinates(b),a.type=="DOMMouseScroll"&&SimileAjax.Platform.browser.isFirefox&&SimileAjax.Platform.browser.majorVersion==2?{x:a.screenX-c.left,y:a.screenY-c.top}:{x:a.pageX-c.left,y:a.pageY-c.top}};
SimileAjax.DOM.getEventPageCoordinates=function(a){return SimileAjax.Platform.browser.isIE?{x:a.clientX+document.body.scrollLeft,y:a.clientY+document.body.scrollTop}:{x:a.pageX,y:a.pageY}};SimileAjax.DOM.hittest=function(a,b,c){return SimileAjax.DOM._hittest(document.body,a,b,c)};
SimileAjax.DOM._hittest=function(a,b,c,d){var f=a.childNodes,e=0;a:for(;e<f.length;e++){for(var g=f[e],j=0;j<d.length;j++)if(g==d[j])continue a;if(g.offsetWidth==0&&g.offsetHeight==0){if(j=SimileAjax.DOM._hittest(g,b,c,d),j!=g)return j}else{for(var h=j=0,k=g;k;)j+=k.offsetTop,h+=k.offsetLeft,k=k.offsetParent;if(h<=b&&j<=c&&b-h<g.offsetWidth&&c-j<g.offsetHeight)return SimileAjax.DOM._hittest(g,b,c,d);else if(g.nodeType==1&&g.tagName=="TR"&&(j=SimileAjax.DOM._hittest(g,b,c,d),j!=g))return j}}return a};
SimileAjax.DOM.cancelEvent=function(a){a.returnValue=!1;a.cancelBubble=!0;"preventDefault"in a&&a.preventDefault()};SimileAjax.DOM.appendClassName=function(a,b){for(var c=a.className.split(" "),d=0;d<c.length;d++)if(c[d]==b)return;c.push(b);a.className=c.join(" ")};SimileAjax.DOM.createInputElement=function(a){var b=document.createElement("div");b.innerHTML="<input type='"+a+"' />";return b.firstChild};
SimileAjax.DOM.createDOMFromTemplate=function(a){var b={};b.elmt=SimileAjax.DOM._createDOMFromTemplate(a,b,null);return b};
SimileAjax.DOM._createDOMFromTemplate=function(a,b,c){if(a==null)return null;else if(typeof a!="object")return a=document.createTextNode(a),c!=null&&c.appendChild(a),a;else{var d=null;if("tag"in a){var f=a.tag;c!=null&&(f=="tr"?d=c.insertRow(c.rows.length):f=="td"&&(d=c.insertCell(c.cells.length)));d==null&&(d=f=="input"?SimileAjax.DOM.createInputElement(a.type):document.createElement(f),c!=null&&c.appendChild(d))}else d=a.elmt,c!=null&&c.appendChild(d);for(var e in a)if(c=a[e],e=="field")b[c]=d;
else if(e=="className")d.className=c;else if(e=="id")d.id=c;else if(e=="title")d.title=c;else if(!(e=="type"&&d.tagName=="input"))if(e=="style")for(n in c)f=c[n],n=="float"&&(n=SimileAjax.Platform.browser.isIE?"styleFloat":"cssFloat"),d.style[n]=f;else if(e=="children")for(f=0;f<c.length;f++)SimileAjax.DOM._createDOMFromTemplate(c[f],b,d);else e!="tag"&&e!="elmt"&&d.setAttribute(e,c);return d}};SimileAjax.DOM._cachedParent=null;
SimileAjax.DOM.createElementFromString=function(a){if(SimileAjax.DOM._cachedParent==null)SimileAjax.DOM._cachedParent=document.createElement("div");SimileAjax.DOM._cachedParent.innerHTML=a;return SimileAjax.DOM._cachedParent.firstChild};SimileAjax.DOM.createDOMFromString=function(a,b,c){a=typeof a=="string"?document.createElement(a):a;a.innerHTML=b;b={elmt:a};SimileAjax.DOM._processDOMChildrenConstructedFromString(b,a,c!=null?c:{});return b};
SimileAjax.DOM._processDOMConstructedFromString=function(a,b,c){var d=b.id;if(d!=null&&d.length>0)if(b.removeAttribute("id"),d in c){var f=b.parentNode;f.insertBefore(c[d],b);f.removeChild(b);a[d]=c[d];return}else a[d]=b;b.hasChildNodes()&&SimileAjax.DOM._processDOMChildrenConstructedFromString(a,b,c)};SimileAjax.DOM._processDOMChildrenConstructedFromString=function(a,b,c){for(b=b.firstChild;b!=null;){var d=b.nextSibling;b.nodeType==1&&SimileAjax.DOM._processDOMConstructedFromString(a,b,c);b=d}};
SimileAjax.Graphics={};SimileAjax.Graphics.pngIsTranslucent=!SimileAjax.Platform.browser.isIE||SimileAjax.Platform.browser.majorVersion>6;SimileAjax.Graphics.pngIsTranslucent||SimileAjax.includeCssFile(document,SimileAjax.urlPrefix+"styles/graphics-ie6.css");SimileAjax.Graphics._createTranslucentImage1=function(a,b){var c=document.createElement("img");c.setAttribute("src",a);if(b!=null)c.style.verticalAlign=b;return c};
SimileAjax.Graphics._createTranslucentImage2=function(a,b){var c=document.createElement("img");c.style.width="1px";c.style.height="1px";c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='image')";c.style.verticalAlign=b!=null?b:"middle";return c};SimileAjax.Graphics.createTranslucentImage=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImage1:SimileAjax.Graphics._createTranslucentImage2;
SimileAjax.Graphics._createTranslucentImageHTML1=function(a,b){return'<img src="'+a+'"'+(b!=null?' style="vertical-align: '+b+';"':"")+" />"};SimileAjax.Graphics._createTranslucentImageHTML2=function(a,b){return"<img src='"+a+"' style=\""+("width: 1px; height: 1px; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='image');"+(b!=null?" vertical-align: "+b+";":""))+'" />'};
SimileAjax.Graphics.createTranslucentImageHTML=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImageHTML1:SimileAjax.Graphics._createTranslucentImageHTML2;SimileAjax.Graphics.setOpacity=function(a,b){if(SimileAjax.Platform.browser.isIE)a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Style=0,Opacity="+b+")";else{var c=(b/100).toString();a.style.opacity=c;a.style.MozOpacity=c}};
SimileAjax.Graphics.bubbleConfig={containerCSSClass:"simileAjax-bubble-container",innerContainerCSSClass:"simileAjax-bubble-innerContainer",contentContainerCSSClass:"simileAjax-bubble-contentContainer",borderGraphicSize:50,borderGraphicCSSClassPrefix:"simileAjax-bubble-border-",arrowGraphicTargetOffset:33,arrowGraphicLength:100,arrowGraphicWidth:49,arrowGraphicCSSClassPrefix:"simileAjax-bubble-arrow-",closeGraphicCSSClass:"simileAjax-bubble-close",extraPadding:20};
SimileAjax.Graphics.createBubbleForContentAndPoint=function(a,b,c,d,f,e){typeof d!="number"&&(d=300);typeof e!="number"&&(e=0);a.style.position="absolute";a.style.left="-5000px";a.style.top="0px";a.style.width=d+"px";document.body.appendChild(a);window.setTimeout(function(){var d=a.scrollWidth+10,j=a.scrollHeight+10,h=0;e>0&&j>e&&(j=e,h=d-25);j=SimileAjax.Graphics.createBubbleForPoint(b,c,d,j,f);document.body.removeChild(a);a.style.position="static";a.style.left="";a.style.top="";h>0?(d=document.createElement("div"),
a.style.width="",d.style.width=h+"px",d.appendChild(a),j.content.appendChild(d)):(a.style.width=d+"px",j.content.appendChild(a))},200)};
SimileAjax.Graphics.createBubbleForPoint=function(a,b,c,d,f){var c=parseInt(c,10),d=parseInt(d,10),e=SimileAjax.Graphics.bubbleConfig,g=SimileAjax.Graphics.pngIsTranslucent?"pngTranslucent":"pngNotTranslucent",j=function(a){return a+" "+a+"-"+g},h=document.createElement("div");h.className=j(e.containerCSSClass);h.style.width=c+"px";h.style.height=d+"px";var k=document.createElement("div");k.className=j(e.innerContainerCSSClass);h.appendChild(k);var l={_closed:!1},m=SimileAjax.WindowManager.pushLayer(function(){if(!l._closed)document.body.removeChild(l._div),
l._doc=null,l._div=null,l._content=null,l._closed=!0},!0,h);l._div=h;l.close=function(){SimileAjax.WindowManager.popLayer(m)};var p=function(a){var b=document.createElement("div");b.className=j(e.borderGraphicCSSClassPrefix+a);k.appendChild(b)};p("top-left");p("top-right");p("bottom-left");p("bottom-right");p("left");p("right");p("top");p("bottom");p=document.createElement("div");p.className=j(e.contentContainerCSSClass);k.appendChild(p);l.content=p;p=document.createElement("div");p.className=j(e.closeGraphicCSSClass);
k.appendChild(p);SimileAjax.WindowManager.registerEventWithObject(p,"click",l,"close");(function(){var g=SimileAjax.Graphics.getWindowDimensions(),l=g.w,m=g.h,g=Math.ceil(e.arrowGraphicWidth/2),p=function(a){var b=document.createElement("div");b.className=j(e.arrowGraphicCSSClassPrefix+"point-"+a);k.appendChild(b);return b};if(a-g-e.borderGraphicSize-e.extraPadding>0&&a+g+e.borderGraphicSize+e.extraPadding<l){var s=a-Math.round(c/2),s=a<l/2?Math.max(s,e.extraPadding+e.borderGraphicSize):Math.min(s,
l-e.extraPadding-e.borderGraphicSize-c);if(f&&f=="top"||!f&&b-e.arrowGraphicTargetOffset-d-e.borderGraphicSize-e.extraPadding>0){m=p("down");m.style.left=a-g-s+"px";h.style.left=s+"px";h.style.top=b-e.arrowGraphicTargetOffset-d+"px";return}else if(f&&f=="bottom"||!f&&b+e.arrowGraphicTargetOffset+d+e.borderGraphicSize+e.extraPadding<m){m=p("up");m.style.left=a-g-s+"px";h.style.left=s+"px";h.style.top=b+e.arrowGraphicTargetOffset+"px";return}}l=b-Math.round(d/2);l=b<m/2?Math.max(l,e.extraPadding+e.borderGraphicSize):
Math.min(l,m-e.extraPadding-e.borderGraphicSize-d);f&&f=="left"||!f&&a-e.arrowGraphicTargetOffset-c-e.borderGraphicSize-e.extraPadding>0?(m=p("right"),m.style.top=b-g-l+"px",h.style.top=l+"px",h.style.left=a-e.arrowGraphicTargetOffset-c+"px"):(m=p("left"),m.style.top=b-g-l+"px",h.style.top=l+"px",h.style.left=a+e.arrowGraphicTargetOffset+"px")})();document.body.appendChild(h);return l};
SimileAjax.Graphics.getWindowDimensions=function(){if(typeof window.innerHeight=="number")return{w:window.innerWidth,h:window.innerHeight};else if(document.documentElement&&document.documentElement.clientHeight)return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight};else if(document.body&&document.body.clientHeight)return{w:document.body.clientWidth,h:document.body.clientHeight}};
SimileAjax.Graphics.createMessageBubble=function(a){var b=a.createElement("div");if(SimileAjax.Graphics.pngIsTranslucent){var c=a.createElement("div");c.style.height="33px";c.style.background="url("+SimileAjax.urlPrefix+"images/message-top-left.png) top left no-repeat";c.style.paddingLeft="44px";b.appendChild(c);var d=a.createElement("div");d.style.height="33px";d.style.background="url("+SimileAjax.urlPrefix+"images/message-top-right.png) top right no-repeat";c.appendChild(d);c=a.createElement("div");
c.style.background="url("+SimileAjax.urlPrefix+"images/message-left.png) top left repeat-y";c.style.paddingLeft="44px";b.appendChild(c);d=a.createElement("div");d.style.background="url("+SimileAjax.urlPrefix+"images/message-right.png) top right repeat-y";d.style.paddingRight="44px";c.appendChild(d);c=a.createElement("div");d.appendChild(c);d=a.createElement("div");d.style.height="55px";d.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-left.png) bottom left no-repeat";d.style.paddingLeft=
"44px";b.appendChild(d);a=a.createElement("div");a.style.height="55px";a.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-right.png) bottom right no-repeat";d.appendChild(a)}else b.style.border="2px solid #7777AA",b.style.padding="20px",b.style.background="white",SimileAjax.Graphics.setOpacity(b,90),c=a.createElement("div"),b.appendChild(c);return{containerDiv:b,contentDiv:c}};
SimileAjax.Graphics.createAnimation=function(a,b,c,d,f){return new SimileAjax.Graphics._Animation(a,b,c,d,f)};SimileAjax.Graphics._Animation=function(a,b,c,d,f){this.f=a;this.cont=typeof f=="function"?f:function(){};this.from=b;this.to=c;this.current=b;this.duration=d;this.start=(new Date).getTime();this.timePassed=0};SimileAjax.Graphics._Animation.prototype.run=function(){var a=this;window.setTimeout(function(){a.step()},50)};
SimileAjax.Graphics._Animation.prototype.step=function(){this.timePassed+=50;var a=(-Math.cos(this.timePassed/this.duration*Math.PI)/2+0.5)*(this.to-this.from)+this.from;try{this.f(a,a-this.current)}catch(b){}this.current=a;this.timePassed<this.duration?this.run():(this.f(this.to,0),this.cont())};
SimileAjax.Graphics.createStructuredDataCopyButton=function(a,b,c,d){var f=document.createElement("div");f.style.position="relative";f.style.display="inline";f.style.width=b+"px";f.style.height=c+"px";f.style.overflow="hidden";f.style.margin="2px";SimileAjax.Graphics.pngIsTranslucent?f.style.background="url("+a+") no-repeat":f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='image')";f.innerHTML="<textarea rows='1' autocomplete='off' value='none' style='"+
(SimileAjax.Platform.browser.isIE?"filter:alpha(opacity=0)":"opacity: 0")+"' />";var e=f.firstChild;e.style.width=b+"px";e.style.height=c+"px";e.onmousedown=function(a){if((a?a:event?event:null).button==2)e.value=d(),e.select()};return f};SimileAjax.Graphics.getWidthHeight=function(a){var b;a.getBoundingClientRect==null?(b=a.offsetWidth,a=a.offsetHeight):(a=a.getBoundingClientRect(),b=Math.ceil(a.right-a.left),a=Math.ceil(a.bottom-a.top));return{width:b,height:a}};
SimileAjax.Graphics.getFontRenderingContext=function(a,b){return new SimileAjax.Graphics._FontRenderingContext(a,b)};SimileAjax.Graphics._FontRenderingContext=function(a,b){this._elmt=a;this._elmt.style.visibility="hidden";if(typeof b=="string")this._elmt.style.width=b;else if(typeof b=="number")this._elmt.style.width=b+"px"};SimileAjax.Graphics._FontRenderingContext.prototype.dispose=function(){this._elmt=null};
SimileAjax.Graphics._FontRenderingContext.prototype.update=function(){this._elmt.innerHTML="A";this._lineHeight=this._elmt.offsetHeight};SimileAjax.Graphics._FontRenderingContext.prototype.computeSize=function(a,b){var c=this._elmt;c.innerHTML=a;c.className=b===void 0?"":b;var d=SimileAjax.Graphics.getWidthHeight(c);c.className="";return d};SimileAjax.Graphics._FontRenderingContext.prototype.getLineHeight=function(){return this._lineHeight};
SimileAjax.History={maxHistoryLength:10,historyFile:"__history__.html",enabled:!0,_initialized:!1,_listeners:new SimileAjax.ListenerQueue,_actions:[],_baseIndex:0,_currentIndex:0,_plainDocumentTitle:document.title};SimileAjax.History.formatHistoryEntryTitle=function(a){return SimileAjax.History._plainDocumentTitle+" {"+a+"}"};
SimileAjax.History.initialize=function(){if(!SimileAjax.History._initialized){SimileAjax.History.enabled=!1;if(SimileAjax.History.enabled){var a=document.createElement("iframe");a.id="simile-ajax-history";a.style.position="absolute";a.style.width="10px";a.style.height="10px";a.style.top="0px";a.style.left="0px";a.style.visibility="hidden";a.src=SimileAjax.History.historyFile+"?0";document.body.appendChild(a);SimileAjax.DOM.registerEvent(a,"load",SimileAjax.History._handleIFrameOnLoad);SimileAjax.History._iframe=
a}SimileAjax.History._initialized=!0}};SimileAjax.History.addListener=function(a){SimileAjax.History.initialize();SimileAjax.History._listeners.add(a)};SimileAjax.History.removeListener=function(a){SimileAjax.History.initialize();SimileAjax.History._listeners.remove(a)};
SimileAjax.History.addAction=function(a){SimileAjax.History.initialize();SimileAjax.History._listeners.fire("onBeforePerform",[a]);window.setTimeout(function(){try{if(a.perform(),SimileAjax.History._listeners.fire("onAfterPerform",[a]),SimileAjax.History.enabled){SimileAjax.History._actions=SimileAjax.History._actions.slice(0,SimileAjax.History._currentIndex-SimileAjax.History._baseIndex);SimileAjax.History._actions.push(a);SimileAjax.History._currentIndex++;var b=SimileAjax.History._actions.length-
SimileAjax.History.maxHistoryLength;if(b>0)SimileAjax.History._actions=SimileAjax.History._actions.slice(b),SimileAjax.History._baseIndex+=b;try{SimileAjax.History._iframe.contentWindow.location.search="?"+SimileAjax.History._currentIndex}catch(c){var d=SimileAjax.History.formatHistoryEntryTitle(a.label);document.title=d}}}catch(f){SimileAjax.Debug.exception(f,"Error adding action {"+a.label+"} to history")}},0)};
SimileAjax.History.addLengthyAction=function(a,b,c){SimileAjax.History.addAction({perform:a,undo:b,label:c,uiLayer:SimileAjax.WindowManager.getBaseLayer(),lengthy:!0})};
SimileAjax.History._handleIFrameOnLoad=function(){try{var a=SimileAjax.History._iframe.contentWindow.location.search,b=a.length==0?0:Math.max(0,parseInt(a.substr(1))),c=function(){var a=b-SimileAjax.History._currentIndex;SimileAjax.History._currentIndex+=a;SimileAjax.History._baseIndex+=a;SimileAjax.History._iframe.contentWindow.location.search="?"+b};if(b<SimileAjax.History._currentIndex)SimileAjax.History._listeners.fire("onBeforeUndoSeveral",[]),window.setTimeout(function(){for(;SimileAjax.History._currentIndex>
b&&SimileAjax.History._currentIndex>SimileAjax.History._baseIndex;){SimileAjax.History._currentIndex--;var a=SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex];try{a.undo()}catch(d){SimileAjax.Debug.exception(d,"History: Failed to undo action {"+a.label+"}")}}SimileAjax.History._listeners.fire("onAfterUndoSeveral",[]);c()},0);else if(b>SimileAjax.History._currentIndex)SimileAjax.History._listeners.fire("onBeforeRedoSeveral",[]),window.setTimeout(function(){for(;SimileAjax.History._currentIndex<
b&&SimileAjax.History._currentIndex-SimileAjax.History._baseIndex<SimileAjax.History._actions.length;){var a=SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex];try{a.perform()}catch(d){SimileAjax.Debug.exception(d,"History: Failed to redo action {"+a.label+"}")}SimileAjax.History._currentIndex++}SimileAjax.History._listeners.fire("onAfterRedoSeveral",[]);c()},0);else{var d=SimileAjax.History._currentIndex-SimileAjax.History._baseIndex-1,f=d>=0&&d<SimileAjax.History._actions.length?
SimileAjax.History.formatHistoryEntryTitle(SimileAjax.History._actions[d].label):SimileAjax.History._plainDocumentTitle;SimileAjax.History._iframe.contentWindow.document.title=f;document.title=f}}catch(e){}};SimileAjax.History.getNextUndoAction=function(){try{return SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex-1]}catch(a){return null}};
SimileAjax.History.getNextRedoAction=function(){try{return SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex]}catch(a){return null}};SimileAjax.HTML={};SimileAjax.HTML._e2uHash={};
(function(){var a=SimileAjax.HTML._e2uHash;a.nbsp="\u00a0[space]";a.iexcl="\u00a1";a.cent="\u00a2";a.pound="\u00a3";a.curren="\u00a4";a.yen="\u00a5";a.brvbar="\u00a6";a.sect="\u00a7";a.uml="\u00a8";a.copy="\u00a9";a.ordf="\u00aa";a.laquo="\u00ab";a.not="\u00ac";a.shy="\u00ad";a.reg="\u00ae";a.macr="\u00af";a.deg="\u00b0";a.plusmn="\u00b1";a.sup2="\u00b2";a.sup3="\u00b3";a.acute="\u00b4";a.micro="\u00b5";a.para="\u00b6";a.middot="\u00b7";a.cedil="\u00b8";a.sup1="\u00b9";a.ordm="\u00ba";a.raquo="\u00bb";
a.frac14="\u00bc";a.frac12="\u00bd";a.frac34="\u00be";a.iquest="\u00bf";a.Agrave="\u00c0";a.Aacute="\u00c1";a.Acirc="\u00c2";a.Atilde="\u00c3";a.Auml="\u00c4";a.Aring="\u00c5";a.AElig="\u00c6";a.Ccedil="\u00c7";a.Egrave="\u00c8";a.Eacute="\u00c9";a.Ecirc="\u00ca";a.Euml="\u00cb";a.Igrave="\u00cc";a.Iacute="\u00cd";a.Icirc="\u00ce";a.Iuml="\u00cf";a.ETH="\u00d0";a.Ntilde="\u00d1";a.Ograve="\u00d2";a.Oacute="\u00d3";a.Ocirc="\u00d4";a.Otilde="\u00d5";a.Ouml="\u00d6";a.times="\u00d7";a.Oslash="\u00d8";
a.Ugrave="\u00d9";a.Uacute="\u00da";a.Ucirc="\u00db";a.Uuml="\u00dc";a.Yacute="\u00dd";a.THORN="\u00de";a.szlig="\u00df";a.agrave="\u00e0";a.aacute="\u00e1";a.acirc="\u00e2";a.atilde="\u00e3";a.auml="\u00e4";a.aring="\u00e5";a.aelig="\u00e6";a.ccedil="\u00e7";a.egrave="\u00e8";a.eacute="\u00e9";a.ecirc="\u00ea";a.euml="\u00eb";a.igrave="\u00ec";a.iacute="\u00ed";a.icirc="\u00ee";a.iuml="\u00ef";a.eth="\u00f0";a.ntilde="\u00f1";a.ograve="\u00f2";a.oacute="\u00f3";a.ocirc="\u00f4";a.otilde="\u00f5";
a.ouml="\u00f6";a.divide="\u00f7";a.oslash="\u00f8";a.ugrave="\u00f9";a.uacute="\u00fa";a.ucirc="\u00fb";a.uuml="\u00fc";a.yacute="\u00fd";a.thorn="\u00fe";a.yuml="\u00ff";a.quot='"';a.amp="&";a.lt="<";a.gt=">";a.OElig="";a.oelig="\u0153";a.Scaron="\u0160";a.scaron="\u0161";a.Yuml="\u0178";a.circ="\u02c6";a.tilde="\u02dc";a.ensp="\u2002";a.emsp="\u2003";a.thinsp="\u2009";a.zwnj="\u200c";a.zwj="\u200d";a.lrm="\u200e";a.rlm="\u200f";a.ndash="\u2013";a.mdash="\u2014";a.lsquo="\u2018";a.rsquo="\u2019";
a.sbquo="\u201a";a.ldquo="\u201c";a.rdquo="\u201d";a.bdquo="\u201e";a.dagger="\u2020";a.Dagger="\u2021";a.permil="\u2030";a.lsaquo="\u2039";a.rsaquo="\u203a";a.euro="\u20ac";a.fnof="\u0192";a.Alpha="\u0391";a.Beta="\u0392";a.Gamma="\u0393";a.Delta="\u0394";a.Epsilon="\u0395";a.Zeta="\u0396";a.Eta="\u0397";a.Theta="\u0398";a.Iota="\u0399";a.Kappa="\u039a";a.Lambda="\u039b";a.Mu="\u039c";a.Nu="\u039d";a.Xi="\u039e";a.Omicron="\u039f";a.Pi="\u03a0";a.Rho="\u03a1";a.Sigma="\u03a3";a.Tau="\u03a4";a.Upsilon=
"\u03a5";a.Phi="\u03a6";a.Chi="\u03a7";a.Psi="\u03a8";a.Omega="\u03a9";a.alpha="\u03b1";a.beta="\u03b2";a.gamma="\u03b3";a.delta="\u03b4";a.epsilon="\u03b5";a.zeta="\u03b6";a.eta="\u03b7";a.theta="\u03b8";a.iota="\u03b9";a.kappa="\u03ba";a.lambda="\u03bb";a.mu="\u03bc";a.nu="\u03bd";a.xi="\u03be";a.omicron="\u03bf";a.pi="\u03c0";a.rho="\u03c1";a.sigmaf="\u03c2";a.sigma="\u03c3";a.tau="\u03c4";a.upsilon="\u03c5";a.phi="\u03c6";a.chi="\u03c7";a.psi="\u03c8";a.omega="\u03c9";a.thetasym="\u03d1";a.upsih=
"\u03d2";a.piv="\u03d6";a.bull="\u2022";a.hellip="\u2026";a.prime="\u2032";a.Prime="\u2033";a.oline="\u203e";a.frasl="\u2044";a.weierp="\u2118";a.image="\u2111";a.real="\u211c";a.trade="\u2122";a.alefsym="\u2135";a.larr="\u2190";a.uarr="\u2191";a.rarr="\u2192";a.darr="\u2193";a.harr="\u2194";a.crarr="\u21b5";a.lArr="\u21d0";a.uArr="\u21d1";a.rArr="\u21d2";a.dArr="\u21d3";a.hArr="\u21d4";a.forall="\u2200";a.part="\u2202";a.exist="\u2203";a.empty="\u2205";a.nabla="\u2207";a.isin="\u2208";a.notin="\u2209";
a.ni="\u220b";a.prod="\u220f";a.sum="\u2211";a.minus="\u2212";a.lowast="\u2217";a.radic="\u221a";a.prop="\u221d";a.infin="\u221e";a.ang="\u2220";a.and="\u2227";a.or="\u2228";a.cap="\u2229";a.cup="\u222a";a["int"]="\u222b";a.there4="\u2234";a.sim="\u223c";a.cong="\u2245";a.asymp="\u2248";a.ne="\u2260";a.equiv="\u2261";a.le="\u2264";a.ge="\u2265";a.sub="\u2282";a.sup="\u2283";a.nsub="\u2284";a.sube="\u2286";a.supe="\u2287";a.oplus="\u2295";a.otimes="\u2297";a.perp="\u22a5";a.sdot="\u22c5";a.lceil="\u2308";
a.rceil="\u2309";a.lfloor="\u230a";a.rfloor="\u230b";a.lang="\u2329";a.rang="\u232a";a.loz="\u25ca";a.spades="\u2660";a.clubs="\u2663";a.hearts="\u2665";a.diams="\u2666"})();SimileAjax.HTML.deEntify=function(a){for(var b=SimileAjax.HTML._e2uHash,c=/&(\w+?);/;c.test(a);)var d=a.match(c),a=a.replace(c,b[d[1]]);return a};SimileAjax.JSON={};
(function(){var a={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b={array:function(a){var d=["["],f,e,g,j=a.length,h;for(g=0;g<j;g+=1)if(h=a[g],e=b[typeof h])h=e(h),typeof h=="string"&&(f&&(d[d.length]=","),d[d.length]=h,f=!0);d[d.length]="]";return d.join("")},"boolean":function(a){return String(a)},"null":function(){return"null"},number:function(a){return isFinite(a)?String(a):"null"},object:function(a){if(a){if(a instanceof Array)return b.array(a);var d=
["{"],f,e,g,j;for(g in a)if(j=a[g],e=b[typeof j])j=e(j),typeof j=="string"&&(f&&(d[d.length]=","),d.push(b.string(g),":",j),f=!0);d[d.length]="}";return d.join("")}return"null"},string:function(b){/["\\\x00-\x1f]/.test(b)&&(b=b.replace(/([\x00-\x1f\\"])/g,function(b,c){var e=a[c];if(e)return e;e=c.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)}));return'"'+b+'"'}};SimileAjax.JSON.toJSONString=function(a){return a instanceof Object?b.object(a):a instanceof Array?b.array(a):
a.toString()};SimileAjax.JSON.parseJSON=function(){try{return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(this.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+this+")")}catch(a){return!1}}})();String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(a){return this.length>=a.length&&this.substr(0,a.length)==a};String.prototype.endsWith=function(a){return this.length>=a.length&&this.substr(this.length-a.length)==a};
String.substitute=function(a,b){for(var c="",d=0;d<a.length-1;){var f=a.indexOf("%",d);if(f<0||f==a.length-1)break;else if(f>d&&a.charAt(f-1)=="\\")c+=a.substring(d,f-1)+"%",d=f+1;else{var e=parseInt(a.charAt(f+1));c+=isNaN(e)||e>=b.length?a.substring(d,f+2):a.substring(d,f)+b[e].toString();d=f+2}}d<a.length&&(c+=a.substring(d));return c};SimileAjax.NativeDateUnit={};SimileAjax.NativeDateUnit.makeDefaultValue=function(){return new Date};SimileAjax.NativeDateUnit.cloneValue=function(a){return new Date(a.getTime())};
SimileAjax.NativeDateUnit.getParser=function(a){typeof a=="string"&&(a=a.toLowerCase());return a=="iso8601"||a=="iso 8601"?SimileAjax.DateTime.parseIso8601DateTime:SimileAjax.DateTime.parseGregorianDateTime};SimileAjax.NativeDateUnit.parseFromObject=function(a){return SimileAjax.DateTime.parseGregorianDateTime(a)};SimileAjax.NativeDateUnit.toNumber=function(a){return a.getTime()};SimileAjax.NativeDateUnit.fromNumber=function(a){return new Date(a)};
SimileAjax.NativeDateUnit.compare=function(a,b){var c,d;c=typeof a=="object"?a.getTime():Number(a);d=typeof b=="object"?b.getTime():Number(b);return c-d};SimileAjax.NativeDateUnit.earlier=function(a,b){return SimileAjax.NativeDateUnit.compare(a,b)<0?a:b};SimileAjax.NativeDateUnit.later=function(a,b){return SimileAjax.NativeDateUnit.compare(a,b)>0?a:b};SimileAjax.NativeDateUnit.change=function(a,b){return new Date(a.getTime()+b)};
SimileAjax.WindowManager={_initialized:!1,_listeners:[],_draggedElement:null,_draggedElementCallback:null,_dropTargetHighlightElement:null,_lastCoords:null,_ghostCoords:null,_draggingMode:"",_dragging:!1,_layers:[]};
SimileAjax.WindowManager.initialize=function(){if(!SimileAjax.WindowManager._initialized)SimileAjax.DOM.registerEvent(document.body,"mousedown",SimileAjax.WindowManager._onBodyMouseDown),SimileAjax.DOM.registerEvent(document.body,"mousemove",SimileAjax.WindowManager._onBodyMouseMove),SimileAjax.DOM.registerEvent(document.body,"mouseup",SimileAjax.WindowManager._onBodyMouseUp),SimileAjax.DOM.registerEvent(document,"keydown",SimileAjax.WindowManager._onBodyKeyDown),SimileAjax.DOM.registerEvent(document,
"keyup",SimileAjax.WindowManager._onBodyKeyUp),SimileAjax.WindowManager._layers.push({index:0}),SimileAjax.WindowManager._historyListener={onBeforeUndoSeveral:function(){},onAfterUndoSeveral:function(){},onBeforeUndo:function(){},onAfterUndo:function(){},onBeforeRedoSeveral:function(){},onAfterRedoSeveral:function(){},onBeforeRedo:function(){},onAfterRedo:function(){}},SimileAjax.History.addListener(SimileAjax.WindowManager._historyListener),SimileAjax.WindowManager._initialized=!0};
SimileAjax.WindowManager.getBaseLayer=function(){SimileAjax.WindowManager.initialize();return SimileAjax.WindowManager._layers[0]};SimileAjax.WindowManager.getHighestLayer=function(){SimileAjax.WindowManager.initialize();return SimileAjax.WindowManager._layers[SimileAjax.WindowManager._layers.length-1]};SimileAjax.WindowManager.registerEventWithObject=function(a,b,c,d,f){SimileAjax.WindowManager.registerEvent(a,b,function(a,b,f){return c[d].call(c,a,b,f)},f)};
SimileAjax.WindowManager.registerEvent=function(a,b,c,d){d==null&&(d=SimileAjax.WindowManager.getHighestLayer());SimileAjax.DOM.registerEvent(a,b,function(a,b,g){if(SimileAjax.WindowManager._canProcessEventAtLayer(d)){SimileAjax.WindowManager._popToLayer(d.index);try{c(a,b,g)}catch(j){SimileAjax.Debug.exception(j)}}SimileAjax.DOM.cancelEvent(b);return!1})};
SimileAjax.WindowManager.pushLayer=function(a,b,c){a={onPop:a,index:SimileAjax.WindowManager._layers.length,ephemeral:b,elmt:c};SimileAjax.WindowManager._layers.push(a);return a};SimileAjax.WindowManager.popLayer=function(a){for(var b=1;b<SimileAjax.WindowManager._layers.length;b++)if(SimileAjax.WindowManager._layers[b]==a){SimileAjax.WindowManager._popToLayer(b-1);break}};SimileAjax.WindowManager.popAllLayers=function(){SimileAjax.WindowManager._popToLayer(0)};
SimileAjax.WindowManager.registerForDragging=function(a,b,c){SimileAjax.WindowManager.registerEvent(a,"mousedown",function(a,c){SimileAjax.WindowManager._handleMouseDown(a,c,b)},c)};SimileAjax.WindowManager._popToLayer=function(a){for(;a+1<SimileAjax.WindowManager._layers.length;)try{var b=SimileAjax.WindowManager._layers.pop();if(b.onPop!=null)b.onPop()}catch(c){}};
SimileAjax.WindowManager._canProcessEventAtLayer=function(a){if(a.index==SimileAjax.WindowManager._layers.length-1)return!0;for(a=a.index+1;a<SimileAjax.WindowManager._layers.length;a++)if(!SimileAjax.WindowManager._layers[a].ephemeral)return!1;return!0};
SimileAjax.WindowManager.cancelPopups=function(a){for(var a=a?SimileAjax.DOM.getEventPageCoordinates(a):{x:-1,y:-1},b=SimileAjax.WindowManager._layers.length-1;b>0&&SimileAjax.WindowManager._layers[b].ephemeral;){var c=SimileAjax.WindowManager._layers[b];if(c.elmt!=null){var c=c.elmt,d=SimileAjax.DOM.getPageCoordinates(c);if(a.x>=d.left&&a.x<d.left+c.offsetWidth&&a.y>=d.top&&a.y<d.top+c.offsetHeight)break}b--}SimileAjax.WindowManager._popToLayer(b)};
SimileAjax.WindowManager._onBodyMouseDown=function(a,b){(!("eventPhase"in b)||b.eventPhase==b.BUBBLING_PHASE)&&SimileAjax.WindowManager.cancelPopups(b)};SimileAjax.WindowManager._handleMouseDown=function(a,b,c){SimileAjax.WindowManager._draggedElement=a;SimileAjax.WindowManager._draggedElementCallback=c;SimileAjax.WindowManager._lastCoords={x:b.clientX,y:b.clientY};SimileAjax.DOM.cancelEvent(b);return!1};
SimileAjax.WindowManager._onBodyKeyDown=function(a,b){if(SimileAjax.WindowManager._dragging)if(b.keyCode==27)SimileAjax.WindowManager._cancelDragging();else if((b.keyCode==17||b.keyCode==16)&&SimileAjax.WindowManager._draggingMode!="copy"){SimileAjax.WindowManager._draggingMode="copy";var c=SimileAjax.Graphics.createTranslucentImage(SimileAjax.urlPrefix+"images/copy.png");c.style.position="absolute";c.style.left=SimileAjax.WindowManager._ghostCoords.left-16+"px";c.style.top=SimileAjax.WindowManager._ghostCoords.top+
"px";document.body.appendChild(c);SimileAjax.WindowManager._draggingModeIndicatorElmt=c}};SimileAjax.WindowManager._onBodyKeyUp=function(a,b){if(SimileAjax.WindowManager._dragging&&(b.keyCode==17||b.keyCode==16))if(SimileAjax.WindowManager._draggingMode="",SimileAjax.WindowManager._draggingModeIndicatorElmt!=null)document.body.removeChild(SimileAjax.WindowManager._draggingModeIndicatorElmt),SimileAjax.WindowManager._draggingModeIndicatorElmt=null};
SimileAjax.WindowManager._onBodyMouseMove=function(a,b,c){if(SimileAjax.WindowManager._draggedElement!=null){var a=SimileAjax.WindowManager._draggedElementCallback,d=SimileAjax.WindowManager._lastCoords,f=b.clientX-d.x,d=b.clientY-d.y;if(SimileAjax.WindowManager._dragging)try{SimileAjax.WindowManager._lastCoords={x:b.clientX,y:b.clientY};if("onDragBy"in a)a.onDragBy(f,d);if("_ghostElmt"in a){m=a._ghostElmt;SimileAjax.WindowManager._ghostCoords.left+=f;SimileAjax.WindowManager._ghostCoords.top+=d;
m.style.left=SimileAjax.WindowManager._ghostCoords.left+"px";m.style.top=SimileAjax.WindowManager._ghostCoords.top+"px";if(SimileAjax.WindowManager._draggingModeIndicatorElmt!=null){var e=SimileAjax.WindowManager._draggingModeIndicatorElmt;e.style.left=SimileAjax.WindowManager._ghostCoords.left-16+"px";e.style.top=SimileAjax.WindowManager._ghostCoords.top+"px"}if("droppable"in a&&a.droppable){var g=SimileAjax.DOM.getEventPageCoordinates(b),c=SimileAjax.DOM.hittest(g.x,g.y,[SimileAjax.WindowManager._ghostElmt,
SimileAjax.WindowManager._dropTargetHighlightElement]),c=SimileAjax.WindowManager._findDropTarget(c);if(c!=SimileAjax.WindowManager._potentialDropTarget){if(SimileAjax.WindowManager._dropTargetHighlightElement!=null)document.body.removeChild(SimileAjax.WindowManager._dropTargetHighlightElement),SimileAjax.WindowManager._dropTargetHighlightElement=null,SimileAjax.WindowManager._potentialDropTarget=null;e=!1;if(c!=null&&(!("canDropOn"in a)||a.canDropOn(c))&&(!("canDrop"in c)||c.canDrop(SimileAjax.WindowManager._draggedElement)))e=
!0;if(e){var j=SimileAjax.DOM.getPageCoordinates(c),h=document.createElement("div");h.style.border="4px solid yellow";h.style.backgroundColor="yellow";h.style.position="absolute";h.style.left=j.left+"px";h.style.top=j.top+"px";h.style.width=c.offsetWidth-8+"px";h.style.height=c.offsetHeight-8+"px";SimileAjax.Graphics.setOpacity(h,30);document.body.appendChild(h);SimileAjax.WindowManager._potentialDropTarget=c;SimileAjax.WindowManager._dropTargetHighlightElement=h}}}}}catch(k){SimileAjax.Debug.exception("WindowManager: Error handling mouse move",
k),SimileAjax.WindowManager._cancelDragging()}else if(Math.abs(f)>5||Math.abs(d)>5)try{if("onDragStart"in a)a.onDragStart();if("ghost"in a&&a.ghost){var l=SimileAjax.WindowManager._draggedElement;SimileAjax.WindowManager._ghostCoords=SimileAjax.DOM.getPageCoordinates(l);SimileAjax.WindowManager._ghostCoords.left+=f;SimileAjax.WindowManager._ghostCoords.top+=d;var m=l.cloneNode(!0);m.style.position="absolute";m.style.left=SimileAjax.WindowManager._ghostCoords.left+"px";m.style.top=SimileAjax.WindowManager._ghostCoords.top+
"px";m.style.zIndex=1E3;SimileAjax.Graphics.setOpacity(m,50);document.body.appendChild(m);a._ghostElmt=m}SimileAjax.WindowManager._dragging=!0;SimileAjax.WindowManager._lastCoords={x:b.clientX,y:b.clientY};document.body.focus()}catch(p){SimileAjax.Debug.exception("WindowManager: Error handling mouse down",p),SimileAjax.WindowManager._cancelDragging()}SimileAjax.DOM.cancelEvent(b);return!1}};
SimileAjax.WindowManager._onBodyMouseUp=function(a,b,c){if(SimileAjax.WindowManager._draggedElement!=null){try{if(SimileAjax.WindowManager._dragging){var d=SimileAjax.WindowManager._draggedElementCallback;if("onDragEnd"in d)d.onDragEnd();if("droppable"in d&&d.droppable&&(c=SimileAjax.WindowManager._potentialDropTarget,c!=null&&(!("canDropOn"in d)||d.canDropOn(c))&&(!("canDrop"in c)||c.canDrop(SimileAjax.WindowManager._draggedElement)))){if("onDropOn"in d)d.onDropOn(c);c.ondrop(SimileAjax.WindowManager._draggedElement,
SimileAjax.WindowManager._draggingMode)}}}finally{SimileAjax.WindowManager._cancelDragging()}SimileAjax.DOM.cancelEvent(b);return!1}};
SimileAjax.WindowManager._cancelDragging=function(){var a=SimileAjax.WindowManager._draggedElementCallback;"_ghostElmt"in a&&(document.body.removeChild(a._ghostElmt),delete a._ghostElmt);if(SimileAjax.WindowManager._dropTargetHighlightElement!=null)document.body.removeChild(SimileAjax.WindowManager._dropTargetHighlightElement),SimileAjax.WindowManager._dropTargetHighlightElement=null;if(SimileAjax.WindowManager._draggingModeIndicatorElmt!=null)document.body.removeChild(SimileAjax.WindowManager._draggingModeIndicatorElmt),
SimileAjax.WindowManager._draggingModeIndicatorElmt=null;SimileAjax.WindowManager._draggedElement=null;SimileAjax.WindowManager._draggedElementCallback=null;SimileAjax.WindowManager._potentialDropTarget=null;SimileAjax.WindowManager._dropTargetHighlightElement=null;SimileAjax.WindowManager._lastCoords=null;SimileAjax.WindowManager._ghostCoords=null;SimileAjax.WindowManager._draggingMode="";SimileAjax.WindowManager._dragging=!1};
SimileAjax.WindowManager._findDropTarget=function(a){for(;a!=null;){if("ondrop"in a&&typeof a.ondrop=="function")break;a=a.parentNode}return a};SimileAjax.XmlHttp={};SimileAjax.XmlHttp._onReadyStateChange=function(a,b,c){switch(a.readyState){case 4:try{a.status==0||a.status==200?c&&c(a):b&&b(a.statusText,a.status,a)}catch(d){SimileAjax.Debug.exception("XmlHttp: Error handling onReadyStateChange",d)}}};
SimileAjax.XmlHttp._createRequest=function(){if(SimileAjax.Platform.browser.isIE)for(var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=0;b<a.length;b++)try{var c=a[b],d=function(){return new ActiveXObject(c)},f=d();SimileAjax.XmlHttp._createRequest=d;return f}catch(e){}try{return d=function(){return new XMLHttpRequest},f=d(),SimileAjax.XmlHttp._createRequest=d,f}catch(g){throw Error("Failed to create an XMLHttpRequest object");}};
SimileAjax.XmlHttp.get=function(a,b,c){var d=SimileAjax.XmlHttp._createRequest();d.open("GET",a,!0);d.onreadystatechange=function(){SimileAjax.XmlHttp._onReadyStateChange(d,b,c)};d.send(null)};SimileAjax.XmlHttp.post=function(a,b,c,d){var f=SimileAjax.XmlHttp._createRequest();f.open("POST",a,!0);f.onreadystatechange=function(){SimileAjax.XmlHttp._onReadyStateChange(f,c,d)};f.send(b)};
SimileAjax.XmlHttp._forceXML=function(a){try{a.overrideMimeType("text/xml")}catch(b){a.setrequestheader("Content-Type","text/xml")}};(function(){for(var a=SimileAjax.urlPrefix+"scripts/signal.js",b=document.documentElement.getElementsByTagName("head"),c=0;c<b.length;c++)for(var d=b[c].firstChild;d!=null;){if(d.nodeType==1&&d.tagName.toLowerCase()=="script"){var f=d.src;if(f.indexOf(a)>=0){b[c].removeChild(d);a=parseInt(f.substr(f.indexOf(a)+a.length+1));SimileAjax.loadingScriptsCount-=a;SimileAjax.loadingScriptsCount==0&&(a=null,typeof SimileAjax_onLoad=="string"?(a=eval(SimileAjax_onLoad),SimileAjax_onLoad=null):typeof SimileAjax_onLoad==
"function"&&(a=SimileAjax_onLoad,SimileAjax_onLoad=null),a!=null&&a());return}}d=d.nextSibling}})();Timeline._Band=function(a,b,c){if(a.autoWidth&&typeof b.width=="string")b.width=b.width.indexOf("%")>-1?0:parseInt(b.width);this._timeline=a;this._bandInfo=b;this._index=c;this._locale="locale"in b?b.locale:Timeline.getDefaultLocale();this._timeZone="timeZone"in b?b.timeZone:0;this._labeller="labeller"in b?b.labeller:"createLabeller"in a.getUnit()?a.getUnit().createLabeller(this._locale,this._timeZone):new Timeline.GregorianDateLabeller(this._locale,this._timeZone);this._theme=b.theme;this._zoomIndex=
"zoomIndex"in b?b.zoomIndex:0;this._zoomSteps="zoomSteps"in b?b.zoomSteps:null;this._changing=this._dragging=!1;this._scrollSpeed=this._originalScrollSpeed=5;this._onScrollListeners=[];var d=this;this._syncWithBand=null;this._syncWithBandHandler=function(){d._onHighlightBandScroll()};this._selectorListener=function(){d._onHighlightBandScroll()};var f=this._timeline.getDocument().createElement("div");f.className="timeline-band-input";this._timeline.addDiv(f);this._keyboardInput=document.createElement("input");
this._keyboardInput.type="text";f.appendChild(this._keyboardInput);SimileAjax.DOM.registerEventWithObject(this._keyboardInput,"keydown",this,"_onKeyDown");SimileAjax.DOM.registerEventWithObject(this._keyboardInput,"keyup",this,"_onKeyUp");this._div=this._timeline.getDocument().createElement("div");this._div.id="timeline-band-"+c;this._div.className="timeline-band timeline-band-"+c;this._timeline.addDiv(this._div);SimileAjax.DOM.registerEventWithObject(this._div,"mousedown",this,"_onMouseDown");SimileAjax.DOM.registerEventWithObject(this._div,
"mousemove",this,"_onMouseMove");SimileAjax.DOM.registerEventWithObject(this._div,"mouseup",this,"_onMouseUp");SimileAjax.DOM.registerEventWithObject(this._div,"mouseout",this,"_onMouseOut");SimileAjax.DOM.registerEventWithObject(this._div,"dblclick",this,"_onDblClick");c=this._theme!=null?this._theme.mouseWheel:"scroll";if(c==="zoom"||c==="scroll"||this._zoomSteps)SimileAjax.Platform.browser.isFirefox?SimileAjax.DOM.registerEventWithObject(this._div,"DOMMouseScroll",this,"_onMouseScroll"):SimileAjax.DOM.registerEventWithObject(this._div,
"mousewheel",this,"_onMouseScroll");this._innerDiv=this._timeline.getDocument().createElement("div");this._innerDiv.className="timeline-band-inner";this._div.appendChild(this._innerDiv);this._ether=b.ether;b.ether.initialize(this,a);this._etherPainter=b.etherPainter;b.etherPainter.initialize(this,a);if(this._eventSource=b.eventSource)this._eventListener={onAddMany:function(){d._onAddMany()},onClear:function(){d._onClear()}},this._eventSource.addListener(this._eventListener);this._eventPainter=b.eventPainter;
this._eventTrackIncrement=this._eventTracksNeeded=0;b.eventPainter.initialize(this,a);this._decorators="decorators"in b?b.decorators:[];for(b=0;b<this._decorators.length;b++)this._decorators[b].initialize(this,a)};Timeline._Band.SCROLL_MULTIPLES=5;
Timeline._Band.prototype.dispose=function(){this.closeBubble();if(this._eventSource)this._eventSource.removeListener(this._eventListener),this._eventSource=this._eventListener=null;this._keyboardInput=this._innerDiv=this._div=this._selectorListener=this._syncWithBandHandler=this._onScrollListeners=this._decorators=this._eventPainter=this._etherPainter=this._ether=this._labeller=this._bandInfo=this._timeline=null};Timeline._Band.prototype.addOnScrollListener=function(a){this._onScrollListeners.push(a)};
Timeline._Band.prototype.removeOnScrollListener=function(a){for(var b=0;b<this._onScrollListeners.length;b++)if(this._onScrollListeners[b]==a){this._onScrollListeners.splice(b,1);break}};Timeline._Band.prototype.setSyncWithBand=function(a,b){this._syncWithBand&&this._syncWithBand.removeOnScrollListener(this._syncWithBandHandler);this._syncWithBand=a;this._syncWithBand.addOnScrollListener(this._syncWithBandHandler);this._highlight=b;this._positionHighlight()};Timeline._Band.prototype.getLocale=function(){return this._locale};
Timeline._Band.prototype.getTimeZone=function(){return this._timeZone};Timeline._Band.prototype.getLabeller=function(){return this._labeller};Timeline._Band.prototype.getIndex=function(){return this._index};Timeline._Band.prototype.getEther=function(){return this._ether};Timeline._Band.prototype.getEtherPainter=function(){return this._etherPainter};Timeline._Band.prototype.getEventSource=function(){return this._eventSource};Timeline._Band.prototype.getEventPainter=function(){return this._eventPainter};
Timeline._Band.prototype.getTimeline=function(){return this._timeline};Timeline._Band.prototype.updateEventTrackInfo=function(a,b){this._eventTrackIncrement=b;if(a>this._eventTracksNeeded)this._eventTracksNeeded=a};
Timeline._Band.prototype.checkAutoWidth=function(){if(this._timeline.autoWidth){var a=this._eventPainter.getType()=="overview",b=Math.ceil((this._eventTracksNeeded+(a?this._theme.event.overviewTrack.autoWidthMargin:this._theme.event.track.autoWidthMargin))*this._eventTrackIncrement);b+=a?this._theme.event.overviewTrack.offset:this._theme.event.track.offset;a=this._bandInfo;if(b!=a.width)a.width=b}};Timeline._Band.prototype.layout=function(){this.paint()};
Timeline._Band.prototype.paint=function(){this._etherPainter.paint();this._paintDecorators();this._paintEvents()};Timeline._Band.prototype.softLayout=function(){this.softPaint()};Timeline._Band.prototype.softPaint=function(){this._etherPainter.softPaint();this._softPaintDecorators();this._softPaintEvents()};
Timeline._Band.prototype.setBandShiftAndWidth=function(a,b){var c=this._keyboardInput.parentNode,d=a+Math.floor(b/2);this._timeline.isHorizontal()?(this._div.style.top=a+"px",this._div.style.height=b+"px",c.style.top=d+"px",c.style.left="-1em"):(this._div.style.left=a+"px",this._div.style.width=b+"px",c.style.left=d+"px",c.style.top="-1em")};Timeline._Band.prototype.getViewWidth=function(){return this._timeline.isHorizontal()?this._div.offsetHeight:this._div.offsetWidth};
Timeline._Band.prototype.setViewLength=function(a){this._viewLength=a;this._recenterDiv();this._onChanging()};Timeline._Band.prototype.getViewLength=function(){return this._viewLength};Timeline._Band.prototype.getTotalViewLength=function(){return Timeline._Band.SCROLL_MULTIPLES*this._viewLength};Timeline._Band.prototype.getViewOffset=function(){return this._viewOffset};Timeline._Band.prototype.getMinDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset)};
Timeline._Band.prototype.getMaxDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset+Timeline._Band.SCROLL_MULTIPLES*this._viewLength)};Timeline._Band.prototype.getMinVisibleDate=function(){return this._ether.pixelOffsetToDate(0)};Timeline._Band.prototype.getMinVisibleDateAfterDelta=function(a){return this._ether.pixelOffsetToDate(a)};Timeline._Band.prototype.getMaxVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength)};
Timeline._Band.prototype.getMaxVisibleDateAfterDelta=function(a){return this._ether.pixelOffsetToDate(this._viewLength+a)};Timeline._Band.prototype.getCenterVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength/2)};Timeline._Band.prototype.setMinVisibleDate=function(a){this._changing||this._moveEther(Math.round(-this._ether.dateToPixelOffset(a)))};Timeline._Band.prototype.setMaxVisibleDate=function(a){this._changing||this._moveEther(Math.round(this._viewLength-this._ether.dateToPixelOffset(a)))};
Timeline._Band.prototype.setCenterVisibleDate=function(a){this._changing||this._moveEther(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(a)))};Timeline._Band.prototype.dateToPixelOffset=function(a){return this._ether.dateToPixelOffset(a)-this._viewOffset};Timeline._Band.prototype.pixelOffsetToDate=function(a){return this._ether.pixelOffsetToDate(a+this._viewOffset)};
Timeline._Band.prototype.createLayerDiv=function(a,b){var c=this._timeline.getDocument().createElement("div");c.className="timeline-band-layer"+(typeof b=="string"?" "+b:"");c.style.zIndex=a;this._innerDiv.appendChild(c);var d=this._timeline.getDocument().createElement("div");d.className="timeline-band-layer-inner";d.style.cursor=SimileAjax.Platform.browser.isIE?"move":"-moz-grab";c.appendChild(d);return d};Timeline._Band.prototype.removeLayerDiv=function(a){this._innerDiv.removeChild(a.parentNode)};
Timeline._Band.prototype.scrollToCenter=function(a,b){var c=this._ether.dateToPixelOffset(a);c<-this._viewLength/2?this.setCenterVisibleDate(this.pixelOffsetToDate(c+this._viewLength)):c>3*this._viewLength/2&&this.setCenterVisibleDate(this.pixelOffsetToDate(c-this._viewLength));this._autoScroll(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(a)),b)};
Timeline._Band.prototype.showBubbleForEvent=function(a){var b=this.getEventSource().getEvent(a);if(b){var c=this;this.scrollToCenter(b.getStart(),function(){c._eventPainter.showBubble(b)})}};Timeline._Band.prototype.zoom=function(a,b){if(this._zoomSteps){b+=this._viewOffset;var c=this._ether.pixelOffsetToDate(b);this._etherPainter.zoom(this._ether.zoom(a));this._moveEther(Math.round(-this._ether.dateToPixelOffset(c)));this._moveEther(b)}};
Timeline._Band.prototype._onMouseDown=function(a,b){this.closeBubble();this._dragging=!0;this._dragX=b.clientX;this._dragY=b.clientY};Timeline._Band.prototype._onMouseMove=function(a,b){if(this._dragging){var c=b.clientX-this._dragX,d=b.clientY-this._dragY;this._dragX=b.clientX;this._dragY=b.clientY;this._moveEther(this._timeline.isHorizontal()?c:d);this._positionHighlight()}};Timeline._Band.prototype._onMouseUp=function(){this._dragging=!1;this._keyboardInput.focus()};
Timeline._Band.prototype._onMouseOut=function(a,b){var c=SimileAjax.DOM.getEventRelativeCoordinates(b,a);c.x+=this._viewOffset;if(c.x<0||c.x>a.offsetWidth||c.y<0||c.y>a.offsetHeight)this._dragging=!1};
Timeline._Band.prototype._onMouseScroll=function(a,b){var c=new Date,c=c.getTime();if(!this._lastScrollTime||c-this._lastScrollTime>50){this._lastScrollTime=c;c=0;b.wheelDelta?c=b.wheelDelta/120:b.detail&&(c=-b.detail/3);var d=this._theme.mouseWheel;if(this._zoomSteps||d==="zoom"){if(d=SimileAjax.DOM.getEventRelativeCoordinates(b,a),c!=0){var f;c>0&&(f=!0);c<0&&(f=!1);this._timeline.zoom(f,d.x,d.y,a)}}else d==="scroll"&&this._moveEther(50*(c<0?-1:1))}b.stopPropagation&&b.stopPropagation();b.cancelBubble=
!0;b.preventDefault&&b.preventDefault();b.returnValue=!1};Timeline._Band.prototype._onDblClick=function(a,b){this._autoScroll(-(SimileAjax.DOM.getEventRelativeCoordinates(b,a).x-(this._viewLength/2-this._viewOffset)))};
Timeline._Band.prototype._onKeyDown=function(a,b){if(!this._dragging){switch(b.keyCode){case 27:break;case 37:case 38:this._scrollSpeed=Math.min(50,Math.abs(this._scrollSpeed*1.05));this._moveEther(this._scrollSpeed);break;case 39:case 40:this._scrollSpeed=-Math.min(50,Math.abs(this._scrollSpeed*1.05));this._moveEther(this._scrollSpeed);break;default:return!0}this.closeBubble();SimileAjax.DOM.cancelEvent(b);return!1}return!0};
Timeline._Band.prototype._onKeyUp=function(a,b){if(!this._dragging){this._scrollSpeed=this._originalScrollSpeed;switch(b.keyCode){case 35:this.setCenterVisibleDate(this._eventSource.getLatestDate());break;case 36:this.setCenterVisibleDate(this._eventSource.getEarliestDate());break;case 33:this._autoScroll(this._timeline.getPixelLength());break;case 34:this._autoScroll(-this._timeline.getPixelLength());break;default:return!0}this.closeBubble();SimileAjax.DOM.cancelEvent(b);return!1}return!0};
Timeline._Band.prototype._autoScroll=function(a,b){var c=this;SimileAjax.Graphics.createAnimation(function(a,b){c._moveEther(b)},0,a,1E3,b).run()};
Timeline._Band.prototype._moveEther=function(a){this.closeBubble();if(this._timeline.shiftOK(this._index,a))this._viewOffset+=a,this._ether.shiftPixels(-a),this._timeline.isHorizontal()?this._div.style.left=this._viewOffset+"px":this._div.style.top=this._viewOffset+"px",this._viewOffset>-this._viewLength*0.5||this._viewOffset<-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1.5)?this._recenterDiv():this.softLayout(),this._onChanging()};
Timeline._Band.prototype._onChanging=function(){this._changing=!0;this._fireOnScroll();this._setSyncWithBandDate();this._changing=!1};Timeline._Band.prototype.busy=function(){return this._changing};Timeline._Band.prototype._fireOnScroll=function(){for(var a=0;a<this._onScrollListeners.length;a++)this._onScrollListeners[a](this)};Timeline._Band.prototype._setSyncWithBandDate=function(){this._syncWithBand&&this._syncWithBand.setCenterVisibleDate(this._ether.pixelOffsetToDate(this.getViewLength()/2))};
Timeline._Band.prototype._onHighlightBandScroll=function(){if(this._syncWithBand){var a=this._ether.dateToPixelOffset(this._syncWithBand.getCenterVisibleDate());this._moveEther(Math.round(this._viewLength/2-a));this._highlight&&this._etherPainter.setHighlight(this._syncWithBand.getMinVisibleDate(),this._syncWithBand.getMaxVisibleDate())}};Timeline._Band.prototype._onAddMany=function(){this._paintEvents()};Timeline._Band.prototype._onClear=function(){this._paintEvents()};
Timeline._Band.prototype._positionHighlight=function(){if(this._syncWithBand){var a=this._syncWithBand.getMinVisibleDate(),b=this._syncWithBand.getMaxVisibleDate();this._highlight&&this._etherPainter.setHighlight(a,b)}};
Timeline._Band.prototype._recenterDiv=function(){this._viewOffset=-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1)/2;this._timeline.isHorizontal()?(this._div.style.left=this._viewOffset+"px",this._div.style.width=Timeline._Band.SCROLL_MULTIPLES*this._viewLength+"px"):(this._div.style.top=this._viewOffset+"px",this._div.style.height=Timeline._Band.SCROLL_MULTIPLES*this._viewLength+"px");this.layout()};Timeline._Band.prototype._paintEvents=function(){this._eventPainter.paint()};
Timeline._Band.prototype._softPaintEvents=function(){this._eventPainter.softPaint()};Timeline._Band.prototype._paintDecorators=function(){for(var a=0;a<this._decorators.length;a++)this._decorators[a].paint()};Timeline._Band.prototype._softPaintDecorators=function(){for(var a=0;a<this._decorators.length;a++)this._decorators[a].softPaint()};Timeline._Band.prototype.closeBubble=function(){SimileAjax.WindowManager.cancelPopups()};
Timeline.CompactEventPainter=function(a){this._params=a;this._onSelectListeners=[];this._frc=this._highlightMatcher=this._filterMatcher=null;this._eventIdToElmt={}};Timeline.CompactEventPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._eventIdToElmt=this._highlightLayer=this._lineLayer=this._eventLayer=this._backLayer=null};Timeline.CompactEventPainter.prototype.addOnSelectListener=function(a){this._onSelectListeners.push(a)};
Timeline.CompactEventPainter.prototype.removeOnSelectListener=function(a){for(var b=0;b<this._onSelectListeners.length;b++)if(this._onSelectListeners[b]==a){this._onSelectListeners.splice(b,1);break}};Timeline.CompactEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher};Timeline.CompactEventPainter.prototype.setFilterMatcher=function(a){this._filterMatcher=a};Timeline.CompactEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher};
Timeline.CompactEventPainter.prototype.setHighlightMatcher=function(a){this._highlightMatcher=a};
Timeline.CompactEventPainter.prototype.paint=function(){var a=this._band.getEventSource();if(a!=null){this._eventIdToElmt={};this._prepareForPainting();var b=this._params.theme,c=b.event,b={trackOffset:"trackOffset"in this._params?this._params.trackOffset:10,trackHeight:"trackHeight"in this._params?this._params.trackHeight:10,tapeHeight:b.event.tape.height,tapeBottomMargin:"tapeBottomMargin"in this._params?this._params.tapeBottomMargin:2,labelBottomMargin:"labelBottomMargin"in this._params?this._params.labelBottomMargin:
5,labelRightMargin:"labelRightMargin"in this._params?this._params.labelRightMargin:5,defaultIcon:c.instant.icon,defaultIconWidth:c.instant.iconWidth,defaultIconHeight:c.instant.iconHeight,customIconWidth:"iconWidth"in this._params?this._params.iconWidth:c.instant.iconWidth,customIconHeight:"iconHeight"in this._params?this._params.iconHeight:c.instant.iconHeight,iconLabelGap:"iconLabelGap"in this._params?this._params.iconLabelGap:2,iconBottomMargin:"iconBottomMargin"in this._params?this._params.iconBottomMargin:
2};"compositeIcon"in this._params?(b.compositeIcon=this._params.compositeIcon,b.compositeIconWidth=this._params.compositeIconWidth||b.customIconWidth,b.compositeIconHeight=this._params.compositeIconHeight||b.customIconHeight):(b.compositeIcon=b.defaultIcon,b.compositeIconWidth=b.defaultIconWidth,b.compositeIconHeight=b.defaultIconHeight);b.defaultStackIcon="icon"in this._params.stackConcurrentPreciseInstantEvents?this._params.stackConcurrentPreciseInstantEvents.icon:b.defaultIcon;b.defaultStackIconWidth=
"iconWidth"in this._params.stackConcurrentPreciseInstantEvents?this._params.stackConcurrentPreciseInstantEvents.iconWidth:b.defaultIconWidth;b.defaultStackIconHeight="iconHeight"in this._params.stackConcurrentPreciseInstantEvents?this._params.stackConcurrentPreciseInstantEvents.iconHeight:b.defaultIconHeight;var d=this._band.getMinDate(),f=this._band.getMaxDate(),e=this._filterMatcher!=null?this._filterMatcher:function(){return!0},c=this._highlightMatcher!=null?this._highlightMatcher:function(){return-1},
f=a.getEventIterator(d,f),a="stackConcurrentPreciseInstantEvents"in this._params&&typeof this._params.stackConcurrentPreciseInstantEvents=="object";if("collapseConcurrentPreciseInstantEvents"in this._params&&this._params.collapseConcurrentPreciseInstantEvents||a){for(var d=[],g=null;f.hasNext();){var j=f.next();e(j)&&(!j.isInstant()||j.isImprecise()?this.paintEvent(j,b,this._params.theme,c(j)):g!=null&&g.getStart().getTime()==j.getStart().getTime()?d[d.length-1].push(j):(d.push([j]),g=j))}for(e=0;e<
d.length;e++)if(f=d[e],f.length==1)this.paintEvent(f[0],b,this._params.theme,c(j));else{for(var g=-1,h=0;g<0&&h<f.length;h++)g=c(f[h]);a?this.paintStackedPreciseInstantEvents(f,b,this._params.theme,g):this.paintCompositePreciseInstantEvents(f,b,this._params.theme,g)}}else for(;f.hasNext();)j=f.next(),e(j)&&this.paintEvent(j,b,this._params.theme,c(j));this._highlightLayer.style.display="block";this._lineLayer.style.display="block";this._eventLayer.style.display="block"}};
Timeline.CompactEventPainter.prototype.softPaint=function(){};
Timeline.CompactEventPainter.prototype._prepareForPainting=function(){var a=this._band;if(this._backLayer==null){this._backLayer=this._band.createLayerDiv(0,"timeline-band-events");this._backLayer.style.visibility="hidden";var b=document.createElement("span");b.className="timeline-event-label";this._backLayer.appendChild(b);this._frc=SimileAjax.Graphics.getFontRenderingContext(b)}this._frc.update();this._tracks=[];this._highlightLayer!=null&&a.removeLayerDiv(this._highlightLayer);this._highlightLayer=
a.createLayerDiv(105,"timeline-band-highlights");this._highlightLayer.style.display="none";this._lineLayer!=null&&a.removeLayerDiv(this._lineLayer);this._lineLayer=a.createLayerDiv(110,"timeline-band-lines");this._lineLayer.style.display="none";this._eventLayer!=null&&a.removeLayerDiv(this._eventLayer);this._eventLayer=a.createLayerDiv(115,"timeline-band-events");this._eventLayer.style.display="none"};
Timeline.CompactEventPainter.prototype.paintEvent=function(a,b,c,d){a.isInstant()?this.paintInstantEvent(a,b,c,d):this.paintDurationEvent(a,b,c,d)};Timeline.CompactEventPainter.prototype.paintInstantEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseInstantEvent(a,b,c,d):this.paintPreciseInstantEvent(a,b,c,d)};Timeline.CompactEventPainter.prototype.paintDurationEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseDurationEvent(a,b,c,d):this.paintPreciseDurationEvent(a,b,c,d)};
Timeline.CompactEventPainter.prototype.paintPreciseInstantEvent=function(a,b,c,d){var f={tooltip:a.getProperty("tooltip")||a.getText()},e={url:a.getIcon()};e.url==null?(e.url=b.defaultIcon,e.width=b.defaultIconWidth,e.height=b.defaultIconHeight,e.className="timeline-event-icon-default"):(e.width=a.getProperty("iconWidth")||b.customIconWidth,e.height=a.getProperty("iconHeight")||b.customIconHeight);var g={text:a.getText(),color:a.getTextColor()||a.getColor(),className:a.getClassName()},j=this.paintTapeIconLabel(a.getStart(),
f,null,e,g,b,c,d),h=this,b=function(b,c){return h._onClickInstantEvent(j.iconElmtData.elmt,c,a)};SimileAjax.DOM.registerEvent(j.iconElmtData.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(j.labelElmtData.elmt,"mousedown",b);this._eventIdToElmt[a.getID()]=j.iconElmtData.elmt};
Timeline.CompactEventPainter.prototype.paintCompositePreciseInstantEvents=function(a,b,c,d){for(var f=a[0],e=[],g=0;g<a.length;g++)e.push(a[g].getProperty("tooltip")||a[g].getText());var e={tooltip:e.join("; ")},g={url:b.compositeIcon,width:b.compositeIconWidth,height:b.compositeIconHeight,className:"timeline-event-icon-composite"},j={text:String.substitute(this._params.compositeEventLabelTemplate,[a.length])},h=this.paintTapeIconLabel(f.getStart(),e,null,g,j,b,c,d),k=this,b=function(b,c){return k._onClickMultiplePreciseInstantEvent(h.iconElmtData.elmt,
c,a)};SimileAjax.DOM.registerEvent(h.iconElmtData.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(h.labelElmtData.elmt,"mousedown",b);for(g=0;g<a.length;g++)this._eventIdToElmt[a[g].getID()]=h.iconElmtData.elmt};
Timeline.CompactEventPainter.prototype.paintStackedPreciseInstantEvents=function(a,b,c){var d="limit"in this._params.stackConcurrentPreciseInstantEvents?this._params.stackConcurrentPreciseInstantEvents.limit:10,f="moreMessageTemplate"in this._params.stackConcurrentPreciseInstantEvents?this._params.stackConcurrentPreciseInstantEvents.moreMessageTemplate:"%0 More Events",e=d<=a.length-2,g=this._band,j=function(a){var c={url:a.getIcon()};c.url==null?(c.url=b.defaultStackIcon,c.width=b.defaultStackIconWidth,
c.height=b.defaultStackIconHeight,c.className="timeline-event-icon-stack timeline-event-icon-default"):(c.width=a.getProperty("iconWidth")||b.customIconWidth,c.height=a.getProperty("iconHeight")||b.customIconHeight,c.className="timeline-event-icon-stack");return c},h=j(a[0]),k=0,l=0,m=0,p=0,r=[],q=0;for(;q<a.length&&(!e||q<d);q++){var o=a[q],v=o.getText(),o=j(o),s=this._frc.computeSize(v),v={text:v,iconData:o,labelSize:s,iconLeft:h.width+q*5-o.width};v.labelLeft=h.width+q*5+b.iconLabelGap;v.top=m;
r.push(v);k=Math.min(k,v.iconLeft);m+=s.height;l=Math.max(l,v.labelLeft+s.width);p=Math.max(p,v.top+o.height)}if(e){var y=String.substitute(f,[a.length-d]),u=this._frc.computeSize(y),z=h.width+(d-1)*5+b.iconLabelGap,C=m;m+=u.height;l=Math.max(l,z+u.width)}l+=b.labelRightMargin;m+=b.labelBottomMargin;p+=b.iconBottomMargin;for(var D=function(a){return Math.round(g.dateToPixelOffset(a))}(a[0].getStart()),f=[],j=Math.ceil(Math.max(p,m)/b.trackHeight),h=h.width+(a.length-1)*5,q=0;q<j;q++)f.push({start:k,
end:h});k=Math.ceil(m/b.trackHeight);for(q=0;q<k;q++)m=f[q],m.end=Math.max(m.end,l);var A=this._fitTracks(D,f)*b.trackHeight+b.trackOffset,w=this._timeline.getDocument().createElement("div");w.className="timeline-event-icon-stack";w.style.position="absolute";w.style.overflow="visible";w.style.left=D+"px";w.style.top=A+"px";w.style.width=h+"px";w.style.height=p+"px";w.innerHTML="<div style='position: relative'></div>";this._eventLayer.appendChild(w);var E=this,B=function(){try{for(var a=parseInt(this.getAttribute("index")),
b=w.firstChild.childNodes,c=0;c<b.length;c++)b[c].style.zIndex=c==a?b.length:b.length-c}catch(d){}},l=function(b){var d=r[b],e=a[b],h=e.getProperty("tooltip")||e.getText(),f=E._paintEventLabel({tooltip:h},{text:d.text},D+d.labelLeft,A+d.top,d.labelSize.width,d.labelSize.height,c);f.elmt.setAttribute("index",b);f.elmt.onmouseover=B;var g=SimileAjax.Graphics.createTranslucentImage(d.iconData.url),h=E._timeline.getDocument().createElement("div");h.className="timeline-event-icon"+("className"in d.iconData?
" "+d.iconData.className:"");h.style.left=d.iconLeft+"px";h.style.top=d.top+"px";h.style.zIndex=r.length-b;h.appendChild(g);h.setAttribute("index",b);h.onmouseover=B;w.firstChild.appendChild(h);b=function(a,b){return E._onClickInstantEvent(f.elmt,b,e)};SimileAjax.DOM.registerEvent(h,"mousedown",b);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",b);E._eventIdToElmt[e.getID()]=h},q=0;for(;q<r.length;q++)l(q);if(e){var t=a.slice(d),H=this._paintEventLabel({tooltip:y},{text:y},D+z,A+C,u.width,u.height,
c);SimileAjax.DOM.registerEvent(H.elmt,"mousedown",function(a,b){return E._onClickMultiplePreciseInstantEvent(H.elmt,b,t)});for(q=0;q<t.length;q++)this._eventIdToElmt[t[q].getID()]=H.elmt}};
Timeline.CompactEventPainter.prototype.paintImpreciseInstantEvent=function(a,b,c,d){var f={tooltip:a.getProperty("tooltip")||a.getText()},e={start:a.getStart(),end:a.getEnd(),latestStart:a.getLatestStart(),earliestEnd:a.getEarliestEnd(),isInstant:!0},g={url:a.getIcon()};g.url==null?g=null:(g.width=a.getProperty("iconWidth")||b.customIconWidth,g.height=a.getProperty("iconHeight")||b.customIconHeight);var j={text:a.getText(),color:a.getTextColor()||a.getColor(),className:a.getClassName()},h=this.paintTapeIconLabel(a.getStart(),
f,e,g,j,b,c,d),k=this,b=g!=null?function(b,c){return k._onClickInstantEvent(h.iconElmtData.elmt,c,a)}:function(b,c){return k._onClickInstantEvent(h.labelElmtData.elmt,c,a)};SimileAjax.DOM.registerEvent(h.labelElmtData.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(h.impreciseTapeElmtData.elmt,"mousedown",b);g!=null?(SimileAjax.DOM.registerEvent(h.iconElmtData.elmt,"mousedown",b),this._eventIdToElmt[a.getID()]=h.iconElmtData.elmt):this._eventIdToElmt[a.getID()]=h.labelElmtData.elmt};
Timeline.CompactEventPainter.prototype.paintPreciseDurationEvent=function(a,b,c,d){var f={tooltip:a.getProperty("tooltip")||a.getText()},e={start:a.getStart(),end:a.getEnd(),isInstant:!1},g={url:a.getIcon()};g.url==null?g=null:(g.width=a.getProperty("iconWidth")||b.customIconWidth,g.height=a.getProperty("iconHeight")||b.customIconHeight);var j={text:a.getText(),color:a.getTextColor()||a.getColor(),className:a.getClassName()},h=this.paintTapeIconLabel(a.getLatestStart(),f,e,g,j,b,c,d),k=this,b=g!=
null?function(b,c){return k._onClickInstantEvent(h.iconElmtData.elmt,c,a)}:function(b,c){return k._onClickInstantEvent(h.labelElmtData.elmt,c,a)};SimileAjax.DOM.registerEvent(h.labelElmtData.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(h.tapeElmtData.elmt,"mousedown",b);g!=null?(SimileAjax.DOM.registerEvent(h.iconElmtData.elmt,"mousedown",b),this._eventIdToElmt[a.getID()]=h.iconElmtData.elmt):this._eventIdToElmt[a.getID()]=h.labelElmtData.elmt};
Timeline.CompactEventPainter.prototype.paintImpreciseDurationEvent=function(a,b,c,d){var f={tooltip:a.getProperty("tooltip")||a.getText()},e={start:a.getStart(),end:a.getEnd(),latestStart:a.getLatestStart(),earliestEnd:a.getEarliestEnd(),isInstant:!1},g={url:a.getIcon()};g.url==null?g=null:(g.width=a.getProperty("iconWidth")||b.customIconWidth,g.height=a.getProperty("iconHeight")||b.customIconHeight);var j={text:a.getText(),color:a.getTextColor()||a.getColor(),className:a.getClassName()},h=this.paintTapeIconLabel(a.getLatestStart(),
f,e,g,j,b,c,d),k=this,b=g!=null?function(b,c){return k._onClickInstantEvent(h.iconElmtData.elmt,c,a)}:function(b,c){return k._onClickInstantEvent(h.labelElmtData.elmt,c,a)};SimileAjax.DOM.registerEvent(h.labelElmtData.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(h.tapeElmtData.elmt,"mousedown",b);g!=null?(SimileAjax.DOM.registerEvent(h.iconElmtData.elmt,"mousedown",b),this._eventIdToElmt[a.getID()]=h.iconElmtData.elmt):this._eventIdToElmt[a.getID()]=h.labelElmtData.elmt};
Timeline.CompactEventPainter.prototype.paintTapeIconLabel=function(a,b,c,d,f,e,g){var j=this._band,h=function(a){return Math.round(j.dateToPixelOffset(a))},a=h(a),k=[],l=0,m=0,p=0;if(c!=null){for(var l=e.tapeHeight+e.tapeBottomMargin,m=Math.ceil(e.tapeHeight/e.trackHeight),r=h(c.end)-a,q=h(c.start)-a,o=0;o<m;o++)k.push({start:q,end:r});p=e.trackHeight-l%e.tapeHeight}q=r=0;if(d!=null){"iconAlign"in d&&d.iconAlign=="center"&&(r=-Math.floor(d.width/2));q=r+d.width+e.iconLabelGap;if(m>0)k[m-1].end=Math.max(k[m-
1].end,q);for(o=d.height+e.iconBottomMargin+p;o>0;)k.push({start:r,end:q}),o-=e.trackHeight}var o=this._frc.computeSize(f.text),p=o.height+e.labelBottomMargin+p,v=q+o.width+e.labelRightMargin;if(m>0)k[m-1].end=Math.max(k[m-1].end,v);for(var s=0;p>0;s++)m+s<k.length?k[m+s].end=v:k.push({start:0,end:v}),p-=e.trackHeight;k=this._fitTracks(a,k)*e.trackHeight+e.trackOffset;m={};m.labelElmtData=this._paintEventLabel(b,f,a+q,k+l,o.width,o.height,g);if(c!=null){if("latestStart"in c||"earliestEnd"in c)m.impreciseTapeElmtData=
this._paintEventTape(b,c,e.tapeHeight,k,h(c.start),h(c.end),g.event.duration.impreciseColor,g.event.duration.impreciseOpacity,e,g);if(!c.isInstant&&"start"in c&&"end"in c)m.tapeElmtData=this._paintEventTape(b,c,e.tapeHeight,k,a,h("earliestEnd"in c?c.earliestEnd:c.end),c.color,100,e,g)}if(d!=null)m.iconElmtData=this._paintEventIcon(b,d,k+l,a+r,e,g);return m};
Timeline.CompactEventPainter.prototype._fitTracks=function(a,b){var c;for(c=0;c<this._tracks.length;c++){for(var d=!0,f=0;f<b.length&&c+f<this._tracks.length;f++)if(a+b[f].start<this._tracks[c+f]){d=!1;break}if(d)break}for(d=0;d<b.length;d++)this._tracks[c+d]=a+b[d].end;return c};
Timeline.CompactEventPainter.prototype._paintEventIcon=function(a,b,c,d,f){var e=SimileAjax.Graphics.createTranslucentImage(b.url),g=this._timeline.getDocument().createElement("div");g.className="timeline-event-icon"+("className"in b?" "+b.className:"");g.style.left=d+"px";g.style.top=c+"px";g.appendChild(e);if("tooltip"in a&&typeof a.tooltip=="string")g.title=a.tooltip;this._eventLayer.appendChild(g);return{left:d,top:c,width:f.iconWidth,height:f.iconHeight,elmt:g}};
Timeline.CompactEventPainter.prototype._paintEventLabel=function(a,b,c,d,f,e){var g=this._timeline.getDocument().createElement("div");g.className="timeline-event-label";g.style.left=c+"px";g.style.width=f+1+"px";g.style.top=d+"px";g.innerHTML=b.text;if("tooltip"in a&&typeof a.tooltip=="string")g.title=a.tooltip;if("color"in b&&typeof b.color=="string")g.style.color=b.color;"className"in b&&typeof b.className=="string"&&(g.className+=" "+b.className);this._eventLayer.appendChild(g);return{left:c,top:d,
width:f,height:e,elmt:g}};
Timeline.CompactEventPainter.prototype._paintEventTape=function(a,b,c,d,f,e,g,j){e-=f;var h=this._timeline.getDocument().createElement("div");h.className="timeline-event-tape";h.style.left=f+"px";h.style.top=d+"px";h.style.width=e+"px";h.style.height=c+"px";if("tooltip"in a&&typeof a.tooltip=="string")h.title=a.tooltip;if(g!=null&&typeof b.color=="string")h.style.backgroundColor=g;if("backgroundImage"in b&&typeof b.backgroundImage=="string")h.style.backgroundImage="url("+backgroundImage+")",h.style.backgroundRepeat=
"backgroundRepeat"in b&&typeof b.backgroundRepeat=="string"?b.backgroundRepeat:"repeat";SimileAjax.Graphics.setOpacity(h,j);"className"in b&&typeof b.className=="string"&&(h.className+=" "+b.className);this._eventLayer.appendChild(h);return{left:f,top:d,width:e,height:c,elmt:h}};
Timeline.CompactEventPainter.prototype._createHighlightDiv=function(a,b,c){if(a>=0){var d=this._timeline.getDocument();Math.min(a,c.event.highlightColors.length-1);a=d.createElement("div");a.style.position="absolute";a.style.overflow="hidden";a.style.left=b.left-2+"px";a.style.width=b.width+4+"px";a.style.top=b.top-2+"px";a.style.height=b.height+4+"px";this._highlightLayer.appendChild(a)}};
Timeline.CompactEventPainter.prototype._onClickMultiplePreciseInstantEvent=function(a,b,c){var d=SimileAjax.DOM.getPageCoordinates(a);this._showBubble(d.left+Math.ceil(a.offsetWidth/2),d.top+Math.ceil(a.offsetHeight/2),c);a=[];for(d=0;d<c.length;d++)a.push(c[d].getID());this._fireOnSelect(a);b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.CompactEventPainter.prototype._onClickInstantEvent=function(a,b,c){var d=SimileAjax.DOM.getPageCoordinates(a);this._showBubble(d.left+Math.ceil(a.offsetWidth/2),d.top+Math.ceil(a.offsetHeight/2),[c]);this._fireOnSelect([c.getID()]);b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.CompactEventPainter.prototype._onClickDurationEvent=function(a,b,c){if("pageX"in b)var a=b.pageX,d=b.pageY;else d=SimileAjax.DOM.getPageCoordinates(a),a=b.offsetX+d.left,d=b.offsetY+d.top;this._showBubble(a,d,[c]);this._fireOnSelect([c.getID()]);b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.CompactEventPainter.prototype.showBubble=function(a){var b=this._eventIdToElmt[a.getID()];if(b){var c=SimileAjax.DOM.getPageCoordinates(b);this._showBubble(c.left+b.offsetWidth/2,c.top+b.offsetHeight/2,[a])}};
Timeline.CompactEventPainter.prototype._showBubble=function(a,b,c){var d=document.createElement("div"),c="fillInfoBubble"in c?[c]:c,f=0;for(;f<c.length;f++){var e=document.createElement("div");d.appendChild(e);c[f].fillInfoBubble(e,this._params.theme,this._band.getLabeller())}SimileAjax.WindowManager.cancelPopups();SimileAjax.Graphics.createBubbleForContentAndPoint(d,a,b,this._params.theme.event.bubble.width)};Timeline.CompactEventPainter.prototype._fireOnSelect=function(a){for(var b=0;b<this._onSelectListeners.length;b++)this._onSelectListeners[b](a)};
Timeline.SpanHighlightDecorator=function(a){this._unit=a.unit!=null?a.unit:SimileAjax.NativeDateUnit;this._startDate=typeof a.startDate=="string"?this._unit.parseFromObject(a.startDate):a.startDate;this._endDate=typeof a.endDate=="string"?this._unit.parseFromObject(a.endDate):a.endDate;this._startLabel=a.startLabel!=null?a.startLabel:"";this._endLabel=a.endLabel!=null?a.endLabel:"";this._color=a.color;this._cssClass=a.cssClass!=null?a.cssClass:null;this._opacity=a.opacity!=null?a.opacity:100;this._zIndex=
a.inFront!=null&&a.inFront?113:10};Timeline.SpanHighlightDecorator.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._layerDiv=null};
Timeline.SpanHighlightDecorator.prototype.paint=function(){this._layerDiv!=null&&this._band.removeLayerDiv(this._layerDiv);this._layerDiv=this._band.createLayerDiv(this._zIndex);this._layerDiv.setAttribute("name","span-highlight-decorator");this._layerDiv.style.display="none";var a=this._band.getMinDate(),b=this._band.getMaxDate();if(this._unit.compare(this._startDate,b)<0&&this._unit.compare(this._endDate,a)>0){var a=this._unit.later(a,this._startDate),b=this._unit.earlier(b,this._endDate),a=this._band.dateToPixelOffset(a),
b=this._band.dateToPixelOffset(b),c=this._timeline.getDocument(),d=function(){var a=c.createElement("table");a.insertRow(0).insertCell(0);return a},f=c.createElement("div");f.className="timeline-highlight-decorator";this._cssClass&&(f.className+=" "+this._cssClass);if(this._color!=null)f.style.backgroundColor=this._color;this._opacity<100&&SimileAjax.Graphics.setOpacity(f,this._opacity);this._layerDiv.appendChild(f);var e=d();e.className="timeline-highlight-label timeline-highlight-label-start";var g=
e.rows[0].cells[0];g.innerHTML=this._startLabel;if(this._cssClass)g.className="label_"+this._cssClass;this._layerDiv.appendChild(e);d=d();d.className="timeline-highlight-label timeline-highlight-label-end";g=d.rows[0].cells[0];g.innerHTML=this._endLabel;if(this._cssClass)g.className="label_"+this._cssClass;this._layerDiv.appendChild(d);this._timeline.isHorizontal()?(f.style.left=a+"px",f.style.width=b-a+"px",e.style.right=this._band.getTotalViewLength()-a+"px",e.style.width=this._startLabel.length+
"em",d.style.left=b+"px",d.style.width=this._endLabel.length+"em"):(f.style.top=a+"px",f.style.height=b-a+"px",e.style.bottom=a+"px",e.style.height="1.5px",d.style.top=b+"px",d.style.height="1.5px")}this._layerDiv.style.display="block"};Timeline.SpanHighlightDecorator.prototype.softPaint=function(){};
Timeline.PointHighlightDecorator=function(a){this._unit=a.unit!=null?a.unit:SimileAjax.NativeDateUnit;this._date=typeof a.date=="string"?this._unit.parseFromObject(a.date):a.date;this._width=a.width!=null?a.width:10;this._color=a.color;this._cssClass=a.cssClass!=null?a.cssClass:"";this._opacity=a.opacity!=null?a.opacity:100};Timeline.PointHighlightDecorator.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._layerDiv=null};
Timeline.PointHighlightDecorator.prototype.paint=function(){this._layerDiv!=null&&this._band.removeLayerDiv(this._layerDiv);this._layerDiv=this._band.createLayerDiv(10);this._layerDiv.setAttribute("name","span-highlight-decorator");this._layerDiv.style.display="none";var a=this._band.getMinDate();if(this._unit.compare(this._date,this._band.getMaxDate())<0&&this._unit.compare(this._date,a)>0){var a=this._band.dateToPixelOffset(this._date)-Math.round(this._width/2),b=this._timeline.getDocument().createElement("div");
b.className="timeline-highlight-point-decorator";b.className+=" "+this._cssClass;if(this._color!=null)b.style.backgroundColor=this._color;this._opacity<100&&SimileAjax.Graphics.setOpacity(b,this._opacity);this._layerDiv.appendChild(b);this._timeline.isHorizontal()?(b.style.left=a+"px",b.style.width=this._width):(b.style.top=a+"px",b.style.height=this._width)}this._layerDiv.style.display="block"};Timeline.PointHighlightDecorator.prototype.softPaint=function(){};
Timeline.DetailedEventPainter=function(a){this._params=a;this._onSelectListeners=[];this._frc=this._highlightMatcher=this._filterMatcher=null;this._eventIdToElmt={}};Timeline.DetailedEventPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._eventIdToElmt=this._highlightLayer=this._lineLayer=this._eventLayer=this._backLayer=null};Timeline.DetailedEventPainter.prototype.getType=function(){return"detailed"};Timeline.DetailedEventPainter.prototype.addOnSelectListener=function(a){this._onSelectListeners.push(a)};
Timeline.DetailedEventPainter.prototype.removeOnSelectListener=function(a){for(var b=0;b<this._onSelectListeners.length;b++)if(this._onSelectListeners[b]==a){this._onSelectListeners.splice(b,1);break}};Timeline.DetailedEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher};Timeline.DetailedEventPainter.prototype.setFilterMatcher=function(a){this._filterMatcher=a};Timeline.DetailedEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher};
Timeline.DetailedEventPainter.prototype.setHighlightMatcher=function(a){this._highlightMatcher=a};
Timeline.DetailedEventPainter.prototype.paint=function(){var a=this._band.getEventSource();if(a!=null){this._eventIdToElmt={};this._prepareForPainting();for(var b=this._params.theme.event,c=Math.max(b.track.height,this._frc.getLineHeight()),b={trackOffset:Math.round(this._band.getViewWidth()/2-c/2),trackHeight:c,trackGap:b.track.gap,trackIncrement:c+b.track.gap,icon:b.instant.icon,iconWidth:b.instant.iconWidth,iconHeight:b.instant.iconHeight,labelWidth:b.label.width},d=this._band.getMinDate(),f=this._band.getMaxDate(),
c=this._filterMatcher!=null?this._filterMatcher:function(){return!0},e=this._highlightMatcher!=null?this._highlightMatcher:function(){return-1},a=a.getEventReverseIterator(d,f);a.hasNext();)d=a.next(),c(d)&&this.paintEvent(d,b,this._params.theme,e(d));this._highlightLayer.style.display="block";this._lineLayer.style.display="block";this._eventLayer.style.display="block";this._band.updateEventTrackInfo(this._lowerTracks.length+this._upperTracks.length,b.trackIncrement)}};
Timeline.DetailedEventPainter.prototype.softPaint=function(){};
Timeline.DetailedEventPainter.prototype._prepareForPainting=function(){var a=this._band;if(this._backLayer==null){this._backLayer=this._band.createLayerDiv(0,"timeline-band-events");this._backLayer.style.visibility="hidden";var b=document.createElement("span");b.className="timeline-event-label";this._backLayer.appendChild(b);this._frc=SimileAjax.Graphics.getFontRenderingContext(b)}this._frc.update();this._lowerTracks=[];this._upperTracks=[];this._highlightLayer!=null&&a.removeLayerDiv(this._highlightLayer);
this._highlightLayer=a.createLayerDiv(105,"timeline-band-highlights");this._highlightLayer.style.display="none";this._lineLayer!=null&&a.removeLayerDiv(this._lineLayer);this._lineLayer=a.createLayerDiv(110,"timeline-band-lines");this._lineLayer.style.display="none";this._eventLayer!=null&&a.removeLayerDiv(this._eventLayer);this._eventLayer=a.createLayerDiv(110,"timeline-band-events");this._eventLayer.style.display="none"};
Timeline.DetailedEventPainter.prototype.paintEvent=function(a,b,c,d){a.isInstant()?this.paintInstantEvent(a,b,c,d):this.paintDurationEvent(a,b,c,d)};Timeline.DetailedEventPainter.prototype.paintInstantEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseInstantEvent(a,b,c,d):this.paintPreciseInstantEvent(a,b,c,d)};Timeline.DetailedEventPainter.prototype.paintDurationEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseDurationEvent(a,b,c,d):this.paintPreciseDurationEvent(a,b,c,d)};
Timeline.DetailedEventPainter.prototype.paintPreciseInstantEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=Math.round(this._band.dateToPixelOffset(e)),j=Math.round(g+b.iconWidth/2),h=Math.round(g-b.iconWidth/2),e=this._frc.computeSize(f),k=this._findFreeTrackForSolid(j,g),l=this._paintEventIcon(a,k,h,b,c);j+=c.event.label.offsetFromLine;var m=k,p=this._getTrackData(k);Math.min(p.solid,p.text)>=j+e.width?(p.solid=h,p.text=j):(p.solid=h,j=g+c.event.label.offsetFromLine,
m=this._findFreeTrackForText(k,j+e.width,function(a){a.line=g-2}),this._getTrackData(m).text=h,this._paintEventLine(a,g,k,m,b,c));var b=Math.round(b.trackOffset+m*b.trackIncrement+b.trackHeight/2-e.height/2),f=this._paintEventLabel(a,f,j,b,e.width,e.height,c),r=this,b=function(b,c){return r._onClickInstantEvent(l.elmt,c,a)};SimileAjax.DOM.registerEvent(l.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",b);this._createHighlightDiv(d,l,c);this._eventIdToElmt[a.getID()]=l.elmt};
Timeline.DetailedEventPainter.prototype.paintImpreciseInstantEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getEnd(),j=Math.round(this._band.dateToPixelOffset(e)),h=Math.round(this._band.dateToPixelOffset(g)),k=Math.round(j+b.iconWidth/2),l=Math.round(j-b.iconWidth/2),g=this._frc.computeSize(f),m=this._findFreeTrackForSolid(h,j),e=this._paintEventTape(a,m,j,h,c.event.instant.impreciseColor,c.event.instant.impreciseOpacity,b,c),p=this._paintEventIcon(a,m,
l,b,c);this._getTrackData(m).solid=l;k+=c.event.label.offsetFromLine;var r=k+g.width;r<h?h=m:(k=j+c.event.label.offsetFromLine,r=k+g.width,h=this._findFreeTrackForText(m,r,function(a){a.line=j-2}),this._getTrackData(h).text=l,this._paintEventLine(a,j,m,h,b,c));var b=Math.round(b.trackOffset+h*b.trackIncrement+b.trackHeight/2-g.height/2),f=this._paintEventLabel(a,f,k,b,g.width,g.height,c),q=this,b=function(b,c){return q._onClickInstantEvent(p.elmt,c,a)};SimileAjax.DOM.registerEvent(p.elmt,"mousedown",
b);SimileAjax.DOM.registerEvent(e.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",b);this._createHighlightDiv(d,p,c);this._eventIdToElmt[a.getID()]=p.elmt};
Timeline.DetailedEventPainter.prototype.paintPreciseDurationEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getEnd(),j=Math.round(this._band.dateToPixelOffset(e)),h=Math.round(this._band.dateToPixelOffset(g)),e=this._frc.computeSize(f),g=this._findFreeTrackForSolid(h),k=a.getColor(),k=k!=null?k:c.event.duration.color,l=this._paintEventTape(a,g,j,h,k,100,b,c);this._getTrackData(g).solid=j;h=j+c.event.label.offsetFromLine;k=this._findFreeTrackForText(g,h+e.width,
function(a){a.line=j-2});this._getTrackData(k).text=j-2;this._paintEventLine(a,j,g,k,b,c);var b=Math.round(b.trackOffset+k*b.trackIncrement+b.trackHeight/2-e.height/2),f=this._paintEventLabel(a,f,h,b,e.width,e.height,c),m=this,b=function(b,c){return m._onClickDurationEvent(l.elmt,c,a)};SimileAjax.DOM.registerEvent(l.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",b);this._createHighlightDiv(d,l,c);this._eventIdToElmt[a.getID()]=l.elmt};
Timeline.DetailedEventPainter.prototype.paintImpreciseDurationEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getLatestStart(),j=a.getEnd(),h=a.getEarliestEnd(),e=Math.round(this._band.dateToPixelOffset(e)),k=Math.round(this._band.dateToPixelOffset(g)),j=Math.round(this._band.dateToPixelOffset(j)),l=Math.round(this._band.dateToPixelOffset(h)),h=this._frc.computeSize(f),g=this._findFreeTrackForSolid(j),m=a.getColor(),m=m!=null?m:c.event.duration.color;this._paintEventTape(a,
g,e,j,c.event.duration.impreciseColor,c.event.duration.impreciseOpacity,b,c);var p=this._paintEventTape(a,g,k,l,m,100,b,c);this._getTrackData(g).solid=e;e=k+c.event.label.offsetFromLine;j=this._findFreeTrackForText(g,e+h.width,function(a){a.line=k-2});this._getTrackData(j).text=k-2;this._paintEventLine(a,k,g,j,b,c);var b=Math.round(b.trackOffset+j*b.trackIncrement+b.trackHeight/2-h.height/2),f=this._paintEventLabel(a,f,e,b,h.width,h.height,c),r=this,b=function(b,c){return r._onClickDurationEvent(p.elmt,
c,a)};SimileAjax.DOM.registerEvent(p.elmt,"mousedown",b);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",b);this._createHighlightDiv(d,p,c);this._eventIdToElmt[a.getID()]=p.elmt};
Timeline.DetailedEventPainter.prototype._findFreeTrackForSolid=function(a,b){for(var c=0;;c++){if(c<this._lowerTracks.length){var d=this._lowerTracks[c];if(Math.min(d.solid,d.text)>a&&(!b||d.line>b))return c}else return this._lowerTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY}),c;if(c<this._upperTracks.length){if(d=this._upperTracks[c],Math.min(d.solid,d.text)>a&&(!b||d.line>b))return-1-c}else return this._upperTracks.push({solid:Number.POSITIVE_INFINITY,
text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY}),-1-c}};
Timeline.DetailedEventPainter.prototype._findFreeTrackForText=function(a,b,c){var d,f;a<0?(d=!0,a=-a,b=this._findFreeUpperTrackForText(a,b),f=-1-b):a>0?(d=!1,a+=1,f=b=this._findFreeLowerTrackForText(a,b)):(f=this._findFreeUpperTrackForText(0,b),b=this._findFreeLowerTrackForText(1,b),b-1<=f?(d=!1,a=1,f=b):(d=!0,a=0,b=f,f=-1-b));if(d){b==this._upperTracks.length&&this._upperTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY});for(d=a;d<b;d++)c(this._upperTracks[d])}else{b==
this._lowerTracks.length&&this._lowerTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY});for(d=a;d<b;d++)c(this._lowerTracks[d])}return f};Timeline.DetailedEventPainter.prototype._findFreeLowerTrackForText=function(a,b){for(;a<this._lowerTracks.length;a++){var c=this._lowerTracks[a];if(Math.min(c.solid,c.text)>=b)break}return a};
Timeline.DetailedEventPainter.prototype._findFreeUpperTrackForText=function(a,b){for(;a<this._upperTracks.length;a++){var c=this._upperTracks[a];if(Math.min(c.solid,c.text)>=b)break}return a};Timeline.DetailedEventPainter.prototype._getTrackData=function(a){return a<0?this._upperTracks[-a-1]:this._lowerTracks[a]};
Timeline.DetailedEventPainter.prototype._paintEventLine=function(a,b,c,d,f,e){var a=Math.round(f.trackOffset+c*f.trackIncrement+f.trackHeight/2),f=Math.round(Math.abs(d-c)*f.trackIncrement),g="1px solid "+e.event.label.lineColor,j=this._timeline.getDocument().createElement("div");j.style.position="absolute";j.style.left=b+"px";j.style.width=e.event.label.offsetFromLine+"px";j.style.height=f+"px";c>d?(j.style.top=a-f+"px",j.style.borderTop=g):(j.style.top=a+"px",j.style.borderBottom=g);j.style.borderLeft=
g;this._lineLayer.appendChild(j)};
Timeline.DetailedEventPainter.prototype._paintEventIcon=function(a,b,c,d){var f=a.getIcon(),f=f!=null?f:d.icon,b=Math.round(d.trackOffset+b*d.trackIncrement+d.trackHeight/2-d.iconHeight/2),f=SimileAjax.Graphics.createTranslucentImage(f),e=this._timeline.getDocument().createElement("div");e.style.position="absolute";e.style.left=c+"px";e.style.top=b+"px";e.appendChild(f);e.style.cursor="pointer";if(a._title!=null)e.title=a._title;this._eventLayer.appendChild(e);return{left:c,top:b,width:d.iconWidth,
height:d.iconHeight,elmt:e}};
Timeline.DetailedEventPainter.prototype._paintEventLabel=function(a,b,c,d,f,e,g){var j=this._timeline.getDocument(),h=j.createElement("div");h.style.position="absolute";h.style.left=c+"px";h.style.width=f+"px";h.style.top=d+"px";h.style.height=e+"px";h.style.backgroundColor=g.event.label.backgroundColor;SimileAjax.Graphics.setOpacity(h,g.event.label.backgroundOpacity);this._eventLayer.appendChild(h);g=j.createElement("div");g.style.position="absolute";g.style.left=c+"px";g.style.width=f+"px";g.style.top=
d+"px";g.innerHTML=b;g.style.cursor="pointer";if(a._title!=null)g.title=a._title;b=a.getTextColor();b==null&&(b=a.getColor());if(b!=null)g.style.color=b;this._eventLayer.appendChild(g);return{left:c,top:d,width:f,height:e,elmt:g}};
Timeline.DetailedEventPainter.prototype._paintEventTape=function(a,b,c,d,f,e,g,j){d-=c;j=j.event.tape.height;b=Math.round(g.trackOffset+b*g.trackIncrement+g.trackHeight/2-j/2);g=this._timeline.getDocument().createElement("div");g.style.position="absolute";g.style.left=c+"px";g.style.width=d+"px";g.style.top=b+"px";g.style.height=j+"px";g.style.backgroundColor=f;g.style.overflow="hidden";g.style.cursor="pointer";if(a._title!=null)g.title=a._title;SimileAjax.Graphics.setOpacity(g,e);this._eventLayer.appendChild(g);
return{left:c,top:b,width:d,height:j,elmt:g}};Timeline.DetailedEventPainter.prototype._createHighlightDiv=function(a,b,c){if(a>=0){var d=this._timeline.getDocument(),c=c.event,a=c.highlightColors[Math.min(a,c.highlightColors.length-1)],d=d.createElement("div");d.style.position="absolute";d.style.overflow="hidden";d.style.left=b.left-2+"px";d.style.width=b.width+4+"px";d.style.top=b.top-2+"px";d.style.height=b.height+4+"px";d.style.background=a;this._highlightLayer.appendChild(d)}};
Timeline.DetailedEventPainter.prototype._onClickInstantEvent=function(a,b,c){var d=SimileAjax.DOM.getPageCoordinates(a);this._showBubble(d.left+Math.ceil(a.offsetWidth/2),d.top+Math.ceil(a.offsetHeight/2),c);this._fireOnSelect(c.getID());b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.DetailedEventPainter.prototype._onClickDurationEvent=function(a,b,c){if("pageX"in b)var a=b.pageX,d=b.pageY;else d=SimileAjax.DOM.getPageCoordinates(a),a=b.offsetX+d.left,d=b.offsetY+d.top;this._showBubble(a,d,c);this._fireOnSelect(c.getID());b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.DetailedEventPainter.prototype.showBubble=function(a){var b=this._eventIdToElmt[a.getID()];if(b){var c=SimileAjax.DOM.getPageCoordinates(b);this._showBubble(c.left+b.offsetWidth/2,c.top+b.offsetHeight/2,a)}};
Timeline.DetailedEventPainter.prototype._showBubble=function(a,b,c){var d=document.createElement("div"),f=this._params.theme.event.bubble;c.fillInfoBubble(d,this._params.theme,this._band.getLabeller());SimileAjax.WindowManager.cancelPopups();SimileAjax.Graphics.createBubbleForContentAndPoint(d,a,b,f.width,null,f.maxHeight)};Timeline.DetailedEventPainter.prototype._fireOnSelect=function(a){for(var b=0;b<this._onSelectListeners.length;b++)this._onSelectListeners[b](a)};
Timeline.GregorianEtherPainter=function(a){this._params=a;this._theme=a.theme;this._unit=a.unit;this._multiple="multiple"in a?a.multiple:1};
Timeline.GregorianEtherPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._backgroundLayer=a.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.className="timeline-ether-bg";this._lineLayer=this._markerLayer=null;var c="align"in this._params&&this._params.align!=void 0?this._params.align:this._theme.ether.interval.marker[b.isHorizontal()?"hAlign":"vAlign"];this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,
this._band,this._theme,c,"showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.GregorianEtherPainter.prototype.setHighlight=function(a,b){this._highlight.position(a,b)};
Timeline.GregorianEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer);this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";this._lineLayer&&this._band.removeLayerDiv(this._lineLayer);this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var a=this._band.getMinDate(),b=this._band.getMaxDate(),
c=this._band.getTimeZone(),d=this._band.getLabeller();SimileAjax.DateTime.roundDownToInterval(a,this._unit,c,this._multiple,this._theme.firstDayOfWeek);for(var f=this,c=function(a){for(var b=0;b<f._multiple;b++)SimileAjax.DateTime.incrementByInterval(a,f._unit)};a.getTime()<b.getTime();)this._intervalMarkerLayout.createIntervalMarker(a,d,this._unit,this._markerLayer,this._lineLayer),c(a);this._markerLayer.style.display="block";this._lineLayer.style.display="block"};
Timeline.GregorianEtherPainter.prototype.softPaint=function(){};Timeline.GregorianEtherPainter.prototype.zoom=function(a){a!=0&&(this._unit+=a)};
Timeline.HotZoneGregorianEtherPainter=function(a){this._params=a;this._theme=a.theme;this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,unit:a.unit,multiple:1}];for(var b=0;b<a.zones.length;b++)for(var c=a.zones[b],d=SimileAjax.DateTime.parseGregorianDateTime(c.start).getTime(),f=SimileAjax.DateTime.parseGregorianDateTime(c.end).getTime(),e=0;e<this._zones.length&&f>d;e++){var g=this._zones[e];if(d<g.endTime){if(d>g.startTime)this._zones.splice(e,0,{startTime:g.startTime,
endTime:d,unit:g.unit,multiple:g.multiple}),e++,g.startTime=d;f<g.endTime?(this._zones.splice(e,0,{startTime:d,endTime:f,unit:c.unit,multiple:c.multiple?c.multiple:1}),e++,d=g.startTime=f):(g.multiple=c.multiple,g.unit=c.unit,d=g.endTime)}}};
Timeline.HotZoneGregorianEtherPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._backgroundLayer=a.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.className="timeline-ether-bg";this._lineLayer=this._markerLayer=null;var c="align"in this._params&&this._params.align!=void 0?this._params.align:this._theme.ether.interval.marker[b.isHorizontal()?"hAlign":"vAlign"];this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,
this._band,this._theme,c,"showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.HotZoneGregorianEtherPainter.prototype.setHighlight=function(a,b){this._highlight.position(a,b)};
Timeline.HotZoneGregorianEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer);this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";this._lineLayer&&this._band.removeLayerDiv(this._lineLayer);this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";for(var a=this._band.getMinDate(),b=
this._band.getMaxDate(),c=this._band.getTimeZone(),d=this._band.getLabeller(),f=function(a,b){for(var c=0;c<b.multiple;c++)SimileAjax.DateTime.incrementByInterval(a,b.unit)},e=0;e<this._zones.length;){if(a.getTime()<this._zones[e].endTime)break;e++}for(var g=this._zones.length-1;g>=0;){if(b.getTime()>this._zones[g].startTime)break;g--}for(;e<=g;e++){var j=this._zones[e],h=new Date(Math.max(a.getTime(),j.startTime)),k=new Date(Math.min(b.getTime(),j.endTime));SimileAjax.DateTime.roundDownToInterval(h,
j.unit,c,j.multiple,this._theme.firstDayOfWeek);for(SimileAjax.DateTime.roundUpToInterval(k,j.unit,c,j.multiple,this._theme.firstDayOfWeek);h.getTime()<k.getTime();)this._intervalMarkerLayout.createIntervalMarker(h,d,j.unit,this._markerLayer,this._lineLayer),f(h,j)}this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.HotZoneGregorianEtherPainter.prototype.softPaint=function(){};
Timeline.HotZoneGregorianEtherPainter.prototype.zoom=function(a){if(a!=0)for(var b=0;b<this._zones.length;++b)this._zones[b]&&(this._zones[b].unit+=a)};Timeline.YearCountEtherPainter=function(a){this._params=a;this._theme=a.theme;this._startDate=SimileAjax.DateTime.parseGregorianDateTime(a.startDate);this._multiple="multiple"in a?a.multiple:1};
Timeline.YearCountEtherPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._backgroundLayer=a.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.className="timeline-ether-bg";this._lineLayer=this._markerLayer=null;var c="align"in this._params?this._params.align:this._theme.ether.interval.marker[b.isHorizontal()?"hAlign":"vAlign"];this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,
this._theme,c,"showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.YearCountEtherPainter.prototype.setHighlight=function(a,b){this._highlight.position(a,b)};
Timeline.YearCountEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer);this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";this._lineLayer&&this._band.removeLayerDiv(this._lineLayer);this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var a=new Date(this._startDate.getTime()),b=
this._band.getMaxDate(),c=this._band.getMinDate().getUTCFullYear()-this._startDate.getUTCFullYear();a.setUTCFullYear(this._band.getMinDate().getUTCFullYear()-c%this._multiple);for(var d=this,c=function(a){for(var b=0;b<d._multiple;b++)SimileAjax.DateTime.incrementByInterval(a,SimileAjax.DateTime.YEAR)},f={labelInterval:function(a){a=a.getUTCFullYear()-d._startDate.getUTCFullYear();return{text:a,emphasized:a==0}}};a.getTime()<b.getTime();)this._intervalMarkerLayout.createIntervalMarker(a,f,SimileAjax.DateTime.YEAR,
this._markerLayer,this._lineLayer),c(a);this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.YearCountEtherPainter.prototype.softPaint=function(){};Timeline.QuarterlyEtherPainter=function(a){this._params=a;this._theme=a.theme;this._startDate=SimileAjax.DateTime.parseGregorianDateTime(a.startDate)};
Timeline.QuarterlyEtherPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._backgroundLayer=a.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.className="timeline-ether-bg";this._lineLayer=this._markerLayer=null;var c="align"in this._params?this._params.align:this._theme.ether.interval.marker[b.isHorizontal()?"hAlign":"vAlign"];this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,
this._theme,c,"showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.QuarterlyEtherPainter.prototype.setHighlight=function(a,b){this._highlight.position(a,b)};
Timeline.QuarterlyEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer);this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";this._lineLayer&&this._band.removeLayerDiv(this._lineLayer);this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var a=new Date(0),b=this._band.getMaxDate();
a.setUTCFullYear(Math.max(this._startDate.getUTCFullYear(),this._band.getMinDate().getUTCFullYear()));a.setUTCMonth(this._startDate.getUTCMonth());for(var c=this,d={labelInterval:function(a){var b=(4+(a.getUTCMonth()-c._startDate.getUTCMonth())/3)%4;return b!=0?{text:"Q"+(b+1),emphasized:!1}:{text:"Y"+(a.getUTCFullYear()-c._startDate.getUTCFullYear()+1),emphasized:!0}}};a.getTime()<b.getTime();)this._intervalMarkerLayout.createIntervalMarker(a,d,SimileAjax.DateTime.YEAR,this._markerLayer,this._lineLayer),
a.setUTCMonth(a.getUTCMonth()+3);this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.QuarterlyEtherPainter.prototype.softPaint=function(){};
Timeline.EtherIntervalMarkerLayout=function(a,b,c,d,f){var e=a.isHorizontal();this.positionDiv=e?d=="Top"?function(a,b){a.style.left=b+"px";a.style.top="0px"}:function(a,b){a.style.left=b+"px";a.style.bottom="0px"}:d=="Left"?function(a,b){a.style.top=b+"px";a.style.left="0px"}:function(a,b){a.style.top=b+"px";a.style.right="0px"};var g=c.ether.interval.line,j=c.ether.interval.weekend,h=SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.DAY];this.createIntervalMarker=function(d,l,m,p,r){var q=
Math.round(b.dateToPixelOffset(d));if(f&&m!=SimileAjax.DateTime.WEEK){var o=a.getDocument().createElement("div");o.className="timeline-ether-lines";g.opacity<100&&SimileAjax.Graphics.setOpacity(o,g.opacity);e?o.style.left=q+"px":o.style.top=q+"px";r.appendChild(o)}if(m==SimileAjax.DateTime.WEEK){var o=c.firstDayOfWeek,o=new Date(d.getTime()+(6-o-7)*h),v=new Date(o.getTime()+2*h),o=Math.round(b.dateToPixelOffset(o)),v=Math.round(b.dateToPixelOffset(v)),v=Math.max(1,v-o),s=a.getDocument().createElement("div");
s.className="timeline-ether-weekends";j.opacity<100&&SimileAjax.Graphics.setOpacity(s,j.opacity);e?(s.style.left=o+"px",s.style.width=v+"px"):(s.style.top=o+"px",s.style.height=v+"px");r.appendChild(s)}d=l.labelInterval(d,m);l=a.getDocument().createElement("div");l.innerHTML=d.text;l.className="timeline-date-label";d.emphasized&&(l.className+=" timeline-date-label-em");this.positionDiv(l,q);p.appendChild(l);return l}};
Timeline.EtherHighlight=function(a,b,c,d){var f=a.isHorizontal();this._highlightDiv=null;this._createHighlightDiv=function(){if(this._highlightDiv==null){this._highlightDiv=a.getDocument().createElement("div");this._highlightDiv.setAttribute("name","ether-highlight");this._highlightDiv.className="timeline-ether-highlight";var b=c.ether.highlightOpacity;b<100&&SimileAjax.Graphics.setOpacity(this._highlightDiv,b);d.appendChild(this._highlightDiv)}};this.position=function(a,c){this._createHighlightDiv();
var d=Math.round(b.dateToPixelOffset(a)),h=Math.round(b.dateToPixelOffset(c)),h=Math.max(h-d,3);f?(this._highlightDiv.style.left=d+"px",this._highlightDiv.style.width=h+"px",this._highlightDiv.style.height=b.getViewWidth()-4+"px"):(this._highlightDiv.style.top=d+"px",this._highlightDiv.style.height=h+"px",this._highlightDiv.style.width=b.getViewWidth()-4+"px")}};Timeline.LinearEther=function(a){this._params=a;this._interval=a.interval;this._pixelsPerInterval=a.pixelsPerInterval};
Timeline.LinearEther.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._unit=b.getUnit();"startsOn"in this._params?this._start=this._unit.parseFromObject(this._params.startsOn):"endsOn"in this._params?(this._start=this._unit.parseFromObject(this._params.endsOn),this.shiftPixels(-this._timeline.getPixelLength())):(this._start="centersOn"in this._params?this._unit.parseFromObject(this._params.centersOn):this._unit.makeDefaultValue(),this.shiftPixels(-this._timeline.getPixelLength()/
2))};Timeline.LinearEther.prototype.setDate=function(a){this._start=this._unit.cloneValue(a)};Timeline.LinearEther.prototype.shiftPixels=function(a){this._start=this._unit.change(this._start,this._interval*a/this._pixelsPerInterval)};Timeline.LinearEther.prototype.dateToPixelOffset=function(a){return this._pixelsPerInterval*this._unit.compare(a,this._start)/this._interval};Timeline.LinearEther.prototype.pixelOffsetToDate=function(a){return this._unit.change(this._start,a*this._interval/this._pixelsPerInterval)};
Timeline.LinearEther.prototype.zoom=function(a){var b=0,c=b=this._band._zoomIndex;a&&b>0&&(c=b-1);!a&&b<this._band._zoomSteps.length-1&&(c=b+1);this._band._zoomIndex=c;this._interval=SimileAjax.DateTime.gregorianUnitLengths[this._band._zoomSteps[c].unit];this._pixelsPerInterval=this._band._zoomSteps[c].pixelsPerInterval;return b=this._band._zoomSteps[c].unit-this._band._zoomSteps[b].unit};
Timeline.HotZoneEther=function(a){this._params=a;this._interval=a.interval;this._pixelsPerInterval=a.pixelsPerInterval;this._theme=a.theme};
Timeline.HotZoneEther.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._unit=b.getUnit();this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,magnify:1}];for(var c=this._params,d=0;d<c.zones.length;d++)for(var f=c.zones[d],e=this._unit.parseFromObject(f.start),g=this._unit.parseFromObject(f.end),j=0;j<this._zones.length&&this._unit.compare(g,e)>0;j++){var h=this._zones[j];if(this._unit.compare(e,h.endTime)<0){if(this._unit.compare(e,h.startTime)>0)this._zones.splice(j,
0,{startTime:h.startTime,endTime:e,magnify:h.magnify}),j++,h.startTime=e;this._unit.compare(g,h.endTime)<0?(this._zones.splice(j,0,{startTime:e,endTime:g,magnify:f.magnify*h.magnify}),j++,e=h.startTime=g):(h.magnify*=f.magnify,e=h.endTime)}}"startsOn"in this._params?this._start=this._unit.parseFromObject(this._params.startsOn):"endsOn"in this._params?(this._start=this._unit.parseFromObject(this._params.endsOn),this.shiftPixels(-this._timeline.getPixelLength())):(this._start="centersOn"in this._params?
this._unit.parseFromObject(this._params.centersOn):this._unit.makeDefaultValue(),this.shiftPixels(-this._timeline.getPixelLength()/2))};Timeline.HotZoneEther.prototype.setDate=function(a){this._start=this._unit.cloneValue(a)};Timeline.HotZoneEther.prototype.shiftPixels=function(a){this._start=this.pixelOffsetToDate(a)};Timeline.HotZoneEther.prototype.dateToPixelOffset=function(a){return this._dateDiffToPixelOffset(this._start,a)};
Timeline.HotZoneEther.prototype.pixelOffsetToDate=function(a){return this._pixelOffsetToDate(a,this._start)};Timeline.HotZoneEther.prototype.zoom=function(a){var b=0,c=b=this._band._zoomIndex;a&&b>0&&(c=b-1);!a&&b<this._band._zoomSteps.length-1&&(c=b+1);this._band._zoomIndex=c;this._interval=SimileAjax.DateTime.gregorianUnitLengths[this._band._zoomSteps[c].unit];this._pixelsPerInterval=this._band._zoomSteps[c].pixelsPerInterval;return b=this._band._zoomSteps[c].unit-this._band._zoomSteps[b].unit};
Timeline.HotZoneEther.prototype._dateDiffToPixelOffset=function(a,b){var c=this._getScale(),d=a,f=0;if(this._unit.compare(d,b)<0){for(var e=0;e<this._zones.length;){if(this._unit.compare(d,this._zones[e].endTime)<0)break;e++}for(;this._unit.compare(d,b)<0;){var g=this._zones[e],j=this._unit.earlier(b,g.endTime);f+=this._unit.compare(j,d)/(c/g.magnify);d=j;e++}}else{for(e=this._zones.length-1;e>=0;){if(this._unit.compare(d,this._zones[e].startTime)>0)break;e--}for(;this._unit.compare(d,b)>0;)g=this._zones[e],
j=this._unit.later(b,g.startTime),f+=this._unit.compare(j,d)/(c/g.magnify),d=j,e--}return f};
Timeline.HotZoneEther.prototype._pixelOffsetToDate=function(a,b){var c=this._getScale(),d=b;if(a>0){for(var f=0;f<this._zones.length;){if(this._unit.compare(d,this._zones[f].endTime)<0)break;f++}for(;a>0;){var e=this._zones[f],g=c/e.magnify;if(e.endTime==Number.POSITIVE_INFINITY)d=this._unit.change(d,a*g),a=0;else{var j=this._unit.compare(e.endTime,d)/g;j>a?(d=this._unit.change(d,a*g),a=0):(d=e.endTime,a-=j)}f++}}else{for(f=this._zones.length-1;f>=0;){if(this._unit.compare(d,this._zones[f].startTime)>
0)break;f--}for(a=-a;a>0;)e=this._zones[f],g=c/e.magnify,e.startTime==Number.NEGATIVE_INFINITY?(d=this._unit.change(d,-a*g),a=0):(j=this._unit.compare(d,e.startTime)/g,j>a?(d=this._unit.change(d,-a*g),a=0):(d=e.startTime,a-=j)),f--}return d};Timeline.HotZoneEther.prototype._getScale=function(){return this._interval/this._pixelsPerInterval};Timeline.EventUtils={};Timeline.EventUtils.getNewEventID=function(){if(this._lastEventID==null)this._lastEventID=0;this._lastEventID+=1;return"e"+this._lastEventID};
Timeline.EventUtils.decodeEventElID=function(a){var b=a.split("-");if(b[1]!="tl")return alert("Internal Timeline problem 101, please consult support"),{band:null,evt:null};a=Timeline.getTimelineFromID(b[2]).getBand(b[3]);b=a.getEventSource.getEvent(b[4]);return{band:a,evt:b}};Timeline.EventUtils.encodeEventElID=function(a,b,c,d){return c+"-tl-"+a.timelineID+"-"+b.getIndex()+"-"+d.getID()};Timeline.GregorianDateLabeller=function(a,b){this._locale=a;this._timeZone=b};
Timeline.GregorianDateLabeller.monthNames=[];Timeline.GregorianDateLabeller.dayNames=[];Timeline.GregorianDateLabeller.labelIntervalFunctions=[];Timeline.GregorianDateLabeller.getMonthName=function(a,b){return Timeline.GregorianDateLabeller.monthNames[b][a]};Timeline.GregorianDateLabeller.prototype.labelInterval=function(a,b){var c=Timeline.GregorianDateLabeller.labelIntervalFunctions[this._locale];if(c==null)c=Timeline.GregorianDateLabeller.prototype.defaultLabelInterval;return c.call(this,a,b)};
Timeline.GregorianDateLabeller.prototype.labelPrecise=function(a){return SimileAjax.DateTime.removeTimeZoneOffset(a,this._timeZone).toUTCString()};
Timeline.GregorianDateLabeller.prototype.defaultLabelInterval=function(a,b){var c,d=!1,a=SimileAjax.DateTime.removeTimeZoneOffset(a,this._timeZone);switch(b){case SimileAjax.DateTime.MILLISECOND:c=a.getUTCMilliseconds();break;case SimileAjax.DateTime.SECOND:c=a.getUTCSeconds();break;case SimileAjax.DateTime.MINUTE:c=a.getUTCMinutes();c==0&&(c=a.getUTCHours()+":00",d=!0);break;case SimileAjax.DateTime.HOUR:c=a.getUTCHours()+"hr";break;case SimileAjax.DateTime.DAY:c=Timeline.GregorianDateLabeller.getMonthName(a.getUTCMonth(),
this._locale)+" "+a.getUTCDate();break;case SimileAjax.DateTime.WEEK:c=Timeline.GregorianDateLabeller.getMonthName(a.getUTCMonth(),this._locale)+" "+a.getUTCDate();break;case SimileAjax.DateTime.MONTH:if(c=a.getUTCMonth(),c!=0){c=Timeline.GregorianDateLabeller.getMonthName(c,this._locale);break}case SimileAjax.DateTime.YEAR:case SimileAjax.DateTime.DECADE:case SimileAjax.DateTime.CENTURY:case SimileAjax.DateTime.MILLENNIUM:d=a.getUTCFullYear();c=d>0?a.getUTCFullYear():1-d+"BC";d=b==SimileAjax.DateTime.MONTH||
b==SimileAjax.DateTime.DECADE&&d%100==0||b==SimileAjax.DateTime.CENTURY&&d%1E3==0;break;default:c=a.toUTCString()}return{text:c,emphasized:d}};Timeline.OriginalEventPainter=function(a){this._params=a;this._onSelectListeners=[];this._eventPaintListeners=[];this._frc=this._highlightMatcher=this._filterMatcher=null;this._eventIdToElmt={}};
Timeline.OriginalEventPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._eventIdToElmt=this._highlightLayer=this._lineLayer=this._eventLayer=this._backLayer=null};Timeline.OriginalEventPainter.prototype.getType=function(){return"original"};Timeline.OriginalEventPainter.prototype.addOnSelectListener=function(a){this._onSelectListeners.push(a)};
Timeline.OriginalEventPainter.prototype.removeOnSelectListener=function(a){for(var b=0;b<this._onSelectListeners.length;b++)if(this._onSelectListeners[b]==a){this._onSelectListeners.splice(b,1);break}};Timeline.OriginalEventPainter.prototype.addEventPaintListener=function(a){this._eventPaintListeners.push(a)};
Timeline.OriginalEventPainter.prototype.removeEventPaintListener=function(a){for(var b=0;b<this._eventPaintListeners.length;b++)if(this._eventPaintListeners[b]==a){this._eventPaintListeners.splice(b,1);break}};Timeline.OriginalEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher};Timeline.OriginalEventPainter.prototype.setFilterMatcher=function(a){this._filterMatcher=a};Timeline.OriginalEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher};
Timeline.OriginalEventPainter.prototype.setHighlightMatcher=function(a){this._highlightMatcher=a};
Timeline.OriginalEventPainter.prototype.paint=function(){var a=this._band.getEventSource();if(a!=null){this._eventIdToElmt={};this._fireEventPaintListeners("paintStarting",null,null);this._prepareForPainting();for(var b=this._params.theme.event,c=Math.max(b.track.height,b.tape.height+this._frc.getLineHeight()),b={trackOffset:b.track.offset,trackHeight:c,trackGap:b.track.gap,trackIncrement:c+b.track.gap,icon:b.instant.icon,iconWidth:b.instant.iconWidth,iconHeight:b.instant.iconHeight,labelWidth:b.label.width,
maxLabelChar:b.label.maxLabelChar,impreciseIconMargin:b.instant.impreciseIconMargin},d=this._band.getMinDate(),f=this._band.getMaxDate(),c=this._filterMatcher!=null?this._filterMatcher:function(){return!0},e=this._highlightMatcher!=null?this._highlightMatcher:function(){return-1},a=a.getEventReverseIterator(d,f);a.hasNext();)d=a.next(),c(d)&&this.paintEvent(d,b,this._params.theme,e(d));this._highlightLayer.style.display="block";this._lineLayer.style.display="block";this._eventLayer.style.display=
"block";this._band.updateEventTrackInfo(this._tracks.length,b.trackIncrement);this._fireEventPaintListeners("paintEnded",null,null)}};Timeline.OriginalEventPainter.prototype.softPaint=function(){};
Timeline.OriginalEventPainter.prototype._prepareForPainting=function(){var a=this._band;if(this._backLayer==null){this._backLayer=this._band.createLayerDiv(0,"timeline-band-events");this._backLayer.style.visibility="hidden";var b=document.createElement("span");b.className="timeline-event-label";this._backLayer.appendChild(b);this._frc=SimileAjax.Graphics.getFontRenderingContext(b)}this._frc.update();this._tracks=[];this._highlightLayer!=null&&a.removeLayerDiv(this._highlightLayer);this._highlightLayer=
a.createLayerDiv(105,"timeline-band-highlights");this._highlightLayer.style.display="none";this._lineLayer!=null&&a.removeLayerDiv(this._lineLayer);this._lineLayer=a.createLayerDiv(110,"timeline-band-lines");this._lineLayer.style.display="none";this._eventLayer!=null&&a.removeLayerDiv(this._eventLayer);this._eventLayer=a.createLayerDiv(115,"timeline-band-events");this._eventLayer.style.display="none"};
Timeline.OriginalEventPainter.prototype.paintEvent=function(a,b,c,d){a.isInstant()?this.paintInstantEvent(a,b,c,d):this.paintDurationEvent(a,b,c,d)};Timeline.OriginalEventPainter.prototype.paintInstantEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseInstantEvent(a,b,c,d):this.paintPreciseInstantEvent(a,b,c,d)};Timeline.OriginalEventPainter.prototype.paintDurationEvent=function(a,b,c,d){a.isImprecise()?this.paintImpreciseDurationEvent(a,b,c,d):this.paintPreciseDurationEvent(a,b,c,d)};
Timeline.OriginalEventPainter.prototype.paintPreciseInstantEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),e=Math.round(this._band.dateToPixelOffset(e)),g=Math.round(e+b.iconWidth/2),e=Math.round(e-b.iconWidth/2),j=this._getLabelDivClassName(a),h=this._frc.computeSize(f,j),k=g+c.event.label.offsetFromLine,g=this._findFreeTrack(a,k+h.width),l=Math.round(b.trackOffset+g*b.trackIncrement+b.trackHeight/2-h.height/2),m=this._paintEventIcon(a,g,e,b,c,0),f=this._paintEventLabel(a,
f,k,l,h.width,h.height,c,j,d),b=[m.elmt,f.elmt],p=this,j=function(b,c){return p._onClickInstantEvent(m.elmt,c,a)};SimileAjax.DOM.registerEvent(m.elmt,"mousedown",j);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",j);c=this._createHighlightDiv(d,m,c,a);c!=null&&b.push(c);this._fireEventPaintListeners("paintedEvent",a,b);this._eventIdToElmt[a.getID()]=m.elmt;this._tracks[g]=e};
Timeline.OriginalEventPainter.prototype.paintImpreciseInstantEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getEnd(),j=Math.round(this._band.dateToPixelOffset(e)),h=Math.round(this._band.dateToPixelOffset(g)),e=Math.round(j+b.iconWidth/2),g=Math.round(j-b.iconWidth/2),k=this._getLabelDivClassName(a),l=this._frc.computeSize(f,k),m=e+c.event.label.offsetFromLine,e=Math.max(m+l.width,h),e=this._findFreeTrack(a,e),p=c.event.tape.height,r=Math.round(b.trackOffset+
e*b.trackIncrement+p),q=this._paintEventIcon(a,e,g,b,c,p),f=this._paintEventLabel(a,f,m,r,l.width,l.height,c,k,d),k=a.getColor(),k=k!=null?k:c.event.instant.impreciseColor,j=this._paintEventTape(a,e,j,h,k,c.event.instant.impreciseOpacity,b,c,0),b=[q.elmt,f.elmt,j.elmt],o=this,h=function(b,c){return o._onClickInstantEvent(q.elmt,c,a)};SimileAjax.DOM.registerEvent(q.elmt,"mousedown",h);SimileAjax.DOM.registerEvent(j.elmt,"mousedown",h);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",h);c=this._createHighlightDiv(d,
q,c,a);c!=null&&b.push(c);this._fireEventPaintListeners("paintedEvent",a,b);this._eventIdToElmt[a.getID()]=q.elmt;this._tracks[e]=g};
Timeline.OriginalEventPainter.prototype.paintPreciseDurationEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getEnd(),e=Math.round(this._band.dateToPixelOffset(e)),j=Math.round(this._band.dateToPixelOffset(g)),h=this._getLabelDivClassName(a),k=this._frc.computeSize(f,h),g=Math.max(e+k.width,j),g=this._findFreeTrack(a,g),l=Math.round(b.trackOffset+g*b.trackIncrement+c.event.tape.height),m=a.getColor(),m=m!=null?m:c.event.duration.color,p=this._paintEventTape(a,
g,e,j,m,100,b,c,0),f=this._paintEventLabel(a,f,e,l,k.width,k.height,c,h,d),b=[p.elmt,f.elmt],r=this,j=function(b,c){return r._onClickDurationEvent(p.elmt,c,a)};SimileAjax.DOM.registerEvent(p.elmt,"mousedown",j);SimileAjax.DOM.registerEvent(f.elmt,"mousedown",j);c=this._createHighlightDiv(d,p,c,a);c!=null&&b.push(c);this._fireEventPaintListeners("paintedEvent",a,b);this._eventIdToElmt[a.getID()]=p.elmt;this._tracks[g]=e};
Timeline.OriginalEventPainter.prototype.paintImpreciseDurationEvent=function(a,b,c,d){this._timeline.getDocument();var f=a.getText(),e=a.getStart(),g=a.getLatestStart(),j=a.getEnd(),h=a.getEarliestEnd(),e=Math.round(this._band.dateToPixelOffset(e)),g=Math.round(this._band.dateToPixelOffset(g)),j=Math.round(this._band.dateToPixelOffset(j)),k=Math.round(this._band.dateToPixelOffset(h)),l=this._getLabelDivClassName(a),m=this._frc.computeSize(f,l),h=Math.max(g+m.width,j),h=this._findFreeTrack(a,h),p=
Math.round(b.trackOffset+h*b.trackIncrement+c.event.tape.height),r=a.getColor(),r=r!=null?r:c.event.duration.color,j=this._paintEventTape(a,h,e,j,c.event.duration.impreciseColor,c.event.duration.impreciseOpacity,b,c,0),q=this._paintEventTape(a,h,g,k,r,100,b,c,1),b=this._paintEventLabel(a,f,g,p,m.width,m.height,c,l,d),f=[j.elmt,q.elmt,b.elmt],o=this,g=function(b,c){return o._onClickDurationEvent(q.elmt,c,a)};SimileAjax.DOM.registerEvent(q.elmt,"mousedown",g);SimileAjax.DOM.registerEvent(b.elmt,"mousedown",
g);c=this._createHighlightDiv(d,q,c,a);c!=null&&f.push(c);this._fireEventPaintListeners("paintedEvent",a,f);this._eventIdToElmt[a.getID()]=q.elmt;this._tracks[h]=e};Timeline.OriginalEventPainter.prototype._encodeEventElID=function(a,b){return Timeline.EventUtils.encodeEventElID(this._timeline,this._band,a,b)};Timeline.OriginalEventPainter.prototype._findFreeTrack=function(a,b){var c=a.getTrackNum();if(c!=null)return c;for(c=0;c<this._tracks.length;c++)if(this._tracks[c]>b)break;return c};
Timeline.OriginalEventPainter.prototype._paintEventIcon=function(a,b,c,d,f,e){f=a.getIcon();f=f!=null?f:d.icon;b=e>0?d.trackOffset+b*d.trackIncrement+e+d.impreciseIconMargin:Math.round(d.trackOffset+b*d.trackIncrement+d.trackHeight/2-d.iconHeight/2);e=SimileAjax.Graphics.createTranslucentImage(f);f=this._timeline.getDocument().createElement("div");f.className=this._getElClassName("timeline-event-icon",a,"icon");f.id=this._encodeEventElID("icon",a);f.style.left=c+"px";f.style.top=b+"px";f.appendChild(e);
if(a._title!=null)f.title=a._title;this._eventLayer.appendChild(f);return{left:c,top:b,width:d.iconWidth,height:d.iconHeight,elmt:f}};
Timeline.OriginalEventPainter.prototype._paintEventLabel=function(a,b,c,d,f,e,g,j,h){var k=this._timeline.getDocument().createElement("div");k.className=j;k.id=this._encodeEventElID("label",a);k.style.left=c+"px";k.style.width=f+"px";k.style.top=d+"px";k.innerHTML=b;if(a._title!=null)k.title=a._title;b=a.getTextColor();b==null&&(b=a.getColor());if(b!=null)k.style.color=b;if(g.event.highlightLabelBackground&&h>=0)k.style.background=this._getHighlightColor(h,g);this._eventLayer.appendChild(k);return{left:c,
top:d,width:f,height:e,elmt:k}};
Timeline.OriginalEventPainter.prototype._paintEventTape=function(a,b,c,d,f,e,g,j,h){d-=c;j=j.event.tape.height;b=g.trackOffset+b*g.trackIncrement;g=this._timeline.getDocument().createElement("div");g.className=this._getElClassName("timeline-event-tape",a,"tape");g.id=this._encodeEventElID("tape"+h,a);g.style.left=c+"px";g.style.width=d+"px";g.style.height=j+"px";g.style.top=b+"px";if(a._title!=null)g.title=a._title;if(f!=null)g.style.backgroundColor=f;f=a.getTapeImage();a=a.getTapeRepeat();a=a!=null?
a:"repeat";if(f!=null)g.style.backgroundImage="url("+f+")",g.style.backgroundRepeat=a;SimileAjax.Graphics.setOpacity(g,e);this._eventLayer.appendChild(g);return{left:c,top:b,width:d,height:j,elmt:g}};Timeline.OriginalEventPainter.prototype._getLabelDivClassName=function(a){return this._getElClassName("timeline-event-label",a,"label")};Timeline.OriginalEventPainter.prototype._getElClassName=function(a,b,c){var b=b.getClassName(),d=[];b&&(c&&d.push(c+"-"+b+" "),d.push(b+" "));d.push(a);return d.join("")};
Timeline.OriginalEventPainter.prototype._getHighlightColor=function(a,b){var c=b.event.highlightColors;return c[Math.min(a,c.length-1)]};
Timeline.OriginalEventPainter.prototype._createHighlightDiv=function(a,b,c,d){var f=null;if(a>=0)f=this._timeline.getDocument(),a=this._getHighlightColor(a,c),f=f.createElement("div"),f.className=this._getElClassName("timeline-event-highlight",d,"highlight"),f.id=this._encodeEventElID("highlight0",d),f.style.position="absolute",f.style.overflow="hidden",f.style.left=b.left-2+"px",f.style.width=b.width+4+"px",f.style.top=b.top-2+"px",f.style.height=b.height+4+"px",f.style.background=a,this._highlightLayer.appendChild(f);
return f};Timeline.OriginalEventPainter.prototype._onClickInstantEvent=function(a,b,c){var d=SimileAjax.DOM.getPageCoordinates(a);this._showBubble(d.left+Math.ceil(a.offsetWidth/2),d.top+Math.ceil(a.offsetHeight/2),c);this._fireOnSelect(c.getID());b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.OriginalEventPainter.prototype._onClickDurationEvent=function(a,b,c){if("pageX"in b)var a=b.pageX,d=b.pageY;else d=SimileAjax.DOM.getPageCoordinates(a),a=b.offsetX+d.left,d=b.offsetY+d.top;this._showBubble(a,d,c);this._fireOnSelect(c.getID());b.cancelBubble=!0;SimileAjax.DOM.cancelEvent(b);return!1};
Timeline.OriginalEventPainter.prototype.showBubble=function(a){var b=this._eventIdToElmt[a.getID()];if(b){var c=SimileAjax.DOM.getPageCoordinates(b);this._showBubble(c.left+b.offsetWidth/2,c.top+b.offsetHeight/2,a)}};
Timeline.OriginalEventPainter.prototype._showBubble=function(a,b,c){var d=document.createElement("div"),f=this._params.theme.event.bubble;c.fillInfoBubble(d,this._params.theme,this._band.getLabeller());SimileAjax.WindowManager.cancelPopups();SimileAjax.Graphics.createBubbleForContentAndPoint(d,a,b,f.width,null,f.maxHeight)};Timeline.OriginalEventPainter.prototype._fireOnSelect=function(a){for(var b=0;b<this._onSelectListeners.length;b++)this._onSelectListeners[b](a)};
Timeline.OriginalEventPainter.prototype._fireEventPaintListeners=function(a,b,c){for(var d=0;d<this._eventPaintListeners.length;d++)this._eventPaintListeners[d](this._band,a,b,c)};Timeline.OverviewEventPainter=function(a){this._params=a;this._onSelectListeners=[];this._highlightMatcher=this._filterMatcher=null};Timeline.OverviewEventPainter.prototype.initialize=function(a,b){this._band=a;this._timeline=b;this._highlightLayer=this._eventLayer=null};Timeline.OverviewEventPainter.prototype.getType=function(){return"overview"};
Timeline.OverviewEventPainter.prototype.addOnSelectListener=function(a){this._onSelectListeners.push(a)};Timeline.OverviewEventPainter.prototype.removeOnSelectListener=function(a){for(var b=0;b<this._onSelectListeners.length;b++)if(this._onSelectListeners[b]==a){this._onSelectListeners.splice(b,1);break}};Timeline.OverviewEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher};Timeline.OverviewEventPainter.prototype.setFilterMatcher=function(a){this._filterMatcher=a};
Timeline.OverviewEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher};Timeline.OverviewEventPainter.prototype.setHighlightMatcher=function(a){this._highlightMatcher=a};
Timeline.OverviewEventPainter.prototype.paint=function(){var a=this._band.getEventSource();if(a!=null){this._prepareForPainting();for(var b=this._params.theme.event,b={trackOffset:b.overviewTrack.offset,trackHeight:b.overviewTrack.height,trackGap:b.overviewTrack.gap,trackIncrement:b.overviewTrack.height+b.overviewTrack.gap},c=this._band.getMinDate(),d=this._band.getMaxDate(),f=this._filterMatcher!=null?this._filterMatcher:function(){return!0},e=this._highlightMatcher!=null?this._highlightMatcher:
function(){return-1},a=a.getEventReverseIterator(c,d);a.hasNext();)c=a.next(),f(c)&&this.paintEvent(c,b,this._params.theme,e(c));this._highlightLayer.style.display="block";this._eventLayer.style.display="block";this._band.updateEventTrackInfo(this._tracks.length,b.trackIncrement)}};Timeline.OverviewEventPainter.prototype.softPaint=function(){};
Timeline.OverviewEventPainter.prototype._prepareForPainting=function(){var a=this._band;this._tracks=[];this._highlightLayer!=null&&a.removeLayerDiv(this._highlightLayer);this._highlightLayer=a.createLayerDiv(105,"timeline-band-highlights");this._highlightLayer.style.display="none";this._eventLayer!=null&&a.removeLayerDiv(this._eventLayer);this._eventLayer=a.createLayerDiv(110,"timeline-band-events");this._eventLayer.style.display="none"};
Timeline.OverviewEventPainter.prototype.paintEvent=function(a,b,c,d){a.isInstant()?this.paintInstantEvent(a,b,c,d):this.paintDurationEvent(a,b,c,d)};Timeline.OverviewEventPainter.prototype.paintInstantEvent=function(a,b,c,d){var f=a.getStart(),f=Math.round(this._band.dateToPixelOffset(f)),e=a.getColor(),e=a.getClassName()?null:e!=null?e:c.event.duration.color,a=this._paintEventTick(a,f,e,100,b,c);this._createHighlightDiv(d,a,c)};
Timeline.OverviewEventPainter.prototype.paintDurationEvent=function(a,b,c,d){for(var f=a.getLatestStart(),e=a.getEarliestEnd(),f=Math.round(this._band.dateToPixelOffset(f)),e=Math.round(this._band.dateToPixelOffset(e)),g=0;g<this._tracks.length;g++)if(e<this._tracks[g])break;this._tracks[g]=e;var j=a.getColor(),h=a.getClassName(),j=h?null:j!=null?j:c.event.duration.color,a=this._paintEventTape(a,g,f,e,j,100,b,c,h);this._createHighlightDiv(d,a,c)};
Timeline.OverviewEventPainter.prototype._paintEventTape=function(a,b,c,d,f,e,g,j,h){a=g.trackOffset+b*g.trackIncrement;d-=c;g=g.trackHeight;b=this._timeline.getDocument().createElement("div");b.className="timeline-small-event-tape";h&&(b.className+=" small-"+h);b.style.left=c+"px";b.style.width=d+"px";b.style.top=a+"px";b.style.height=g+"px";if(f)b.style.backgroundColor=f;e<100&&SimileAjax.Graphics.setOpacity(b,e);this._eventLayer.appendChild(b);return{left:c,top:a,width:d,height:g,elmt:b}};
Timeline.OverviewEventPainter.prototype._paintEventTick=function(a,b,c,d,f,e){c=e.event.overviewTrack.tickHeight;f=f.trackOffset-c;e=this._timeline.getDocument().createElement("div");e.className="timeline-small-event-icon";e.style.left=b+"px";e.style.top=f+"px";(a=a.getClassName())&&(e.className+=" small-"+a);d<100&&SimileAjax.Graphics.setOpacity(e,d);this._eventLayer.appendChild(e);return{left:b,top:f,width:1,height:c,elmt:e}};
Timeline.OverviewEventPainter.prototype._createHighlightDiv=function(a,b,c){if(a>=0){var d=this._timeline.getDocument(),c=c.event,a=c.highlightColors[Math.min(a,c.highlightColors.length-1)],d=d.createElement("div");d.style.position="absolute";d.style.overflow="hidden";d.style.left=b.left-1+"px";d.style.width=b.width+2+"px";d.style.top=b.top-1+"px";d.style.height=b.height+2+"px";d.style.background=a;this._highlightLayer.appendChild(d)}};Timeline.OverviewEventPainter.prototype.showBubble=function(){};
Timeline.DefaultEventSource=function(a){this._events=a instanceof Object?a:new SimileAjax.EventIndex;this._listeners=[]};Timeline.DefaultEventSource.prototype.addListener=function(a){this._listeners.push(a)};Timeline.DefaultEventSource.prototype.removeListener=function(a){for(var b=0;b<this._listeners.length;b++)if(this._listeners[b]==a){this._listeners.splice(b,1);break}};
Timeline.DefaultEventSource.prototype.loadXML=function(a,b){for(var c=this._getBaseURL(b),d=a.documentElement.getAttribute("wiki-url"),f=a.documentElement.getAttribute("wiki-section"),e=a.documentElement.getAttribute("date-time-format"),e=this._events.getUnit().getParser(e),g=a.documentElement.firstChild,j=!1;g!=null;){if(g.nodeType==1){j="";if(g.firstChild!=null&&g.firstChild.nodeType==3)j=g.firstChild.nodeValue;var h=g.getAttribute("isDuration")===null&&g.getAttribute("durationEvent")===null||g.getAttribute("isDuration")==
"false"||g.getAttribute("durationEvent")=="false",j=new Timeline.DefaultEventSource.Event({id:g.getAttribute("id"),start:e(g.getAttribute("start")),end:e(g.getAttribute("end")),latestStart:e(g.getAttribute("latestStart")),earliestEnd:e(g.getAttribute("earliestEnd")),instant:h,text:g.getAttribute("title"),description:j,image:this._resolveRelativeURL(g.getAttribute("image"),c),link:this._resolveRelativeURL(g.getAttribute("link"),c),icon:this._resolveRelativeURL(g.getAttribute("icon"),c),color:g.getAttribute("color"),
textColor:g.getAttribute("textColor"),hoverText:g.getAttribute("hoverText"),classname:g.getAttribute("classname"),tapeImage:g.getAttribute("tapeImage"),tapeRepeat:g.getAttribute("tapeRepeat"),caption:g.getAttribute("caption"),eventID:g.getAttribute("eventID"),trackNum:g.getAttribute("trackNum")});j._node=g;j.getProperty=function(a){return this._node.getAttribute(a)};j.setWikiInfo(d,f);this._events.add(j);j=!0}g=g.nextSibling}j&&this._fire("onAddMany",[])};
Timeline.DefaultEventSource.prototype.loadJSON=function(a,b){var c=this._getBaseURL(b),d=!1;if(a&&a.events){var f="wikiURL"in a?a.wikiURL:null,e="wikiSection"in a?a.wikiSection:null,g="dateTimeFormat"in a?a.dateTimeFormat:null,g=this._events.getUnit().getParser(g),j=0;for(;j<a.events.length;j++){var d=a.events[j],h=d.isDuration||d.durationEvent!=null&&!d.durationEvent,h=new Timeline.DefaultEventSource.Event({id:"id"in d?d.id:void 0,start:g(d.start),end:g(d.end),latestStart:g(d.latestStart),earliestEnd:g(d.earliestEnd),
instant:h,text:d.title,description:d.description,image:this._resolveRelativeURL(d.image,c),link:this._resolveRelativeURL(d.link,c),icon:this._resolveRelativeURL(d.icon,c),color:d.color,textColor:d.textColor,hoverText:d.hoverText,classname:d.classname,tapeImage:d.tapeImage,tapeRepeat:d.tapeRepeat,caption:d.caption,eventID:d.eventID,trackNum:d.trackNum});h._obj=d;h.getProperty=function(a){return this._obj[a]};h.setWikiInfo(f,e);this._events.add(h);d=!0}}d&&this._fire("onAddMany",[])};
Timeline.DefaultEventSource.prototype.loadSPARQL=function(a,b){var c=this._getBaseURL(b),d=this._events.getUnit().getParser("iso8601");if(a!=null){for(var f=a.documentElement.firstChild;f!=null&&(f.nodeType!=1||f.nodeName!="results");)f=f.nextSibling;var e=null,g=null;if(f!=null)e=f.getAttribute("wiki-url"),g=f.getAttribute("wiki-section"),f=f.firstChild;for(var j=!1;f!=null;){if(f.nodeType==1){for(var j={},h=f.firstChild;h!=null;){if(h.nodeType==1&&h.firstChild!=null&&h.firstChild.nodeType==1&&h.firstChild.firstChild!=
null&&h.firstChild.firstChild.nodeType==3)j[h.getAttribute("name")]=h.firstChild.firstChild.nodeValue;h=h.nextSibling}j.start==null&&j.date!=null&&(j.start=j.date);h=j.isDuration===null&&j.durationEvent===null||j.isDuration=="false"||j.durationEvent=="false";h=new Timeline.DefaultEventSource.Event({id:j.id,start:d(j.start),end:d(j.end),latestStart:d(j.latestStart),earliestEnd:d(j.earliestEnd),instant:h,text:j.title,description:j.description,image:this._resolveRelativeURL(j.image,c),link:this._resolveRelativeURL(j.link,
c),icon:this._resolveRelativeURL(j.icon,c),color:j.color,textColor:j.textColor,hoverText:j.hoverText,caption:j.caption,classname:j.classname,tapeImage:j.tapeImage,tapeRepeat:j.tapeRepeat,eventID:j.eventID,trackNum:j.trackNum});h._bindings=j;h.getProperty=function(a){return this._bindings[a]};h.setWikiInfo(e,g);this._events.add(h);j=!0}f=f.nextSibling}j&&this._fire("onAddMany",[])}};Timeline.DefaultEventSource.prototype.add=function(a){this._events.add(a);this._fire("onAddOne",[a])};
Timeline.DefaultEventSource.prototype.addMany=function(a){for(var b=0;b<a.length;b++)this._events.add(a[b]);this._fire("onAddMany",[])};Timeline.DefaultEventSource.prototype.clear=function(){this._events.removeAll();this._fire("onClear",[])};Timeline.DefaultEventSource.prototype.getEvent=function(a){return this._events.getEvent(a)};Timeline.DefaultEventSource.prototype.getEventIterator=function(a,b){return this._events.getIterator(a,b)};
Timeline.DefaultEventSource.prototype.getEventReverseIterator=function(a,b){return this._events.getReverseIterator(a,b)};Timeline.DefaultEventSource.prototype.getAllEventIterator=function(){return this._events.getAllIterator()};Timeline.DefaultEventSource.prototype.getCount=function(){return this._events.getCount()};Timeline.DefaultEventSource.prototype.getEarliestDate=function(){return this._events.getEarliestDate()};Timeline.DefaultEventSource.prototype.getLatestDate=function(){return this._events.getLatestDate()};
Timeline.DefaultEventSource.prototype._fire=function(a,b){for(var c=0;c<this._listeners.length;c++){var d=this._listeners[c];if(a in d)try{d[a].apply(d,b)}catch(f){SimileAjax.Debug.exception(f)}}};Timeline.DefaultEventSource.prototype._getBaseURL=function(a){if(a.indexOf("://")<0)var b=this._getBaseURL(document.location.href),a=a.substr(0,1)=="/"?b.substr(0,b.indexOf("/",b.indexOf("://")+3))+a:b+a;b=a.lastIndexOf("/");return b<0?"":a.substr(0,b+1)};
Timeline.DefaultEventSource.prototype._resolveRelativeURL=function(a,b){return a==null||a==""?a:a.indexOf("://")>0?a:a.substr(0,1)=="/"?b.substr(0,b.indexOf("/",b.indexOf("://")+3))+a:b+a};
Timeline.DefaultEventSource.Event=function(a){function b(b){return a[b]!=null&&a[b]!=""?a[b]:null}var c=a.id?a.id.trim():"";this._id=c.length>0?c:Timeline.EventUtils.getNewEventID();this._instant=a.instant||a.end==null;this._start=a.start;this._end=a.end!=null?a.end:a.start;this._latestStart=a.latestStart!=null?a.latestStart:a.instant?this._end:this._start;this._earliestEnd=a.earliestEnd!=null?a.earliestEnd:this._end;c=[];if(this._start>this._latestStart)this._latestStart=this._start,c.push("start is > latestStart");
if(this._start>this._earliestEnd)this._earliestEnd=this._latestStart,c.push("start is > earliestEnd");if(this._start>this._end)this._end=this._earliestEnd,c.push("start is > end");if(this._latestStart>this._earliestEnd)this._earliestEnd=this._latestStart,c.push("latestStart is > earliestEnd");if(this._latestStart>this._end)this._end=this._earliestEnd,c.push("latestStart is > end");if(this._earliestEnd>this._end)this._end=this._earliestEnd,c.push("earliestEnd is > end");this._eventID=b("eventID");
this._text=a.text!=null?SimileAjax.HTML.deEntify(a.text):"";c.length>0&&(this._text+=" PROBLEM: "+c.join(", "));this._description=SimileAjax.HTML.deEntify(a.description);this._image=b("image");this._link=b("link");this._title=b("hoverText");this._title=b("caption");this._icon=b("icon");this._color=b("color");this._textColor=b("textColor");this._classname=b("classname");this._tapeImage=b("tapeImage");this._tapeRepeat=b("tapeRepeat");this._trackNum=b("trackNum");if(this._trackNum!=null)this._trackNum=
parseInt(this._trackNum);this._wikiSection=this._wikiURL=null};
Timeline.DefaultEventSource.Event.prototype={getID:function(){return this._id},isInstant:function(){return this._instant},isImprecise:function(){return this._start!=this._latestStart||this._end!=this._earliestEnd},getStart:function(){return this._start},getEnd:function(){return this._end},getLatestStart:function(){return this._latestStart},getEarliestEnd:function(){return this._earliestEnd},getEventID:function(){return this._eventID},getText:function(){return this._text},getDescription:function(){return this._description},
getImage:function(){return this._image},getLink:function(){return this._link},getIcon:function(){return this._icon},getColor:function(){return this._color},getTextColor:function(){return this._textColor},getClassName:function(){return this._classname},getTapeImage:function(){return this._tapeImage},getTapeRepeat:function(){return this._tapeRepeat},getTrackNum:function(){return this._trackNum},getProperty:function(){return null},getWikiURL:function(){return this._wikiURL},getWikiSection:function(){return this._wikiSection},
setWikiInfo:function(a,b){this._wikiURL=a;this._wikiSection=b},fillDescription:function(a){a.innerHTML=this._description},fillWikiInfo:function(a){a.style.display="none";if(!(this._wikiURL==null||this._wikiSection==null)){var b=this.getProperty("wikiID");if(b==null||b.length==0)b=this.getText();if(!(b==null||b.length==0)){a.style.display="inline";var b=b.replace(/\s/g,"_"),b=this._wikiURL+this._wikiSection.replace(/\s/g,"_")+"/"+b,c=document.createElement("a");c.href=b;c.target="new";c.innerHTML=
Timeline.strings[Timeline.clientLocale].wikiLinkLabel;a.appendChild(document.createTextNode("["));a.appendChild(c);a.appendChild(document.createTextNode("]"))}}},fillTime:function(a,b){this._instant?this.isImprecise()?(a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._start))),a.appendChild(a.ownerDocument.createElement("br")),a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._end)))):a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._start))):this.isImprecise()?
(a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._start)+" ~ "+b.labelPrecise(this._latestStart))),a.appendChild(a.ownerDocument.createElement("br")),a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._earliestEnd)+" ~ "+b.labelPrecise(this._end)))):(a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._start))),a.appendChild(a.ownerDocument.createElement("br")),a.appendChild(a.ownerDocument.createTextNode(b.labelPrecise(this._end))))},fillInfoBubble:function(a,
b,c){var d=a.ownerDocument,f=this.getText(),e=this.getLink(),g=this.getImage();if(g!=null){var j=d.createElement("img");j.src=g;b.event.bubble.imageStyler(j);a.appendChild(j)}g=d.createElement("div");f=d.createTextNode(f);e!=null?(j=d.createElement("a"),j.href=e,j.appendChild(f),g.appendChild(j)):g.appendChild(f);b.event.bubble.titleStyler(g);a.appendChild(g);e=d.createElement("div");this.fillDescription(e);b.event.bubble.bodyStyler(e);a.appendChild(e);e=d.createElement("div");this.fillTime(e,c);
b.event.bubble.timeStyler(e);a.appendChild(e);c=d.createElement("div");this.fillWikiInfo(c);b.event.bubble.wikiStyler(c);a.appendChild(c)}};Timeline.ClassicTheme={};Timeline.ClassicTheme.implementations=[];Timeline.ClassicTheme.create=function(a){a==null&&(a=Timeline.getDefaultLocale());a=Timeline.ClassicTheme.implementations[a];if(a==null)a=Timeline.ClassicTheme._Impl;return new a};
Timeline.ClassicTheme._Impl=function(){this.firstDayOfWeek=0;this.autoWidth=!1;this.autoWidthAnimationTime=500;this.timeline_stop=this.timeline_start=null;this.ether={backgroundColors:[],highlightOpacity:50,interval:{line:{show:!0,opacity:25},weekend:{opacity:30},marker:{hAlign:"Bottom",vAlign:"Right"}}};this.event={track:{height:10,gap:2,offset:2,autoWidthMargin:1.5},overviewTrack:{offset:20,tickHeight:6,height:2,gap:1,autoWidthMargin:5},tape:{height:4},instant:{icon:Timeline.urlPrefix+"images/dull-blue-circle.png",
iconWidth:10,iconHeight:10,impreciseOpacity:20,impreciseIconMargin:3},duration:{impreciseOpacity:20},label:{backgroundOpacity:50,offsetFromLine:3},highlightColors:["#FFFF00","#FFC000","#FF0000","#0000FF"],highlightLabelBackground:!1,bubble:{width:250,maxHeight:0,titleStyler:function(a){a.className="timeline-event-bubble-title"},bodyStyler:function(a){a.className="timeline-event-bubble-body"},imageStyler:function(a){a.className="timeline-event-bubble-image"},wikiStyler:function(a){a.className="timeline-event-bubble-wiki"},
timeStyler:function(a){a.className="timeline-event-bubble-time"}}};this.mouseWheel="scroll"};Timeline.version="2.3.0";Timeline.ajax_lib_version=SimileAjax.version;Timeline.display_version=Timeline.version+" (with Ajax lib "+Timeline.ajax_lib_version+")";Timeline.strings={};Timeline.HORIZONTAL=0;Timeline.VERTICAL=1;Timeline._defaultTheme=null;Timeline.getDefaultLocale=function(){return Timeline.clientLocale};
Timeline.create=function(a,b,c,d){if(Timeline.timelines==null)Timeline.timelines=[];var f=Timeline.timelines.length;Timeline.timelines[f]=null;a=new Timeline._Impl(a,b,c,d,f);return Timeline.timelines[f]=a};
Timeline.createBandInfo=function(a){var b="theme"in a?a.theme:Timeline.getDefaultTheme(),c="eventSource"in a?a.eventSource:null,d=new Timeline.LinearEther({centersOn:"date"in a?a.date:new Date,interval:SimileAjax.DateTime.gregorianUnitLengths[a.intervalUnit],pixelsPerInterval:a.intervalPixels,theme:b}),f=new Timeline.GregorianEtherPainter({unit:a.intervalUnit,multiple:"multiple"in a?a.multiple:1,theme:b,align:"align"in a?a.align:void 0}),e={showText:"showEventText"in a?a.showEventText:!0,theme:b};
if("eventPainterParams"in a)for(var g in a.eventPainterParams)e[g]=a.eventPainterParams[g];if("trackHeight"in a)e.trackHeight=a.trackHeight;if("trackGap"in a)e.trackGap=a.trackGap;g="overview"in a&&a.overview?"overview":"layout"in a?a.layout:"original";if("eventPainter"in a)e=new a.eventPainter(e);else switch(g){case "overview":e=new Timeline.OverviewEventPainter(e);break;case "detailed":e=new Timeline.DetailedEventPainter(e);break;default:e=new Timeline.OriginalEventPainter(e)}return{width:a.width,
eventSource:c,timeZone:"timeZone"in a?a.timeZone:0,ether:d,etherPainter:f,eventPainter:e,theme:b,zoomIndex:"zoomIndex"in a?a.zoomIndex:0,zoomSteps:"zoomSteps"in a?a.zoomSteps:null}};
Timeline.createHotZoneBandInfo=function(a){var b="theme"in a?a.theme:Timeline.getDefaultTheme(),c="eventSource"in a?a.eventSource:null,d=new Timeline.HotZoneEther({centersOn:"date"in a?a.date:new Date,interval:SimileAjax.DateTime.gregorianUnitLengths[a.intervalUnit],pixelsPerInterval:a.intervalPixels,zones:a.zones,theme:b}),f=new Timeline.HotZoneGregorianEtherPainter({unit:a.intervalUnit,zones:a.zones,theme:b,align:"align"in a?a.align:void 0}),e={showText:"showEventText"in a?a.showEventText:!0,theme:b};
if("eventPainterParams"in a)for(var g in a.eventPainterParams)e[g]=a.eventPainterParams[g];if("trackHeight"in a)e.trackHeight=a.trackHeight;if("trackGap"in a)e.trackGap=a.trackGap;g="overview"in a&&a.overview?"overview":"layout"in a?a.layout:"original";if("eventPainter"in a)e=new a.eventPainter(e);else switch(g){case "overview":e=new Timeline.OverviewEventPainter(e);break;case "detailed":e=new Timeline.DetailedEventPainter(e);break;default:e=new Timeline.OriginalEventPainter(e)}return{width:a.width,
eventSource:c,timeZone:"timeZone"in a?a.timeZone:0,ether:d,etherPainter:f,eventPainter:e,theme:b,zoomIndex:"zoomIndex"in a?a.zoomIndex:0,zoomSteps:"zoomSteps"in a?a.zoomSteps:null}};Timeline.getDefaultTheme=function(){if(Timeline._defaultTheme==null)Timeline._defaultTheme=Timeline.ClassicTheme.create(Timeline.getDefaultLocale());return Timeline._defaultTheme};Timeline.setDefaultTheme=function(a){Timeline._defaultTheme=a};
Timeline.loadXML=function(a,b){SimileAjax.XmlHttp.get(a,function(b){alert("Failed to load data xml from "+a+"\n"+b)},function(c){var d=c.responseXML;!d.documentElement&&c.responseStream&&d.load(c.responseStream);b(d,a)})};Timeline.loadJSON=function(a,b){SimileAjax.XmlHttp.get(a,function(b){alert("Failed to load json data from "+a+"\n"+b)},function(c){b(eval("("+c.responseText+")"),a)})};Timeline.getTimelineFromID=function(a){return Timeline.timelines[a]};
Timeline.writeVersion=function(a){document.getElementById(a).innerHTML=this.display_version};
Timeline._Impl=function(a,b,c,d,f){SimileAjax.WindowManager.initialize();this._containerDiv=a;this._bandInfos=b;this._orientation=c==null?Timeline.HORIZONTAL:c;this._unit=d!=null?d:SimileAjax.NativeDateUnit;this._starting=!0;this._autoResizing=!1;this.autoWidth=b&&b[0]&&b[0].theme&&b[0].theme.autoWidth;this.autoWidthAnimationTime=b&&b[0]&&b[0].theme&&b[0].theme.autoWidthAnimationTime;this.timelineID=f;this.timeline_start=b&&b[0]&&b[0].theme&&b[0].theme.timeline_start;this.timeline_stop=b&&b[0]&&b[0].theme&&
b[0].theme.timeline_stop;this.timeline_at_stop=this.timeline_at_start=!1;this._initialize()};Timeline._Impl.prototype.dispose=function(){for(var a=0;a<this._bands.length;a++)this._bands[a].dispose();this._bandInfos=this._bands=null;this._containerDiv.innerHTML="";Timeline.timelines[this.timelineID]=null};Timeline._Impl.prototype.getBandCount=function(){return this._bands.length};Timeline._Impl.prototype.getBand=function(a){return this._bands[a]};
Timeline._Impl.prototype.finishedEventLoading=function(){this._autoWidthCheck(!0);this._starting=!1};Timeline._Impl.prototype.layout=function(){this._autoWidthCheck(!0);this._distributeWidths()};Timeline._Impl.prototype.paint=function(){for(var a=0;a<this._bands.length;a++)this._bands[a].paint()};Timeline._Impl.prototype.getDocument=function(){return this._containerDiv.ownerDocument};Timeline._Impl.prototype.addDiv=function(a){this._containerDiv.appendChild(a)};
Timeline._Impl.prototype.removeDiv=function(a){this._containerDiv.removeChild(a)};Timeline._Impl.prototype.isHorizontal=function(){return this._orientation==Timeline.HORIZONTAL};Timeline._Impl.prototype.isVertical=function(){return this._orientation==Timeline.VERTICAL};Timeline._Impl.prototype.getPixelLength=function(){return this._orientation==Timeline.HORIZONTAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight};
Timeline._Impl.prototype.getPixelWidth=function(){return this._orientation==Timeline.VERTICAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight};Timeline._Impl.prototype.getUnit=function(){return this._unit};Timeline._Impl.prototype.getWidthStyle=function(){return this._orientation==Timeline.HORIZONTAL?"height":"width"};
Timeline._Impl.prototype.loadXML=function(a,b){var c=this,d=function(b){alert("Failed to load data xml from "+a+"\n"+b);c.hideLoadingMessage()},f=function(d){try{var f=d.responseXML;!f.documentElement&&d.responseStream&&f.load(d.responseStream);b(f,a)}finally{c.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){SimileAjax.XmlHttp.get(a,d,f)},0)};
Timeline._Impl.prototype.loadJSON=function(a,b){var c=this,d=function(b){alert("Failed to load json data from "+a+"\n"+b);c.hideLoadingMessage()},f=function(d){try{b(eval("("+d.responseText+")"),a)}finally{c.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){SimileAjax.XmlHttp.get(a,d,f)},0)};Timeline._Impl.prototype._autoWidthScrollListener=function(a){a.getTimeline()._autoWidthCheck(!1)};
Timeline._Impl.prototype._autoWidthCheck=function(a){function b(){var a=c.getWidthStyle();if(d)c._containerDiv.style[a]=f+"px";else{c._autoResizing=!0;var b={};b[a]=f+"px";SimileAjax.jQuery(c._containerDiv).animate(b,c.autoWidthAnimationTime,"linear",function(){c._autoResizing=!1})}}var c=this,d=c._starting,f=0;c.autoWidth&&function(){var d=0,g=c.getPixelWidth();if(!c._autoResizing){for(var j=0;j<c._bands.length;j++)c._bands[j].checkAutoWidth(),d+=c._bandInfos[j].width;if(d>g||a)f=d,b(),c._distributeWidths()}}()};
Timeline._Impl.prototype._initialize=function(){var a=this._containerDiv,b=a.ownerDocument;a.className=a.className.split(" ").concat("timeline-container").join(" ");var c=this.isHorizontal()?"horizontal":"vertical";for(a.className+=" timeline-"+c;a.firstChild;)a.removeChild(a.firstChild);c=SimileAjax.Graphics.createTranslucentImage(Timeline.urlPrefix+(this.isHorizontal()?"images/copyright-vertical.png":"images/copyright.png"));c.className="timeline-copyright";c.title="Timeline copyright SIMILE - www.code.google.com/p/simile-widgets/";
SimileAjax.DOM.registerEvent(c,"click",function(){window.location="http://code.google.com/p/simile-widgets/"});a.appendChild(c);this._bands=[];for(c=0;c<this._bandInfos.length;c++)this._bands.push(new Timeline._Band(this,this._bandInfos[c],c));this._distributeWidths();for(c=0;c<this._bandInfos.length;c++){var d=this._bandInfos[c];"syncWith"in d&&this._bands[c].setSyncWithBand(this._bands[d.syncWith],"highlight"in d?d.highlight:!1)}if(this.autoWidth)for(c=0;c<this._bands.length;c++)this._bands[c].addOnScrollListener(this._autoWidthScrollListener);
var f=SimileAjax.Graphics.createMessageBubble(b);f.containerDiv.className="timeline-message-container";a.appendChild(f.containerDiv);f.contentDiv.className="timeline-message";f.contentDiv.innerHTML="<img src='"+Timeline.urlPrefix+"images/progress-running.gif' /> Loading...";this.showLoadingMessage=function(){f.containerDiv.style.display="block"};this.hideLoadingMessage=function(){f.containerDiv.style.display="none"}};
Timeline._Impl.prototype._distributeWidths=function(){for(var a=this.getPixelLength(),b=this.getPixelWidth(),c=0,d=0;d<this._bands.length;d++){var f=this._bands[d],e=this._bandInfos[d].width;if(typeof e=="string"){var g=e.indexOf("%");g>0?(e=parseInt(e.substr(0,g)),e=Math.round(e*b/100)):e=parseInt(e)}f.setBandShiftAndWidth(c,e);f.setViewLength(a);c+=e}};
Timeline._Impl.prototype.shiftOK=function(a,b){var c=b>0,d=b<0;if(c&&this.timeline_start==null||d&&this.timeline_stop==null||b==0)return!0;for(var f=!1,e=0;e<this._bands.length&&!f;e++)f=this._bands[e].busy();if(f)return!0;if(c&&this.timeline_at_start||d&&this.timeline_at_stop)return!1;d=!1;for(e=0;e<this._bands.length&&!d;e++)d=this._bands[e],d=c?(e==a?d.getMinVisibleDateAfterDelta(b):d.getMinVisibleDate())>=this.timeline_start:(e==a?d.getMaxVisibleDateAfterDelta(b):d.getMaxVisibleDate())<=this.timeline_stop;
c?(this.timeline_at_start=!d,this.timeline_at_stop=!1):(this.timeline_at_stop=!d,this.timeline_at_start=!1);return d};Timeline._Impl.prototype.zoom=function(a,b,c,d){var f=null,e=/^timeline-band-([0-9]+)$/.exec(d.id);e&&(f=parseInt(e[1]));f!=null&&this._bands[f].zoom(a,b,c,d);this.paint()};Timeline.NativeDateUnit={};Timeline.NativeDateUnit.createLabeller=function(a,b){return new Timeline.GregorianDateLabeller(a,b)};Timeline.NativeDateUnit.makeDefaultValue=function(){return new Date};
Timeline.NativeDateUnit.cloneValue=function(a){return new Date(a.getTime())};Timeline.NativeDateUnit.getParser=function(a){typeof a=="string"&&(a=a.toLowerCase());return a=="iso8601"||a=="iso 8601"?Timeline.DateTime.parseIso8601DateTime:Timeline.DateTime.parseGregorianDateTime};Timeline.NativeDateUnit.parseFromObject=function(a){return Timeline.DateTime.parseGregorianDateTime(a)};Timeline.NativeDateUnit.toNumber=function(a){return a.getTime()};Timeline.NativeDateUnit.fromNumber=function(a){return new Date(a)};
Timeline.NativeDateUnit.compare=function(a,b){var c,d;c=typeof a=="object"?a.getTime():Number(a);d=typeof b=="object"?b.getTime():Number(b);return c-d};Timeline.NativeDateUnit.earlier=function(a,b){return Timeline.NativeDateUnit.compare(a,b)<0?a:b};Timeline.NativeDateUnit.later=function(a,b){return Timeline.NativeDateUnit.compare(a,b)>0?a:b};Timeline.NativeDateUnit.change=function(a,b){return new Date(a.getTime()+b)};Timeline.Debug=SimileAjax.Debug;var log=SimileAjax.Debug.log;Object.extend=function(a,b){for(var c in b)a[c]=b[c];return a};Timeplot.create=function(a,b){return new Timeplot._Impl(a,b)};
Timeplot.createPlotInfo=function(a){return{id:"id"in a?a.id:"p"+Math.round(Math.random()*1E6),dataSource:"dataSource"in a?a.dataSource:null,eventSource:"eventSource"in a?a.eventSource:null,timeGeometry:"timeGeometry"in a?a.timeGeometry:new Timeplot.DefaultTimeGeometry,valueGeometry:"valueGeometry"in a?a.valueGeometry:new Timeplot.DefaultValueGeometry,timeZone:"timeZone"in a?a.timeZone:0,fillColor:"fillColor"in a?a.fillColor=="string"?new Timeplot.Color(a.fillColor):a.fillColor:null,fillGradient:"fillGradient"in
a?a.fillGradient:!0,fillFrom:"fillFrom"in a?a.fillFrom:Number.NEGATIVE_INFINITY,lineColor:"lineColor"in a?a.lineColor=="string"?new Timeplot.Color(a.lineColor):a.lineColor:new Timeplot.Color("#606060"),lineWidth:"lineWidth"in a?a.lineWidth:1,dotRadius:"dotRadius"in a?a.dotRadius:2,dotColor:"dotColor"in a?a.dotColor:null,eventLineWidth:"eventLineWidth"in a?a.eventLineWidth:1,showValues:"showValues"in a?a.showValues:!1,roundValues:"roundValues"in a?a.roundValues:!0,valuesOpacity:"valuesOpacity"in a?
a.valuesOpacity:75,bubbleWidth:"bubbleWidth"in a?a.bubbleWidth:300,bubbleHeight:"bubbleHeight"in a?a.bubbleHeight:200}};Timeplot._Impl=function(a,b){this._id="t"+Math.round(Math.random()*1E6);this._containerDiv=a;this._plotInfos=b;this._painters={background:[],foreground:[]};this._painter=null;this._upright=this._active=!1;this._initialize()};
Timeplot._Impl.prototype={dispose:function(){for(var a=0;a<this._plots.length;a++)this._plots[a].dispose();this._plotsInfos=this._plots=null;this._containerDiv.innerHTML=""},getElement:function(){return this._containerDiv},getDocument:function(){return this._containerDiv.ownerDocument},add:function(a){this._containerDiv.appendChild(a)},remove:function(a){this._containerDiv.removeChild(a)},addPainter:function(a,b){var c=this._painters[a];if(c){for(var d=0;d<c.length;d++)if(c[d].context._id==b.context._id)return;
c.push(b)}},removePainter:function(a,b){var c=this._painters[a];if(c)for(var d=0;d<c.length;d++)if(c[d].context._id==b.context._id){c.splice(d,1);break}},getWidth:function(){return this._containerDiv.clientWidth},getHeight:function(){return this._containerDiv.clientHeight},getCanvas:function(){return this._canvas},loadText:function(a,b,c,d,f){if(this._active){var e=this,g=function(b){alert("Failed to load data xml from "+a+"\n"+b);e.hideLoadingMessage()},j=function(h){try{c.loadText(h.responseText,
b,a,d,f)}catch(g){SimileAjax.Debug.exception(g)}finally{e.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){SimileAjax.XmlHttp.get(a,g,j)},0)}},loadXML:function(a,b){if(this._active){var c=this,d=function(b){alert("Failed to load data xml from "+a+"\n"+b);c.hideLoadingMessage()},f=function(d){try{var f=d.responseXML;!f.documentElement&&d.responseStream&&f.load(d.responseStream);b.loadXML(f,a)}finally{c.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){SimileAjax.XmlHttp.get(a,
d,f)},0)}},putText:function(a,b,c,d){a=this.putDiv(a,"timeplot-div "+c,d);a.innerHTML=b;return a},putDiv:function(a,b,c){var a=this._id+"-"+a,d=document.getElementById(a);if(!d){var f=this._containerDiv.firstChild,d=document.createElement("div");d.setAttribute("id",a);f.appendChild(d)}d.setAttribute("class","timeplot-div "+b);d.setAttribute("className","timeplot-div "+b);this.placeDiv(d,c);return d},placeDiv:function(a,b){if(b)for(style in b)style=="left"?(b[style]+=this._paddingX,b[style]+="px"):
style=="right"?(b[style]+=this._paddingX,b[style]+="px"):style=="top"?(b[style]+=this._paddingY,b[style]+="px"):style=="bottom"?(b[style]+=this._paddingY,b[style]+="px"):style=="width"?(b[style]<0&&(b[style]=0),b[style]+="px"):style=="height"&&(b[style]<0&&(b[style]=0),b[style]+="px"),a.style[style]=b[style]},locate:function(a){return{x:a.offsetLeft-this._paddingX,y:a.offsetTop-this._paddingY}},update:function(){if(this._active){for(var a=0;a<this._plots.length;a++){var b=this._plots[a],c=b.getDataSource();
if(c&&(c=c.getRange()))b._valueGeometry.setRange(c),b._timeGeometry.setRange(c);b.hideValues()}this.paint()}},repaint:function(){if(this._active){this._prepareCanvas();for(var a=0;a<this._plots.length;a++){var b=this._plots[a];b._timeGeometry&&b._timeGeometry.reset();b._valueGeometry&&b._valueGeometry.reset()}this.paint()}},paint:function(){if(this._active&&this._painter==null){var a=this;this._painter=window.setTimeout(function(){a._clearCanvas();for(var b=function(b,c){try{c.setTimeplot&&c.setTimeplot(a),
b.apply(c,[])}catch(d){SimileAjax.Debug.exception(d)}},c=a._painters.background,d=0;d<c.length;d++)b(c[d].action,c[d].context);c=a._painters.foreground;for(d=0;d<c.length;d++)b(c[d].action,c[d].context);a._painter=null},20)}},_clearCanvas:function(){var a=this.getCanvas();a.getContext("2d").clearRect(0,0,a.width,a.height)},_clearLabels:function(){var a=this._containerDiv.firstChild;a&&this._containerDiv.removeChild(a);a=document.createElement("div");this._containerDiv.appendChild(a)},_prepareCanvas:function(){var a=
this.getCanvas(),b=SimileAjax.jQuery(this._containerDiv);this._paddingX=(parseInt(b.css("paddingLeft"))+parseInt(b.css("paddingRight")))/2;this._paddingY=(parseInt(b.css("paddingTop"))+parseInt(b.css("paddingBottom")))/2;a.width=this.getWidth()-this._paddingX*2;a.height=this.getHeight()-this._paddingY*2;b=a.getContext("2d");this._setUpright(b,a);b.globalCompositeOperation="source-over"},_setUpright:function(a,b){if(!SimileAjax.Platform.browser.isIE)this._upright=!1;if(!this._upright)this._upright=
!0,a.translate(0,b.height),a.scale(1,-1)},_isBrowserSupported:function(a){var b=SimileAjax.Platform.browser;return a.getContext&&window.getComputedStyle||b.isIE&&b.majorVersion>=6?!0:!1},_initialize:function(){SimileAjax.WindowManager.initialize();var a=this._containerDiv,b=a.ownerDocument;for(a.className="timeplot-container "+a.className;a.firstChild;)a.removeChild(a.firstChild);var c=b.createElement("canvas");if(this._isBrowserSupported(c)){this._clearLabels();this._canvas=c;c.className="timeplot-canvas";
a.appendChild(c);if(!c.getContext&&G_vmlCanvasManager)this._canvas=c=G_vmlCanvasManager.initElement(this._canvas);this._prepareCanvas();c=SimileAjax.Graphics.createTranslucentImage(Timeplot.urlPrefix+"images/copyright.png");c.className="timeplot-copyright";c.title="Timeplot (c) SIMILE - http://simile.mit.edu/timeplot/";SimileAjax.DOM.registerEvent(c,"click",function(){window.location="http://simile.mit.edu/timeplot/"});a.appendChild(c);var d=this,c={onAddMany:function(){d.update()},onClear:function(){d.update()}};
this._plots=[];if(this._plotInfos)for(var f=0;f<this._plotInfos.length;f++){var e=new Timeplot.Plot(this,this._plotInfos[f]),g=e.getDataSource();g&&g.addListener(c);this.addPainter("background",{context:e.getTimeGeometry(),action:e.getTimeGeometry().paint});this.addPainter("background",{context:e.getValueGeometry(),action:e.getValueGeometry().paint});this.addPainter("foreground",{context:e,action:e.paint});this._plots.push(e);e.initialize()}var j=SimileAjax.Graphics.createMessageBubble(b);j.containerDiv.className=
"timeplot-message-container";a.appendChild(j.containerDiv);j.contentDiv.className="timeplot-message";j.contentDiv.innerHTML="<img src='"+Timeplot.urlPrefix+"images/progress-running.gif' /> Loading...";this.showLoadingMessage=function(){j.containerDiv.style.display="block"};this.hideLoadingMessage=function(){j.containerDiv.style.display="none"};this._active=!0}else this._message=SimileAjax.Graphics.createMessageBubble(b),this._message.containerDiv.className="timeplot-message-container",this._message.containerDiv.style.top=
"15%",this._message.containerDiv.style.left="20%",this._message.containerDiv.style.right="20%",this._message.containerDiv.style.minWidth="20em",this._message.contentDiv.className="timeplot-message",this._message.contentDiv.innerHTML="We're terribly sorry, but your browser is not currently supported by <a href='http://simile.mit.edu/timeplot/'>Timeplot</a>.<br><br> We are working on supporting it in the near future but, for now, see the <a href='http://simile.mit.edu/wiki/Timeplot_Limitations'>list of currently supported browsers</a>.",
this._message.containerDiv.style.display="block",a.appendChild(this._message.containerDiv)}};Timeplot.Plot=function(a,b){this._timeplot=a;this._canvas=a.getCanvas();this._plotInfo=b;this._id=b.id;this._timeGeometry=b.timeGeometry;this._valueGeometry=b.valueGeometry;this._theme=new Timeline.getDefaultTheme;this._dataSource=b.dataSource;this._eventSource=b.eventSource;this._bubble=null};
Timeplot.Plot.prototype={initialize:function(){if(this._dataSource&&this._dataSource.getValue){this._timeFlag=this._timeplot.putDiv("timeflag","timeplot-timeflag");this._valueFlag=this._timeplot.putDiv(this._id+"valueflag","timeplot-valueflag");this._valueFlagLineLeft=this._timeplot.putDiv(this._id+"valueflagLineLeft","timeplot-valueflag-line");this._valueFlagLineRight=this._timeplot.putDiv(this._id+"valueflagLineRight","timeplot-valueflag-line");this._valueFlagLineLeft.firstChild||(this._valueFlagLineLeft.appendChild(SimileAjax.Graphics.createTranslucentImage(Timeplot.urlPrefix+
"images/line_left.png")),this._valueFlagLineRight.appendChild(SimileAjax.Graphics.createTranslucentImage(Timeplot.urlPrefix+"images/line_right.png")));this._valueFlagPole=this._timeplot.putDiv(this._id+"valuepole","timeplot-valueflag-pole");var a=this._plotInfo.valuesOpacity;SimileAjax.Graphics.setOpacity(this._timeFlag,a);SimileAjax.Graphics.setOpacity(this._valueFlag,a);SimileAjax.Graphics.setOpacity(this._valueFlagLineLeft,a);SimileAjax.Graphics.setOpacity(this._valueFlagLineRight,a);SimileAjax.Graphics.setOpacity(this._valueFlagPole,
a);var b=this,c=function(a,c){if(typeof SimileAjax!="undefined"&&b._plotInfo.showValues){var e=b._canvas,g=Math.round(SimileAjax.DOM.getEventRelativeCoordinates(c,b._canvas).x);if(g>e.width)g=e.width;if(isNaN(g)||g<0)g=0;g=b._timeGeometry.fromScreen(g);if(g==0)b._valueFlag.style.display="none";else{var j=b._dataSource.getClosestValidTime(g),g=b._timeGeometry.toScreen(j),h=b._dataSource.getValue(j);b._plotInfo.roundValues&&(h=Math.round(h));b._valueFlag.innerHTML=new String(h);var j=new Date(j),k=
b._timeGeometry.getPeriod();b._timeFlag.innerHTML=k<864E5?j.toLocaleTimeString():k>2592E6?j.toLocaleDateString():j.toLocaleString();var j=b._timeFlag.clientHeight,k=Math.round(b._timeFlag.clientWidth/2),l=b._valueFlag.clientWidth,m=b._valueFlag.clientHeight,h=b._valueGeometry.toScreen(h),p=g+k>e.width?e.width-k:g-k<0?k:g;b._timeGeometry._timeValuePosition=="top"?(b._timeplot.placeDiv(b._valueFlagPole,{left:g,top:j-5,height:e.height-h-j+6,display:"block"}),b._timeplot.placeDiv(b._timeFlag,{left:p-
k,top:-6,display:"block"})):(b._timeplot.placeDiv(b._valueFlagPole,{left:g,bottom:j-5,height:h-j+6,display:"block"}),b._timeplot.placeDiv(b._timeFlag,{left:p-k,bottom:-6,display:"block"}));g+l+14>e.width&&h+m+4>e.height?(b._valueFlagLineLeft.style.display="none",b._timeplot.placeDiv(b._valueFlagLineRight,{left:g-14,bottom:h-14,display:"block"}),b._timeplot.placeDiv(b._valueFlag,{left:g-l-13,bottom:h-m-13,display:"block"})):g+l+14>e.width&&h+m+4<e.height?(b._valueFlagLineRight.style.display="none",
b._timeplot.placeDiv(b._valueFlagLineLeft,{left:g-14,bottom:h,display:"block"}),b._timeplot.placeDiv(b._valueFlag,{left:g-l-13,bottom:h+13,display:"block"})):g+l+14<e.width&&h+m+4>e.height?(b._valueFlagLineRight.style.display="none",b._timeplot.placeDiv(b._valueFlagLineLeft,{left:g,bottom:h-13,display:"block"}),b._timeplot.placeDiv(b._valueFlag,{left:g+13,bottom:h-13,display:"block"})):(b._valueFlagLineLeft.style.display="none",b._timeplot.placeDiv(b._valueFlagLineRight,{left:g,bottom:h,display:"block"}),
b._timeplot.placeDiv(b._valueFlag,{left:g+13,bottom:h+13,display:"block"}))}}},a=this._timeplot.getElement();SimileAjax.DOM.registerEvent(a,"mouseover",function(a,f,e){if(b._plotInfo.showValues)b._valueFlag.style.display="block",c(a,f,e)});SimileAjax.DOM.registerEvent(a,"mousemove",c)}},dispose:function(){if(this._dataSource)this._dataSource.removeListener(this._paintingListener),this._paintingListener=null,this._dataSource.dispose(),this._dataSource=null},hideValues:function(){if(this._valueFlag)this._valueFlag.style.display=
"none";if(this._timeFlag)this._timeFlag.style.display="none";if(this._valueFlagLineLeft)this._valueFlagLineLeft.style.display="none";if(this._valueFlagLineRight)this._valueFlagLineRight.style.display="none";if(this._valueFlagPole)this._valueFlagPole.style.display="none"},getDataSource:function(){return this._dataSource?this._dataSource:this._eventSource},getTimeGeometry:function(){return this._timeGeometry},getValueGeometry:function(){return this._valueGeometry},paint:function(){var a=this._canvas.getContext("2d");
a.lineWidth=this._plotInfo.lineWidth;a.lineJoin="miter";if(this._dataSource){if(this._plotInfo.fillColor){if(this._plotInfo.fillGradient){var b=a.createLinearGradient(0,this._canvas.height,0,0);b.addColorStop(0,this._plotInfo.fillColor.toString());b.addColorStop(0.5,this._plotInfo.fillColor.toString());b.addColorStop(1,"rgba(255,255,255,0)");a.fillStyle=b}else a.fillStyle=this._plotInfo.fillColor.toString();a.beginPath();a.moveTo(0,0);this._plot(function(b,c){a.lineTo(b,c)});this._plotInfo.fillFrom==
Number.NEGATIVE_INFINITY?a.lineTo(this._canvas.width,0):this._plotInfo.fillFrom==Number.POSITIVE_INFINITY?(a.lineTo(this._canvas.width,this._canvas.height),a.lineTo(0,this._canvas.height)):(a.lineTo(this._canvas.width,this._valueGeometry.toScreen(this._plotInfo.fillFrom)),a.lineTo(0,this._valueGeometry.toScreen(this._plotInfo.fillFrom)));a.fill()}if(this._plotInfo.lineColor){a.strokeStyle=this._plotInfo.lineColor.toString();a.beginPath();var c=!0;this._plot(function(b,d){c&&(c=!1,a.moveTo(b,d));a.lineTo(b,
d)});a.stroke()}if(this._plotInfo.dotColor){a.fillStyle=this._plotInfo.dotColor.toString();var d=this._plotInfo.dotRadius;this._plot(function(b,c){a.beginPath();a.arc(b,c,d,0,2*Math.PI,!0);a.fill()})}}if(this._eventSource){b=a.createLinearGradient(0,0,0,this._canvas.height);b.addColorStop(1,"rgba(255,255,255,0)");a.strokeStyle=b;a.fillStyle=b;a.lineWidth=this._plotInfo.eventLineWidth;a.lineJoin="miter";for(var f=this._eventSource.getAllEventIterator();f.hasNext();){var e=f.next(),g=e.getColor(),g=
g?new Timeplot.Color(g):this._plotInfo.lineColor,j=e.getStart().getTime(),h=e.getEnd().getTime();j==h?(g=g.toString(),b.addColorStop(0,g),j=this._timeGeometry.toScreen(j),g=j=Math.floor(j)+0.5,a.beginPath(),a.moveTo(j,0),a.lineTo(j,this._canvas.height),a.stroke(),h=j-4,j=7):(g=g.toString(0.5),b.addColorStop(0,g),j=this._timeGeometry.toScreen(j),j=Math.floor(j)+0.5,g=this._timeGeometry.toScreen(h),g=Math.floor(g)+0.5,a.fillRect(j,0,g-j,this._canvas.height),h=j,j=g-j-1);var h=this._timeplot.putDiv(e.getID(),
"timeplot-event-box",{left:Math.round(h),width:Math.round(j),top:0,height:this._canvas.height-1}),k=this,j=function(a){return function(b,c){k._timeplot.getDocument();k._closeBubble();var d=SimileAjax.DOM.getEventPageCoordinates(c),e=SimileAjax.DOM.getPageCoordinates(b);k._bubble=SimileAjax.Graphics.createBubbleForPoint(d.x,e.top+k._canvas.height,k._plotInfo.bubbleWidth,k._plotInfo.bubbleHeight,"bottom");a.fillInfoBubble(k._bubble.content,k._theme,k._timeGeometry.getLabeler())}},g=function(a){a.oldClass=
a.className;a.className+=" timeplot-event-box-highlight"},l=function(a){a.className=a.oldClass;a.oldClass=null};if(!h.instrumented)SimileAjax.DOM.registerEvent(h,"click",j(e)),SimileAjax.DOM.registerEvent(h,"mouseover",g),SimileAjax.DOM.registerEvent(h,"mouseout",l),h.instrumented=!0}}},_plot:function(a){var b=this._dataSource.getData();if(b)for(var c=b.times,b=b.values,d=c.length,f=0;f<d;f++){var e=this._timeGeometry.toScreen(c[f]),g=this._valueGeometry.toScreen(b[f]);a(e,g)}},_closeBubble:function(){if(this._bubble!=
null)this._bubble.close(),this._bubble=null}};Timeplot.DefaultEventSource=function(a){Timeline.DefaultEventSource.apply(this,arguments)};Object.extend(Timeplot.DefaultEventSource.prototype,Timeline.DefaultEventSource.prototype);
Timeplot.DefaultEventSource.prototype.loadText=function(a,b,c,d,f){if(a!=null){this._events.maxValues=[];this._getBaseURL(c);f||(f="iso8601");c=this._events.getUnit().getParser(f);a=this._parseText(a,b);b=!1;d&&(a=d(a));if(a)for(d=0;d<a.length;d++)if(f=a[d],f.length>1){var e=SimileAjax.jQuery.trim(f[0]);if(e=c(e))this._events.add(new Timeplot.DefaultEventSource.NumericEvent(e,f.slice(1))),b=!0}b&&this._fire("onAddMany",[])}};
Timeplot.DefaultEventSource.prototype._parseText=function(a,b){for(var a=a.replace(/\r\n?/g,"\n"),c=0,d=a.length,f=[];c<d;){var e=[];if(a.charAt(c)!="#")for(;c<d;){if(a.charAt(c)=='"'){for(var g=a.indexOf('"',c+1);g<d&&g>-1;){if(a.charAt(g+1)!='"')break;g=a.indexOf('"',g+2)}if(!(g<0))if(a.charAt(g+1)==b){c=a.substr(c+1,g-c-1);c=c.replace(/""/g,'"');e[e.length]=c;c=g+2;continue}else if(a.charAt(g+1)=="\n"||d==g+1){c=a.substr(c+1,g-c-1);c=c.replace(/""/g,'"');e[e.length]=c;c=g+2;break}}var g=a.indexOf(b,
c),j=a.indexOf("\n",c);j<0&&(j=d);if(g>-1&&g<j)e[e.length]=a.substr(c,g-c),c=g+1;else{e[e.length]=a.substr(c,j-c);c=j+1;break}}else j=a.indexOf("\n",c),c=j>-1?j+1:cur;e.length>0&&(f[f.length]=e)}return f.length<0?void 0:f};Timeplot.DefaultEventSource.prototype.getRange=function(){var a=this.getEarliestDate(),b=this.getLatestDate();return{earliestDate:a?a:null,latestDate:b?b:null,min:0,max:0}};
Timeplot.DefaultEventSource.NumericEvent=function(a,b){this._id="e"+Math.round(Math.random()*1E6);this._time=a;this._values=b};Timeplot.DefaultEventSource.NumericEvent.prototype={getID:function(){return this._id},getTime:function(){return this._time},getValues:function(){return this._values},getStart:function(){return this._time},getEnd:function(){return this._time}};
Timeplot.DataSource=function(a){this._eventSource=a;var b=this;this._processingListener={onAddMany:function(){b._process()},onClear:function(){b._clear()}};this.addListener(this._processingListener);this._listeners=[];this._range=this._data=null};
Timeplot.DataSource.prototype={_clear:function(){this._range=this._data=null},_process:function(){this._data={times:[],values:[]};this._range={earliestDate:null,latestDate:null,min:0,max:0}},getRange:function(){return this._range},getData:function(){return this._data},getValue:function(a){if(this._data)for(var b=0;b<this._data.times.length;b++)if(this._data.times[b]>=a)return this._data.values[b];return 0},getClosestValidTime:function(a){if(this._data)for(var b=0;b<this._data.times.length;b++){var c=
this._data.times[b];if(c>=a)return b<=0?c:(b=this._data.times[b-1],a-b<c-a?b:c)}return 0},addListener:function(a){this._eventSource.addListener(a)},removeListener:function(a){this._eventSource.removeListener(a)},replaceListener:function(a,b){this.removeListener(a);this.addListener(b)}};Timeplot.ColumnSource=function(a,b){Timeplot.DataSource.apply(this,arguments);this._column=b-1};Object.extend(Timeplot.ColumnSource.prototype,Timeplot.DataSource.prototype);
Timeplot.ColumnSource.prototype.dispose=function(){this.removeListener(this._processingListener);this._clear()};
Timeplot.ColumnSource.prototype._process=function(){for(var a=this._eventSource.getCount(),b=Array(a),a=Array(a),c=Number.MAX_VALUE,d=Number.MIN_VALUE,f=0,e=this._eventSource.getAllEventIterator();e.hasNext();){var g=e.next(),j=g.getTime();b[f]=j;g=this._getValue(g);isNaN(g)||(g<c&&(c=g),g>d&&(d=g),a[f]=g);f++}this._data={times:b,values:a};d==Number.MIN_VALUE&&(d=1);this._range={earliestDate:this._eventSource.getEarliestDate(),latestDate:this._eventSource.getLatestDate(),min:c,max:d}};
Timeplot.ColumnSource.prototype._getValue=function(a){return parseFloat(a.getValues()[this._column])};Timeplot.ColumnDiffSource=function(a,b,c){Timeplot.ColumnSource.apply(this,arguments);this._column2=c-1};Object.extend(Timeplot.ColumnDiffSource.prototype,Timeplot.ColumnSource.prototype);Timeplot.ColumnDiffSource.prototype._getValue=function(a){var b=parseFloat(a.getValues()[this._column]),a=parseFloat(a.getValues()[this._column2]);return b-a};
Timeplot.DefaultValueGeometry=function(a){a||(a={});this._id="id"in a?a.id:"g"+Math.round(Math.random()*1E6);this._axisColor="axisColor"in a?typeof a.axisColor=="string"?new Timeplot.Color(a.axisColor):a.axisColor:new Timeplot.Color("#606060");this._gridColor="gridColor"in a?typeof a.gridColor=="string"?new Timeplot.Color(a.gridColor):a.gridColor:null;this._gridLineWidth="gridLineWidth"in a?a.gridLineWidth:0.5;this._axisLabelsPlacement="axisLabelsPlacement"in a?a.axisLabelsPlacement:"right";this._gridSpacing=
"gridSpacing"in a?a.gridStep:50;this._gridType="gridType"in a?a.gridType:"short";this._gridShortSize="gridShortSize"in a?a.gridShortSize:10;this._minValue="min"in a?a.min:null;this._maxValue="max"in a?a.max:null;this._map=this._linMap={direct:function(a){return a},inverse:function(a){return a}};this._labels=[];this._grid=[]};
Timeplot.DefaultValueGeometry.prototype={setTimeplot:function(a){this._timeplot=a;this._canvas=a.getCanvas();this.reset()},setRange:function(a){if(this._minValue==null||this._minValue!=null&&a.min<this._minValue)this._minValue=a.min;if(this._maxValue==null||this._maxValue!=null&&a.max*1.05>this._maxValue)this._maxValue=a.max*1.05;this._updateMappedValues();if(!(this._minValue==0&&this._maxValue==0))this._grid=this._calculateGrid()},reset:function(){this._clearLabels();this._updateMappedValues();this._grid=
this._calculateGrid()},toScreen:function(a){return this._canvas&&this._maxValue?this._canvas.height*this._map.direct(a-this._minValue)/this._mappedRange:-50},fromScreen:function(a){return this._canvas?this._map.inverse(this._mappedRange*a/this._canvas.height)+this._minValue:0},paint:function(){if(this._timeplot){var a=this._canvas.getContext("2d");a.lineJoin="miter";if(this._gridColor){var b=a.createLinearGradient(0,0,0,this._canvas.height);b.addColorStop(0,this._gridColor.toHexString());b.addColorStop(0.3,
this._gridColor.toHexString());b.addColorStop(1,"rgba(255,255,255,0.5)");a.lineWidth=this._gridLineWidth;a.strokeStyle=b;for(b=0;b<this._grid.length;b++){var c=this._grid[b],d=Math.floor(c.y)+0.5;if(typeof c.label!="undefined"){if(this._axisLabelsPlacement=="left"){var f=this._timeplot.putText(this._id+"-"+b,c.label,"timeplot-grid-label",{left:4,bottom:d+2,color:this._gridColor.toHexString(),visibility:"hidden"});this._labels.push(f)}else this._axisLabelsPlacement=="right"&&(f=this._timeplot.putText(this._id+
"-"+b,c.label,"timeplot-grid-label",{right:4,bottom:d+2,color:this._gridColor.toHexString(),visibility:"hidden"}),this._labels.push(f));if(d+f.clientHeight<this._canvas.height+10)f.style.visibility="visible"}a.beginPath();this._gridType=="long"||c.label==0?(a.moveTo(0,d),a.lineTo(this._canvas.width,d)):this._gridType=="short"&&(this._axisLabelsPlacement=="left"?(a.moveTo(0,d),a.lineTo(this._gridShortSize,d)):this._axisLabelsPlacement=="right"&&(a.moveTo(this._canvas.width,d),a.lineTo(this._canvas.width-
this._gridShortSize,d)));a.stroke()}}f=a.createLinearGradient(0,0,0,this._canvas.height);f.addColorStop(0,this._axisColor.toString());f.addColorStop(0.5,this._axisColor.toString());f.addColorStop(1,"rgba(255,255,255,0.5)");a.lineWidth=1;a.strokeStyle=f;a.beginPath();a.moveTo(0,this._canvas.height);a.lineTo(0,0);a.stroke();a.beginPath();a.moveTo(this._canvas.width,0);a.lineTo(this._canvas.width,this._canvas.height);a.stroke()}},_clearLabels:function(){for(var a=0;a<this._labels.length;a++){var b=this._labels[a],
c=b.parentNode;c&&c.removeChild(b)}},_calculateGrid:function(){var a=[];if(!this._canvas||this._valueRange==0)return a;var b=0;if(this._valueRange>1){for(;Math.pow(10,b)<this._valueRange;)b++;b--}else for(;Math.pow(10,b)>this._valueRange;)b--;for(var c=Math.pow(10,b),b=c;;){for(var d=this.toScreen(this._minValue+b);d<this._gridSpacing;)b+=c,d=this.toScreen(this._minValue+b);if(d>2*this._gridSpacing)c/=10,b=c;else break}c=0;d=this.toScreen(c);if(this._minValue>=0)for(;d<this._canvas.height;)d>0&&a.push({y:d,
label:c}),c+=b,d=this.toScreen(c);else{if(!(this._maxValue<=0)){for(;d<this._canvas.height;)d>0&&a.push({y:d,label:c}),c+=b,d=this.toScreen(c);c=-b;d=this.toScreen(c)}for(;d>0;)d<this._canvas.height&&a.push({y:d,label:c}),c-=b,d=this.toScreen(c)}return a},_updateMappedValues:function(){this._valueRange=Math.abs(this._maxValue-this._minValue);this._mappedRange=this._map.direct(this._valueRange)}};
Timeplot.LogarithmicValueGeometry=function(a){Timeplot.DefaultValueGeometry.apply(this,arguments);this._logMap={direct:function(a){return Math.log(a+1)/Math.log(10)},inverse:function(a){return Math.exp(Math.log(10)*a)-1}};this._mode="log";this._map=this._logMap;this._calculateGrid=this._logarithmicCalculateGrid};Timeplot.LogarithmicValueGeometry.prototype._linearCalculateGrid=Timeplot.DefaultValueGeometry.prototype._calculateGrid;Object.extend(Timeplot.LogarithmicValueGeometry.prototype,Timeplot.DefaultValueGeometry.prototype);
Timeplot.LogarithmicValueGeometry.prototype._logarithmicCalculateGrid=function(){var a=[];if(!this._canvas||this._valueRange==0)return a;for(var b=1,c=this.toScreen(b);c<this._canvas.height||isNaN(c);)c>0&&a.push({y:c,label:b}),b*=10,c=this.toScreen(b);return a};Timeplot.LogarithmicValueGeometry.prototype.actLinear=function(){this._mode="lin";this._map=this._linMap;this._calculateGrid=this._linearCalculateGrid;this.reset()};
Timeplot.LogarithmicValueGeometry.prototype.actLogarithmic=function(){this._mode="log";this._map=this._logMap;this._calculateGrid=this._logarithmicCalculateGrid;this.reset()};Timeplot.LogarithmicValueGeometry.prototype.toggle=function(){this._mode=="log"?this.actLinear():this.actLogarithmic()};
Timeplot.DefaultTimeGeometry=function(a){a||(a={});this._id="id"in a?a.id:"g"+Math.round(Math.random()*1E6);this._locale="locale"in a?a.locale:"en";this._timeZone="timeZone"in a?a.timeZone:SimileAjax.DateTime.getTimezone();this._labeler="labeller"in a?a.labeller:null;this._axisColor="axisColor"in a?a.axisColor=="string"?new Timeplot.Color(a.axisColor):a.axisColor:new Timeplot.Color("#606060");this._gridColor="gridColor"in a?a.gridColor=="string"?new Timeplot.Color(a.gridColor):a.gridColor:null;this._gridLineWidth=
"gridLineWidth"in a?a.gridLineWidth:0.5;this._axisLabelsPlacement="axisLabelsPlacement"in a?a.axisLabelsPlacement:"bottom";this._gridStep="gridStep"in a?a.gridStep:100;this._gridStepRange="gridStepRange"in a?a.gridStepRange:20;this._min="min"in a?a.min:null;this._max="max"in a?a.max:null;this._timeValuePosition="timeValuePosition"in a?a.timeValuePosition:"bottom";this._unit="unit"in a?a.unit:Timeline.NativeDateUnit;this._map=this._linMap={direct:function(a){return a},inverse:function(a){return a}};
if(!this._labeler)this._labeler=this._unit.createLabeller(this._locale,this._timeZone);a=this._unit.getParser("iso8601");if(this._min&&!this._min.getTime)this._min=a(this._min);if(this._max&&!this._max.getTime)this._max=a(this._max);this._labels=[];this._grid=[]};
Timeplot.DefaultTimeGeometry.prototype={setTimeplot:function(a){this._timeplot=a;this._canvas=a.getCanvas();this.reset()},setRange:function(a){if(this._min)this._earliestDate=this._min;else if(a.earliestDate&&(this._earliestDate==null||this._earliestDate!=null&&a.earliestDate.getTime()<this._earliestDate.getTime()))this._earliestDate=a.earliestDate;if(this._max)this._latestDate=this._max;else if(a.latestDate&&(this._latestDate==null||this._latestDate!=null&&a.latestDate.getTime()>this._latestDate.getTime()))this._latestDate=
a.latestDate;!this._earliestDate&&!this._latestDate?this._grid=[]:this.reset()},reset:function(){this._updateMappedValues();if(this._canvas)this._grid=this._calculateGrid()},toScreen:function(a){return this._canvas&&this._latestDate?(a-=this._earliestDate.getTime(),this._canvas.width*(this._mappedPeriod>0?this._map.direct(a)/this._mappedPeriod:0)):-50},fromScreen:function(a){return this._canvas?this._map.inverse(this._mappedPeriod*a/this._canvas.width)+this._earliestDate.getTime():0},getPeriod:function(){return this._period},
getLabeler:function(){return this._labeler},getUnit:function(){return this._unit},paint:function(){if(this._canvas){var a=this._canvas.getContext("2d"),b=a.createLinearGradient(0,0,0,this._canvas.height);a.strokeStyle=b;a.lineWidth=this._gridLineWidth;a.lineJoin="miter";if(this._gridColor){b.addColorStop(0,this._gridColor.toString());b.addColorStop(1,"rgba(255,255,255,0.9)");for(var c=0;c<this._grid.length;c++){var d=this._grid[c],f=Math.floor(d.x)+0.5;if(this._axisLabelsPlacement=="top"){var e=this._timeplot.putText(this._id+
"-"+c,d.label,"timeplot-grid-label",{left:f+4,top:2,visibility:"hidden"});this._labels.push(e)}else this._axisLabelsPlacement=="bottom"&&(e=this._timeplot.putText(this._id+"-"+c,d.label,"timeplot-grid-label",{left:f+4,bottom:2,visibility:"hidden"}),this._labels.push(e));if(f+e.clientWidth<this._canvas.width+10)e.style.visibility="visible";a.beginPath();a.moveTo(f,0);a.lineTo(f,this._canvas.height);a.stroke()}}b.addColorStop(0,this._axisColor.toString());b.addColorStop(1,"rgba(255,255,255,0.5)");a.lineWidth=
1;b.addColorStop(0,this._axisColor.toString());a.beginPath();a.moveTo(0,0);a.lineTo(this._canvas.width,0);a.stroke()}},_calculateGrid:function(){var a=[],b=SimileAjax.DateTime,c=this._unit,d=this._period;if(d==0)return a;if(d>b.gregorianUnitLengths[b.MILLENNIUM])f=b.MILLENNIUM;else for(var f=b.MILLENNIUM;f>0;f--)if(b.gregorianUnitLengths[f-1]<=d&&d<b.gregorianUnitLengths[f]){f--;break}d=c.cloneValue(this._earliestDate);do{b.roundDownToInterval(d,f,this._timeZone,1,0);var e=this.toScreen(c.toNumber(d));
switch(f){case b.SECOND:var g=d.toLocaleTimeString();break;case b.MINUTE:g=d.getMinutes();g=d.getHours()+":"+(g<10?"0":"")+g;break;case b.HOUR:g=d.getHours()+":00";break;case b.DAY:case b.WEEK:case b.MONTH:g=d.toLocaleDateString();break;case b.YEAR:case b.DECADE:case b.CENTURY:case b.MILLENNIUM:g=d.getUTCFullYear()}e>0&&a.push({x:e,label:g});b.incrementByInterval(d,f,this._timeZone)}while(d.getTime()<this._latestDate.getTime());return a},_clearLabels:function(){for(var a=0;a<this._labels.length;a++){var b=
this._labels[a],c=b.parentNode;c&&c.removeChild(b)}},_updateMappedValues:function(){this._latestDate&&this._earliestDate?(this._period=this._latestDate.getTime()-this._earliestDate.getTime(),this._mappedPeriod=this._map.direct(this._period)):this._mappedPeriod=this._period=0}};
Timeplot.MagnifyingTimeGeometry=function(a){Timeplot.DefaultTimeGeometry.apply(this,arguments);var b=this;this._MagnifyingMap={direct:function(a){return a<b._leftTimeMargin?a*b._leftRate:b._leftTimeMargin<a&&a<b._rightTimeMargin?a*b._expandedRate+b._expandedTimeTranslation:a*b._rightRate+b._rightTimeTranslation},inverse:function(a){return a<b._leftScreenMargin?a/b._leftRate:b._leftScreenMargin<a&&a<b._rightScreenMargin?a/b._expandedRate+b._expandedScreenTranslation:a/b._rightRate+b._rightScreenTranslation}};
this._mode="lin";this._map=this._linMap};Object.extend(Timeplot.MagnifyingTimeGeometry.prototype,Timeplot.DefaultTimeGeometry.prototype);
Timeplot.MagnifyingTimeGeometry.prototype.initialize=function(a){Timeplot.DefaultTimeGeometry.prototype.initialize.apply(this,arguments);if(!this._lens)this._lens=this._timeplot.putDiv("lens","timeplot-lens");var b=this,c=function(a){var c=a.clientWidth,a=b._timeplot.locate(a);b.setMagnifyingParams(a.x+c/2,c,2592E6);b.actMagnifying();b._timeplot.paint()},d=function(a,c){b._canvas.startCoords=SimileAjax.DOM.getEventRelativeCoordinates(c,a);b._canvas.pressed=!0},f=function(a,d){b._canvas.pressed=!1;
var e=SimileAjax.DOM.getEventRelativeCoordinates(d,a);Timeplot.Math.isClose(e,b._canvas.startCoords,5)?(b._lens.style.display="none",b.actLinear(),b._timeplot.paint()):(b._lens.style.cursor="move",c(b._lens))},e=function(a,c){if(b._canvas.pressed){var d=SimileAjax.DOM.getEventRelativeCoordinates(c,a);if(d.x<0)d.x=0;if(d.x>b._canvas.width)d.x=b._canvas.width;b._timeplot.placeDiv(b._lens,{left:b._canvas.startCoords.x,width:d.x-b._canvas.startCoords.x,bottom:0,height:b._canvas.height,display:"block"})}},
g=function(a,c){b._lens.startCoords=SimileAjax.DOM.getEventRelativeCoordinates(c,a);b._lens.pressed=!0},j=function(){b._lens.pressed=!1},h=function(a,d){if(b._lens.pressed){var e=SimileAjax.DOM.getEventRelativeCoordinates(d,a),h=b._lens,e=h.offsetLeft+e.x-h.startCoords.x;if(e<b._timeplot._paddingX)e=b._timeplot._paddingX;e+h.clientWidth>b._canvas.width-b._timeplot._paddingX&&(e=b._canvas.width-h.clientWidth+b._timeplot._paddingX);h.style.left=e;c(h)}};if(!this._canvas.instrumented)SimileAjax.DOM.registerEvent(this._canvas,
"mousedown",d),SimileAjax.DOM.registerEvent(this._canvas,"mousemove",e),SimileAjax.DOM.registerEvent(this._canvas,"mouseup",f),SimileAjax.DOM.registerEvent(this._canvas,"mouseup",j),this._canvas.instrumented=!0;if(!this._lens.instrumented)SimileAjax.DOM.registerEvent(this._lens,"mousedown",g),SimileAjax.DOM.registerEvent(this._lens,"mousemove",h),SimileAjax.DOM.registerEvent(this._lens,"mouseup",j),SimileAjax.DOM.registerEvent(this._lens,"mouseup",f),this._lens.instrumented=!0};
Timeplot.MagnifyingTimeGeometry.prototype.setMagnifyingParams=function(a,b,c){b/=2;c/=2;var d=this._canvas.width,f=this._period;a<0&&(a=0);a>d&&(a=d);a-b<0&&(b=a);a+b>d&&(b=d-a);var e=this.fromScreen(a)-this._earliestDate.getTime();e-c<0&&(c=e);e+c>f&&(c=f-e);this._centerX=a;this._centerTime=e;this._aperture=b;this._aperturePeriod=c;this._leftScreenMargin=this._centerX-this._aperture;this._rightScreenMargin=this._centerX+this._aperture;this._leftTimeMargin=this._centerTime-this._aperturePeriod;this._rightTimeMargin=
this._centerTime+this._aperturePeriod;this._leftRate=(a-b)/(e-c);this._expandedRate=b/c;this._rightRate=(d-a-b)/(f-e-c);this._expandedTimeTranslation=this._centerX-this._centerTime*this._expandedRate;this._expandedScreenTranslation=this._centerTime-this._centerX/this._expandedRate;this._rightTimeTranslation=a+b-(e+c)*this._rightRate;this._rightScreenTranslation=e+c-(a+b)/this._rightRate;this._updateMappedValues()};
Timeplot.MagnifyingTimeGeometry.prototype.actLinear=function(){this._mode="lin";this._map=this._linMap;this.reset()};Timeplot.MagnifyingTimeGeometry.prototype.actMagnifying=function(){this._mode="Magnifying";this._map=this._MagnifyingMap;this.reset()};Timeplot.MagnifyingTimeGeometry.prototype.toggle=function(){this._mode=="Magnifying"?this.actLinear():this.actMagnifying()};Timeplot.Color=function(a){this._fromHex(a)};
Timeplot.Color.prototype={set:function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d?d:1;return this.check()},transparency:function(a){this.a=a;return this.check()},lighten:function(a){return(new Timeplot.Color).set(this.r+=parseInt(a,10),this.g+=parseInt(a,10),this.b+=parseInt(a,10))},darken:function(a){return(new Timeplot.Color).set(this.r-=parseInt(a,10),this.g-=parseInt(a,10),this.b-=parseInt(a,10))},check:function(){if(this.r>255)this.r=255;else if(this.r<0)this.r=0;if(this.g>255)this.g=255;else if(this.g<
0)this.g=0;if(this.b>255)this.b=255;else if(this.b<0)this.b=0;if(this.a>1)this.a=1;else if(this.a<0)this.a=0;return this},toString:function(a){return"rgba("+this.r+","+this.g+","+this.b+","+(a?a:this.a?this.a:1)+")"},toHexString:function(){return"#"+this._toHex(this.r)+this._toHex(this.g)+this._toHex(this.b)},_fromHex:function(a){if(/^#?([\da-f]{3}|[\da-f]{6})$/i.test(a))a=a.replace(/^#/,"").replace(/^([\da-f])([\da-f])([\da-f])$/i,"$1$1$2$2$3$3"),this.r=parseInt(a.substr(0,2),16),this.g=parseInt(a.substr(2,
2),16),this.b=parseInt(a.substr(4,2),16);else if(/^rgb *\( *\d{0,3} *, *\d{0,3} *, *\d{0,3} *\)$/i.test(a))a=a.match(/^rgb *\( *(\d{0,3}) *, *(\d{0,3}) *, *(\d{0,3}) *\)$/i),this.r=parseInt(a[1],10),this.g=parseInt(a[2],10),this.b=parseInt(a[3],10);this.a=1;return this.check()},_toHex:function(a){if(a<0)return"00";if(a>255)return"FF";var b=a%16;return"0123456789ABCDEF".charAt(Math.floor(a/16))+"0123456789ABCDEF".charAt(b)}};
Timeplot.Math={range:function(a){for(var b=a.length,c=Number.MAX_VALUE,d=Number.MIN_VALUE,f=0;f<b;f++){var e=a[f];e<c&&(c=e);e>d&&(d=e)}return{min:c,max:d}},movingAverage:function(a,b){for(var c=a.length,d=Array(c),f=0;f<c;f++){for(var e=0,g=f-b;g<f+b;g++)e+=g<0?a[0]:g>=c?d[f-1]:a[g];d[f]=e/(2*b)}return d},integral:function(a){for(var b=a.length,c=Array(b),d=0,f=0;f<b;f++)d+=a[f],c[f]=d;return c},normalize:function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=a[d];for(d=0;d<b;d++)a[d]/=c;return a},convolution:function(a,
b){for(var c=a.length,d=b.length,f=Array(c),e=0;e<c;e++){for(var g=0,j=e+d<c?e+d:c,h=e;h<j;h++)g+=a[h-d]*b[h-e];f[e]=g}return f},heavyside:function(a){for(var b=Array(a),c=1/a,d=0;d<a;d++)b[d]=c;return b},gaussian:function(a,b){with(Math)for(var c=a/2,d=c*c/log(b),f=Array(a),e=0;e<a;e++){var g=e-c;f[e]=exp(-d*g*g)}return this.normalize(f)},round:function(a,b){with(Math)if(abs(a)>1){var c=floor(log(a)/log(10)),c=round(exp((c-b+1)*log(10)));return round(round(a/c)*c)}else return log("FIXME(SM): still to implement for 0 < abs(x) < 1"),
a},tanh:function(a){return a>5?1:a<5?-1:(a=Math.exp(2*a),(a-1)/(a+1))},isClose:function(a,b,c){return a&&b&&Math.abs(a.x-b.x)<c&&Math.abs(a.y-b.y)<c}};Timeplot.Operator={sum:function(a){return Timeplot.Math.integral(a.values)},average:function(a,b){return Timeplot.Math.movingAverage(a.values,"size"in b?b.size:30)}};
Timeplot.Processor=function(a,b,c){this._dataSource=a;this._operator=b;this._params=c;this._data={times:[],values:[]};this._range={earliestDate:null,latestDate:null,min:0,max:0};var d=this;this._processingListener={onAddMany:function(){d._process()},onClear:function(){d._clear()}};this.addListener(this._processingListener)};
Timeplot.Processor.prototype={_clear:function(){this.removeListener(this._processingListener);this._dataSource._clear()},_process:function(){var a=this._dataSource.getData(),b=this._dataSource.getRange(),c=this._operator(a,this._params),d=Timeplot.Math.range(c);this._data={times:a.times,values:c};this._range={earliestDate:b.earliestDate,latestDate:b.latestDate,min:d.min,max:d.max}},getRange:function(){return this._range},getData:function(){return this._data},getValue:Timeplot.DataSource.prototype.getValue,
getClosestValidTime:Timeplot.DataSource.prototype.getClosestValidTime,addListener:function(a){this._dataSource.addListener(a)},removeListener:function(a){this._dataSource.removeListener(a)}};Timeline.strings.en={wikiLinkLabel:"Discuss"};Timeline.GregorianDateLabeller.monthNames.en="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");Timeline.GregorianDateLabeller.dayNames.en="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",");(function(a,b){function c(a){return i.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function d(a){if(!la[a]){var b=i("<"+a+">").appendTo("body"),c=b.css("display");b.remove();if(c==="none"||c===""){J||(J=t.createElement("iframe"),J.frameBorder=J.width=J.height=0);t.body.appendChild(J);if(!aa||!J.createElement)aa=(J.contentWindow||J.contentDocument).document,aa.write("<!doctype><html><body></body></html>");b=aa.createElement(a);aa.body.appendChild(b);c=i.css(b,"display");t.body.removeChild(J)}la[a]=
c}return la[a]}function f(a,b){var c={};i.each(ya.concat.apply([],ya.slice(0,b)),function(){c[this]=a});return c}function e(){da=b}function g(){setTimeout(e,0);return da=i.now()}function j(){try{return new a.XMLHttpRequest}catch(b){}}function h(a,b,c,d){if(i.isArray(b))i.each(b,function(b,e){c||Za.test(a)?d(a,e):h(a+"["+(typeof e=="object"||i.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)h(a+"["+e+"]",b[e],c,d);else d(a,b)}function k(a,c,d,e,h,i){h=h||c.dataTypes[0];
i=i||{};i[h]=!0;for(var h=a[h],f=0,g=h?h.length:0,j=a===ma,l;f<g&&(j||!l);f++)l=h[f](c,d,e),typeof l=="string"&&(!j||i[l]?l=b:(c.dataTypes.unshift(l),l=k(a,c,d,e,l,i)));(j||!l)&&!i["*"]&&(l=k(a,c,d,e,"*",i));return l}function l(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(i.isFunction(c))for(var d=b.toLowerCase().split(Ba),e=0,h=d.length,f,g,k;e<h;e++)f=d[e],k=/^\+/.test(f),k&&(f=f.substr(1)||"*"),g=a[f]=a[f]||[],g[k?"unshift":"push"](c)}}function m(a,b,c){var d=b==="width"?a.offsetWidth:
a.offsetHeight;if(c==="border")return d;i.each(b==="width"?$a:ab,function(){c||(d-=parseFloat(i.css(a,"padding"+this))||0);c==="margin"?d+=parseFloat(i.css(a,"margin"+this))||0:d-=parseFloat(i.css(a,"border"+this+"Width"))||0});return d}function p(a,b){b.src?i.ajax({url:b.src,async:!1,dataType:"script"}):i.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bb,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}function r(a){i.nodeName(a,"input")?q(a):a.getElementsByTagName&&i.grep(a.getElementsByTagName("input"),
q)}function q(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function o(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function v(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(c==="option")b.selected=a.defaultSelected;
else{if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(i.expando)}}function s(a,b){if(b.nodeType===1&&i.hasData(a)){var c=i.expando,d=i.data(a),e=i.data(b,d);if(d=d[c]){var h=d.events,e=e[c]=i.extend({},d);if(h){delete e.handle;e.events={};for(var f in h){c=0;for(d=h[f].length;c<d;c++)i.event.add(b,f+(h[f][c].namespace?".":"")+h[f][c].namespace,h[f][c],h[f][c].data)}}}}}function y(a,
b,c){b=b||0;if(i.isFunction(b))return i.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return i.grep(a,function(a){return a===b===c});if(typeof b=="string"){var d=i.grep(a,function(a){return a.nodeType===1});if(cb.test(b))return i.filter(b,d,!c);b=i.filter(b,d)}return i.grep(a,function(a){return i.inArray(a,b)>=0===c})}function u(a,b){return(a&&a!=="*"?a+".":"")+b.replace(db,"`").replace(eb,"&")}function z(a){var b,c,d,e,h,f,g,k,j,l,m,p=[];e=[];g=i._data(this,"events");if(!(a.liveFired===
this||!g||!g.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(m=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;var r=g.live.slice(0);for(g=0;g<r.length;g++)h=r[g],h.origType.replace(ka,"")===a.type?e.push(h.selector):r.splice(g--,1);e=i(a.target).closest(e,a.currentTarget);for(k=0,j=e.length;k<j;k++){l=e[k];for(g=0;g<r.length;g++)if(h=r[g],l.selector===h.selector&&(!m||m.test(h.namespace))&&!l.elem.disabled){f=l.elem;d=null;if(h.preType===
"mouseenter"||h.preType==="mouseleave")a.type=h.preType,d=i(a.relatedTarget).closest(h.selector)[0],d&&i.contains(f,d)&&(d=f);(!d||d!==f)&&p.push({elem:f,handleObj:h,level:l.level})}}for(k=0,j=p.length;k<j;k++){e=p[k];if(c&&e.level>c)break;a.currentTarget=e.elem;a.data=e.handleObj.data;a.handleObj=e.handleObj;h=e.handleObj.origHandler.apply(e.elem,arguments);if(h===!1||a.isPropagationStopped())if(c=e.level,h===!1&&(b=!1),a.isImmediatePropagationStopped())break}return b}}function C(a,c,d){var e=i.extend({},
d[0]);e.type=a;e.originalEvent={};e.liveFired=b;i.event.handle.call(c,e);e.isDefaultPrevented()&&d[0].preventDefault()}function D(){return!0}function A(){return!1}function w(a,c,d){var e=c+"defer",h=c+"queue",f=c+"mark",g=i.data(a,e,b,!0);g&&(d==="queue"||!i.data(a,h,b,!0))&&(d==="mark"||!i.data(a,f,b,!0))&&setTimeout(function(){!i.data(a,h,b,!0)&&!i.data(a,f,b,!0)&&(i.removeData(a,e,!0),g.resolve())},0)}function E(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function B(a,c,d){if(d===b&&a.nodeType===
1)if(d="data-"+c.replace(Ta,"$1-$2").toLowerCase(),d=a.getAttribute(d),typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:i.isNaN(d)?M.test(d)?i.parseJSON(d):d:parseFloat(d)}catch(e){}i.data(a,c,d)}else d=b;return d}var t=a.document,H=a.navigator,F=a.location,i=function(){function c(){if(!d.isReady){try{t.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,i)},e=a.jQuery,h=a.$,i,f=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
g=/\S/,k=/^\s+/,j=/\s+$/,l=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,v=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,y=/(mozilla)(?:.*? rv:([\w.]+))?/,fb=H.userAgent,ea,fa,W,gb=Object.prototype.toString,oa=Object.prototype.hasOwnProperty,pa=Array.prototype.push,ba=Array.prototype.slice,z=String.prototype.trim,u=Array.prototype.indexOf,
A={};d.fn=d.prototype={constructor:d,init:function(a,c,e){var x,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&t.body)return this.context=t,this[0]=t.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?x=f.exec(a):x=[null,a,null];if(x&&(x[1]||!c)){if(x[1])return c=c instanceof d?c[0]:c,i=c?c.ownerDocument||c:t,h=m.exec(a),h?d.isPlainObject(c)?(a=[t.createElement(h[1])],d.fn.attr.call(a,
c,!0)):a=[i.createElement(h[1])]:(h=d.buildFragment([x[1]],[i]),a=(h.cacheable?d.clone(h.fragment):h.fragment).childNodes),d.merge(this,a);if((c=t.getElementById(x[2]))&&c.parentNode){if(c.id!==x[2])return e.find(a);this.length=1;this[0]=c}this.context=t;this.selector=a;return this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}if(d.isFunction(a))return e.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.6.1",
length:0,size:function(){return this.length},toArray:function(){return ba.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?pa.apply(e,a):d.merge(e,a);e.prevObject=this;e.context=this.context;b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")");return e},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady();fa.done(a);
return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ba.apply(this,arguments),"slice",ba.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:pa,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,
c,e,x,h,i,f=arguments[0]||{},g=1,k=arguments.length,O=!1;for(typeof f=="boolean"&&(O=f,f=arguments[1]||{},g=2),typeof f!="object"&&!d.isFunction(f)&&(f={}),k===g&&(f=this,--g);g<k;g++)if((a=arguments[g])!=null)for(c in a)e=f[c],x=a[c],f!==x&&(O&&x&&(d.isPlainObject(x)||(h=d.isArray(x)))?(h?(h=!1,i=e&&d.isArray(e)?e:[]):i=e&&d.isPlainObject(e)?e:{},f[c]=d.extend(O,i,x)):x!==b&&(f[c]=x));return f};d.extend({noConflict:function(b){a.$===d&&(a.$=h);b&&a.jQuery===d&&(a.jQuery=e);return d},isReady:!1,readyWait:1,
holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!t.body)return setTimeout(d.ready,1);d.isReady=!0;a!==!0&&--d.readyWait>0||(fa.resolveWith(t,[d]),d.fn.trigger&&d(t).trigger("ready").unbind("ready"))}},bindReady:function(){if(!fa){fa=d._Deferred();if(t.readyState==="complete")return setTimeout(d.ready,1);if(t.addEventListener)t.addEventListener("DOMContentLoaded",W,!1),a.addEventListener("load",d.ready,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",
W);a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}t.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!l.test(a)||isNaN(a)},type:function(a){return a==null?String(a):A[gb.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;
if(a.constructor&&!oa.call(a,"constructor")&&!oa.call(a.constructor.prototype,"isPrototypeOf"))return!1;for(var c in a);return c===b||oa.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a;},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(p.test(b.replace(r,"@").replace(o,"]").replace(q,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(b,c,e){a.DOMParser?
(e=new DOMParser,c=e.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b));e=c.documentElement;(!e||!e.nodeName||e.nodeName==="parsererror")&&d.error("Invalid XML: "+b);return c},noop:function(){},globalEval:function(b){b&&g.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var x,h=0,i=a.length,f=i===b||d.isFunction(a);if(e)if(f)for(x in a){if(c.apply(a[x],
e)===!1)break}else for(;h<i;){if(c.apply(a[h++],e)===!1)break}else if(f)for(x in a){if(c.call(a[x],x,a[x])===!1)break}else for(;h<i;)if(c.call(a[h],h,a[h++])===!1)break;return a},trim:z?function(a){return a==null?"":z.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(j,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?pa.call(c,a):d.merge(c,a)}return c},inArray:function(a,b){if(u)return u.call(b,
a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var x=c.length;e<x;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){for(var d=[],e,c=!!c,x=0,h=a.length;x<h;x++)e=!!b(a[x],x),c!==e&&d.push(a[x]);return d},map:function(a,c,e){var x,h,i=[],f=0,g=a.length;if(a instanceof d||g!==b&&typeof g=="number"&&(g>0&&a[0]&&a[g-1]||g===0||d.isArray(a)))for(;f<g;f++)x=c(a[f],f,e),x!=
null&&(i[i.length]=x);else for(h in a)x=c(a[h],h,e),x!=null&&(i[i.length]=x);return i.concat.apply([],i)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a;a=e}if(!d.isFunction(a))return b;var x=ba.call(arguments,2),e=function(){return a.apply(c,x.concat(ba.call(arguments)))};e.guid=a.guid=a.guid||e.guid||d.guid++;return e},access:function(a,c,e,x,h,i){var f=a.length;if(typeof c=="object"){for(var g in c)d.access(a,g,c[g],x,h,e);return a}if(e!==b){x=!i&&x&&d.isFunction(e);for(g=0;g<
f;g++)h(a[g],c,x?e.call(a[g],g,h(a[g],c)):e,i);return a}return f?h(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=s.exec(a)||v.exec(a)||w.exec(a)||a.indexOf("compatible")<0&&y.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));
return d.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(t);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){A["[object "+b+"]"]=b.toLowerCase()});ea=d.uaMatch(fb);ea.browser&&(d.browser[ea.browser]=!0,d.browser.version=ea.version);d.browser.webkit&&(d.browser.safari=!0);g.test("\u00a0")&&(k=/^[\s\xA0]+/,j=/[\s\xA0]+$/);i=d(t);t.addEventListener?W=function(){t.removeEventListener("DOMContentLoaded",W,!1);d.ready()}:t.attachEvent&&
(W=function(){t.readyState==="complete"&&(t.detachEvent("onreadystatechange",W),d.ready())});return d}(),K="done fail isResolved isRejected promise then always pipe".split(" "),I=[].slice;i.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,h,f,g,k,O;b&&(O=b,b=0);for(h=0,f=c.length;h<f;h++)g=c[h],k=i.type(g),k==="array"?e.done.apply(e,g):k==="function"&&a.push(g);O&&e.resolveWith(O[0],O[1])}return this},resolveWith:function(e,h){if(!d&&!b&&!c){h=h||[];c=1;try{for(;a[0];)a.shift().apply(e,
h)}finally{b=[e,h],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1;a=[];return this}};return e},Deferred:function(a){var b=i._Deferred(),c=i._Deferred(),d;i.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return i.Deferred(function(d){i.each({done:[a,
"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],x=c[1],h;i.isFunction(e)?b[a](function(){h=e.apply(this,arguments);h&&i.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[x](h)}):b[a](d[x])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}for(var c=K.length;c--;)a[K[c]]=b[K[c]];return a}});b.done(c.cancel).fail(b.cancel);delete b.cancel;a&&a.call(b,b);return b},when:function(a){function b(a){return function(b){c[a]=arguments.length>1?I.call(arguments,0):b;--h||
f.resolveWith(f,I.call(c,0))}}var c=arguments,d=0,e=c.length,h=e,f=e<=1&&a&&i.isFunction(a.promise)?a:i.Deferred();if(e>1){for(;d<e;d++)c[d]&&i.isFunction(c[d].promise)?c[d].promise().then(b(d),f.reject):--h;h||f.resolveWith(f,c)}else f!==a&&f.resolveWith(f,e?[a]:[]);return f.promise()}});i.support=function(){var a=t.createElement("div"),b=t.documentElement,c,d,e,h,i,f,g,k,j,l,m,p;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
c=a.getElementsByTagName("*");d=a.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=t.createElement("select");h=e.appendChild(t.createElement("option"));i=a.getElementsByTagName("input")[0];g={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55$/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,
checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0};i.checked=!0;g.noCloneChecked=i.cloneNode(!0).checked;e.disabled=!0;g.optDisabled=!h.disabled;try{delete a.test}catch(r){g.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function na(){g.noCloneEvent=!1;a.detachEvent("onclick",
na)}),a.cloneNode(!0).fireEvent("onclick"));i=t.createElement("input");i.value="t";i.setAttribute("type","radio");g.radioValue=i.value==="t";i.setAttribute("checked","checked");a.appendChild(i);k=t.createDocumentFragment();k.appendChild(a.firstChild);g.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";c=t.createElement("body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(m in d)c.style[m]=d[m];c.appendChild(a);
b.insertBefore(c,b.firstChild);g.appendChecked=i.checked;g.boxModel=a.offsetWidth===2;"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,g.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",g.shrinkWrapBlocks=a.offsetWidth!==2);a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";j=a.getElementsByTagName("td");p=j[0].offsetHeight===0;j[0].style.display="";j[1].style.display="none";g.reliableHiddenOffsets=
p&&j[0].offsetHeight===0;a.innerHTML="";t.defaultView&&t.defaultView.getComputedStyle&&(f=t.createElement("div"),f.style.width="0",f.style.marginRight="0",a.appendChild(f),g.reliableMarginRight=(parseInt((t.defaultView.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);c.innerHTML="";b.removeChild(c);if(a.attachEvent)for(m in{submit:1,change:1,focusin:1})l="on"+m,p=l in a,p||(a.setAttribute(l,"return;"),p=typeof a[l]=="function"),g[m+"Bubbles"]=p;return g}();i.boxModel=i.support.boxModel;
var M=/^(?:\{.*\}|\[.*\])$/,Ta=/([a-z])([A-Z])/g;i.extend({cache:{},uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?i.cache[a[i.expando]]:a[i.expando];return!!a&&!E(a)},data:function(a,c,d,e){if(i.acceptData(a)){var h=i.expando,f=typeof c=="string",g,k=a.nodeType,j=k?i.cache:a,l=k?a[i.expando]:a[i.expando]&&i.expando;if(l&&(!e||!l||j[l][h])||!(f&&d===b)){l||(k?a[i.expando]=
l=++i.uuid:l=i.expando);j[l]||(j[l]={},k||(j[l].toJSON=i.noop));if(typeof c=="object"||typeof c=="function")e?j[l][h]=i.extend(j[l][h],c):j[l]=i.extend(j[l],c);g=j[l];e&&(g[h]||(g[h]={}),g=g[h]);d!==b&&(g[i.camelCase(c)]=d);return c==="events"&&!g[c]?g[h]&&g[h].events:f?g[i.camelCase(c)]:g}}},removeData:function(b,c,d){if(i.acceptData(b)){var e=i.expando,h=b.nodeType,f=h?i.cache:b,g=h?b[i.expando]:i.expando;if(f[g]){if(c){var k=d?f[g][e]:f[g];if(k&&(delete k[c],!E(k)))return}if(d&&(delete f[g][e],
!E(f[g])))return;c=f[g][e];i.support.deleteExpando||f!=a?delete f[g]:f[g]=null;c?(f[g]={},h||(f[g].toJSON=i.noop),f[g][e]=c):h&&(i.support.deleteExpando?delete b[i.expando]:b.removeAttribute?b.removeAttribute(i.expando):b[i.expando]=null)}}},_data:function(a,b,c){return i.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=i.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}});i.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length&&
(d=i.data(this[0]),this[0].nodeType===1))for(var e=this[0].attributes,h,f=0,g=e.length;f<g;f++)h=e[f].name,h.indexOf("data-")===0&&(h=i.camelCase(h.substring(5)),B(this[0],h,d[h]));return d}if(typeof a=="object")return this.each(function(){i.data(this,a)});var k=a.split(".");k[1]=k[1]?"."+k[1]:"";return c===b?(d=this.triggerHandler("getData"+k[1]+"!",[k[0]]),d===b&&this.length&&(d=i.data(this[0],a),d=B(this[0],a,d)),d===b&&k[1]?this.data(k[0]):d):this.each(function(){var b=i(this),d=[k[0],c];b.triggerHandler("setData"+
k[1]+"!",d);i.data(this,a,c);b.triggerHandler("changeData"+k[1]+"!",d)})},removeData:function(a){return this.each(function(){i.removeData(this,a)})}});i.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",i.data(a,c,(i.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){var d=d||"fx",e=d+"mark";(a=a?0:(i.data(c,e,b,!0)||1)-1)?i.data(c,e,a,!0):(i.removeData(c,e,!0),w(c,d,"mark"))}},queue:function(a,c,d){if(a){var c=(c||"fx")+"queue",e=i.data(a,c,b,!0);d&&(!e||i.isArray(d)?
e=i.data(a,c,i.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){var b=b||"fx",c=i.queue(a,b),d=c.shift();d==="inprogress"&&(d=c.shift());d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){i.dequeue(a,b)}));c.length||(i.removeData(a,b+"queue",!0),w(a,b,"queue"))}});i.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");return c===b?i.queue(this[0],a):this.each(function(){var b=i.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&i.dequeue(this,a)})},dequeue:function(a){return this.each(function(){i.dequeue(this,
a)})},delay:function(a,b){a=i.fx?i.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){i.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a){function c(){--f||d.resolveWith(e,[e])}typeof a!="string"&&(a=b);a=a||"fx";var d=i.Deferred(),e=this,h=e.length,f=1,g=a+"defer",k=a+"queue";a+="mark";for(var j;h--;)if(j=i.data(e[h],g,b,!0)||(i.data(e[h],k,b,!0)||i.data(e[h],a,b,!0))&&i.data(e[h],g,i._Deferred(),!0))f++,j.done(c);
c();return d.promise()}});var va=/[\n\t\r]/g,ja=/\s+/,Ua=/\r/g,Va=/^(?:button|input)$/i,Wa=/^(?:button|input|object|select|textarea)$/i,Xa=/^a(?:rea)?$/i,xa=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ya=/\:/,R,wa;i.fn.extend({attr:function(a,b){return i.access(this,a,b,!0,i.attr)},removeAttr:function(a){return this.each(function(){i.removeAttr(this,a)})},prop:function(a,b){return i.access(this,a,b,!0,i.prop)},removeProp:function(a){a=
i.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){if(i.isFunction(a))return this.each(function(b){var c=i(this);c.addClass(a.call(this,b,c.attr("class")||""))});if(a&&typeof a=="string")for(var b=(a||"").split(ja),c=0,d=this.length;c<d;c++){var e=this[c];if(e.nodeType===1)if(e.className){for(var h=" "+e.className+" ",f=e.className,g=0,k=b.length;g<k;g++)h.indexOf(" "+b[g]+" ")<0&&(f+=" "+b[g]);e.className=i.trim(f)}else e.className=a}return this},
removeClass:function(a){if(i.isFunction(a))return this.each(function(b){var c=i(this);c.removeClass(a.call(this,b,c.attr("class")))});if(a&&typeof a=="string"||a===b)for(var c=(a||"").split(ja),d=0,e=this.length;d<e;d++){var h=this[d];if(h.nodeType===1&&h.className)if(a){for(var f=(" "+h.className+" ").replace(va," "),g=0,k=c.length;g<k;g++)f=f.replace(" "+c[g]+" "," ");h.className=i.trim(f)}else h.className=""}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return i.isFunction(a)?
this.each(function(c){var d=i(this);d.toggleClass(a.call(this,c,d.attr("class"),b),b)}):this.each(function(){if(c==="string")for(var e,h=0,f=i(this),g=b,k=a.split(ja);e=k[h++];)g=d?g:!f.hasClass(e),f[g?"addClass":"removeClass"](e);else if(c==="undefined"||c==="boolean")this.className&&i._data(this,"__className__",this.className),this.className=this.className||a===!1?"":i._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if((" "+this[b].className+
" ").replace(va," ").indexOf(a)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length)return e?(c=i.valHooks[e.nodeName.toLowerCase()]||i.valHooks[e.type])&&"get"in c&&(d=c.get(e,"value"))!==b?d:(e.value||"").replace(Ua,""):b;var h=i.isFunction(a);return this.each(function(d){var e=i(this),f;if(this.nodeType===1&&(h?f=a.call(this,d,e.val()):f=a,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(a){return a==null?"":a+""})),c=i.valHooks[this.nodeName.toLowerCase()]||
i.valHooks[this.type],!c||!("set"in c)||c.set(this,f,"value")===b))this.value=f})}});i.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,a=a.type==="select-one";if(c<0)return null;for(var h=a?c:0,f=a?c+1:e.length;h<f;h++)if(b=e[h],b.selected&&(i.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&(!b.parentNode.disabled||!i.nodeName(b.parentNode,"optgroup"))){b=
i(b).val();if(a)return b;d.push(b)}return a&&!d.length&&e.length?i(e[c]).val():d},set:function(a,b){var c=i.makeArray(b);i(a).find("option").each(function(){this.selected=i.inArray(i(this).val(),c)>=0});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var h=a.nodeType;if(!a||h===3||h===8||h===2)return b;if(e&&c in i.attrFn)return i(a)[c](d);if(!("getAttribute"in a))return i.prop(a,
c,d);var f,g,e=h!==1||!i.isXMLDoc(a);c=e&&i.attrFix[c]||c;g=i.attrHooks[c];g||(!xa.test(c)||typeof d!="boolean"&&d!==b&&d.toLowerCase()!==c.toLowerCase()?R&&(i.nodeName(a,"form")||Ya.test(c))&&(g=R):g=wa);if(d!==b){if(d===null)return i.removeAttr(a,c),b;if(g&&"set"in g&&e&&(f=g.set(a,d,c))!==b)return f;a.setAttribute(c,""+d);return d}if(g&&"get"in g&&e)return g.get(a,c);f=a.getAttribute(c);return f===null?b:f},removeAttr:function(a,b){var c;a.nodeType===1&&(b=i.attrFix[b]||b,i.support.getSetAttribute?
a.removeAttribute(b):(i.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),xa.test(b)&&(c=i.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(Va.test(a.nodeName)&&a.parentNode)i.error("type property can't be changed");else if(!i.support.radioValue&&b==="radio"&&i.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):Wa.test(a.nodeName)||
Xa.test(a.nodeName)&&a.href?0:b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var h;c=(e!==1||!i.isXMLDoc(a))&&i.propFix[c]||c;e=i.propHooks[c];return d!==b?e&&"set"in e&&(h=e.set(a,d,c))!==b?h:a[c]=
d:e&&"get"in e&&(h=e.get(a,c))!==b?h:a[c]},propHooks:{}});wa={get:function(a,c){return a[i.propFix[c]||c]?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?i.removeAttr(a,c):(d=i.propFix[c]||c,d in a&&(a[d]=b),a.setAttribute(c,c.toLowerCase()));return c}};i.attrHooks.value={get:function(a,b){return R&&i.nodeName(a,"button")?R.get(a,b):a.value},set:function(a,b,c){if(R&&i.nodeName(a,"button"))return R.set(a,b,c);a.value=b}};i.support.getSetAttribute||(i.attrFix=i.propFix,R=i.attrHooks.name=i.valHooks.button=
{get:function(a,c){var d;return(d=a.getAttributeNode(c))&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){if(a=a.getAttributeNode(c))return a.nodeValue=b}},i.each(["width","height"],function(a,b){i.attrHooks[b]=i.extend(i.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}));i.support.hrefNormalized||i.each(["href","src","width","height"],function(a,c){i.attrHooks[c]=i.extend(i.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return a===null?b:a}})});i.support.style||
(i.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}});i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(){}}));i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(a,b){if(i.isArray(b))return a.checked=
i.inArray(i(a).val(),b)>=0}})});var ka=/\.(.*)$/,qa=/^(?:textarea|input|select)$/i,db=/\./g,eb=/ /g,hb=/[^\w\s.|`]/g,ib=function(a){return a.replace(hb,"\\$&")};i.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=A;else if(!d)return;var h,f;d.handler&&(h=d,d=h.handler);d.guid||(d.guid=i.guid++);var g=i._data(a);if(g){var k=g.events,j=g.handle;k||(g.events=k={});j||(g.handle=j=function(a){return typeof i!="undefined"&&(!a||i.event.triggered!==a.type)?i.event.handle.apply(j.elem,
arguments):b});j.elem=a;c=c.split(" ");for(var l=0,m;g=c[l++];){f=h?i.extend({},h):{handler:d,data:e};g.indexOf(".")>-1?(m=g.split("."),g=m.shift(),f.namespace=m.slice(0).sort().join(".")):(m=[],f.namespace="");f.type=g;f.guid||(f.guid=d.guid);var p=k[g],r=i.event.special[g]||{};if(!p&&(p=k[g]=[],!r.setup||r.setup.call(a,e,m,j)===!1))a.addEventListener?a.addEventListener(g,j,!1):a.attachEvent&&a.attachEvent("on"+g,j);r.add&&(r.add.call(a,f),f.handler.guid||(f.handler.guid=d.guid));p.push(f);i.event.global[g]=
!0}a=null}}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=A);var h,f,g=0,k,j,l,m,p,r,o=i.hasData(a)&&i._data(a),q=o&&o.events;if(o&&q)if(c&&c.type&&(d=c.handler,c=c.type),!c||typeof c=="string"&&c.charAt(0)===".")for(h in c=c||"",q)i.event.remove(a,h+c);else{for(c=c.split(" ");h=c[g++];)if(m=h,k=h.indexOf(".")<0,j=[],k||(j=h.split("."),h=j.shift(),l=RegExp("(^|\\.)"+i.map(j.slice(0).sort(),ib).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=q[h],p)if(d){m=i.event.special[h]||
{};for(f=e||0;f<p.length;f++)if(r=p[f],d.guid===r.guid){if(k||l.test(r.namespace))e==null&&p.splice(f--,1),m.remove&&m.remove.call(a,r);if(e!=null)break}if(p.length===0||e!=null&&p.length===1)(!m.teardown||m.teardown.call(a,j)===!1)&&i.removeEvent(a,h,o.handle),delete q[h]}else for(f=0;f<p.length;f++)if(r=p[f],k||l.test(r.namespace))i.event.remove(a,m,r.handler,f),p.splice(f--,1);if(i.isEmptyObject(q))c=o.handle,c&&(c.elem=null),delete o.events,delete o.handle,i.isEmptyObject(o)&&i.removeData(a,b,
!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,h){var f=c.type||c,g=[],k;f.indexOf("!")>=0&&(f=f.slice(0,-1),k=!0);f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort());if(e&&!i.event.customEvent[f]||i.event.global[f]){c=typeof c=="object"?c[i.expando]?c:new i.Event(f,c):new i.Event(f);c.type=f;c.exclusive=k;c.namespace=g.join(".");c.namespace_re=RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)");if(h||!e)c.preventDefault(),c.stopPropagation();if(e){if(!(e.nodeType===
3||e.nodeType===8)){c.result=b;c.target=e;d=d?i.makeArray(d):[];d.unshift(c);g=e;h=f.indexOf(":")<0?"on"+f:"";do k=i._data(g,"handle"),c.currentTarget=g,k&&k.apply(g,d),h&&i.acceptData(g)&&g[h]&&g[h].apply(g,d)===!1&&(c.result=!1,c.preventDefault()),g=g.parentNode||g.ownerDocument||g===c.target.ownerDocument&&a;while(g&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var j,g=i.event.special[f]||{};if((!g._default||g._default.call(e.ownerDocument,c)===!1)&&(f!=="click"||!i.nodeName(e,"a"))&&
i.acceptData(e)){try{h&&e[f]&&(j=e[h],j&&(e[h]=null),i.event.triggered=f,e[f]())}catch(l){}j&&(e[h]=j);i.event.triggered=b}}return c.result}}else i.each(i.cache,function(){var a=this[i.expando];a&&a.events&&a.events[f]&&i.event.trigger(c,d,a.handle.elem)})}},handle:function(c){var c=i.event.fix(c||a.event),d=((i._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,h=Array.prototype.slice.call(arguments,0);h[0]=c;c.currentTarget=this;for(var f=0,g=d.length;f<g;f++){var k=d[f];
if(e||c.namespace_re.test(k.namespace))if(c.handler=k.handler,c.data=k.data,c.handleObj=k,k=k.handler.apply(this,h),k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation())),c.isImmediatePropagationStopped())break}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[i.expando])return a;for(var c=a,a=i.Event(c),d=this.props.length,e;d;)e=this.props[--d],a[e]=c[e];a.target||(a.target=a.srcElement||t);a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null)d=a.target.ownerDocument||t,c=d.documentElement,d=d.body,a.pageX=a.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),a.pageY=
a.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0);a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:i.proxy,special:{ready:{setup:i.bindReady,teardown:i.noop},live:{add:function(a){i.event.add(this,u(a.origType,a.selector),i.extend({},a,{handler:z,guid:a.handler.guid}))},remove:function(a){i.event.remove(this,
u(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){i.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}};i.removeEvent=t.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};i.Event=function(a,b){if(!this.preventDefault)return new i.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||
a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?D:A):this.type=a;b&&i.extend(this,b);this.timeStamp=i.now();this[i.expando]=!0};i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=D;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=
D;this.stopPropagation()},isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A};var Ca=function(a){var b=a.relatedTarget;a.type=a.data;try{if(!b||b===t||b.parentNode){for(;b&&b!==this;)b=b.parentNode;b!==this&&i.event.handle.apply(this,arguments)}}catch(c){}},Da=function(a){a.type=a.data;i.event.handle.apply(this,arguments)};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){i.event.special[a]={setup:function(c){i.event.add(this,b,c&&c.selector?Da:Ca,a)},teardown:function(a){i.event.remove(this,
b,a&&a.selector?Da:Ca)}}});i.support.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;else i.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&i(b).closest("form").length&&C("submit",this,arguments)}),i.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&i(b).closest("form").length&&a.keyCode===13&&C("submit",this,arguments)})},teardown:function(){i.event.remove(this,
".specialSubmit")}});if(!i.support.changeBubbles){var ca,Ea=function(a){var b=a.type,c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?i.map(a.options,function(a){return a.selected}).join("-"):"":i.nodeName(a,"select")&&(c=a.selectedIndex);return c},ga=function(a,c){var d=a.target,e,h;if(qa.test(d.nodeName)&&!d.readOnly&&(e=i._data(d,"_change_data"),h=Ea(d),(a.type!=="focusout"||d.type!=="radio")&&i._data(d,"_change_data",h),!(e===b||h===e)))if(e!=null||
h)a.type="change",a.liveFired=b,i.event.trigger(a,c,d)};i.event.special.change={filters:{focusout:ga,beforedeactivate:ga,click:function(a){var b=a.target,c=i.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||i.nodeName(b,"select"))&&ga.call(this,a)},keydown:function(a){var b=a.target,c=i.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!i.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&ga.call(this,a)},beforeactivate:function(a){a=a.target;i._data(a,
"_change_data",Ea(a))}},setup:function(){if(this.type==="file")return!1;for(var a in ca)i.event.add(this,a+".specialChange",ca[a]);return qa.test(this.nodeName)},teardown:function(){i.event.remove(this,".specialChange");return qa.test(this.nodeName)}};ca=i.event.special.change.filters;ca.focus=ca.beforeactivate}i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){var d=i.event.fix(a);d.type=b;d.originalEvent={};i.event.trigger(d,null,d.target);d.isDefaultPrevented()&&
a.preventDefault()}var d=0;i.event.special[b]={setup:function(){d++===0&&t.addEventListener(a,c,!0)},teardown:function(){--d===0&&t.removeEventListener(a,c,!0)}}});i.each(["bind","one"],function(a,c){i.fn[c]=function(a,d,e){var h;if(typeof a=="object"){for(var f in a)this[c](f,d,a[f],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(h=function(a){i(this).unbind(a,h);return e.apply(this,arguments)},h.guid=e.guid||i.guid++):h=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else{f=0;for(var g=
this.length;f<g;f++)i.event.add(this[f],a,h,d)}return this}});i.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else{c=0;for(var d=this.length;c<d;c++)i.event.remove(this[c],a,b)}return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){i.event.trigger(a,b,this)})},triggerHandler:function(a,
b){if(this[0])return i.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||i.guid++,d=0,e=function(c){var e=(i.data(this,"lastToggle"+a.guid)||0)%d;i.data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var ra={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};i.each(["live","die"],
function(a,c){i.fn[c]=function(a,d,e,h){var f=0,g,k,x,j=h||this.selector,l=h?this:i(this.context);if(typeof a=="object"&&!a.preventDefault){for(x in a)l[c](x,d,a[x],j);return this}if(c==="die"&&!a&&h&&h.charAt(0)===".")return l.unbind(h),this;if(d===!1||i.isFunction(d))e=d||A,d=b;for(a=(a||"").split(" ");(h=a[f++])!=null;)if(g=ka.exec(h),k="",g&&(k=g[0],h=h.replace(ka,"")),h==="hover")a.push("mouseenter"+k,"mouseleave"+k);else if(x=h,ra[h]?(a.push(ra[h]+k),h+=k):h=(ra[h]||h)+k,c==="live"){k=0;for(var m=
l.length;k<m;k++)i.event.add(l[k],"live."+u(h,j),{data:d,selector:j,handler:e,origType:h,origHandler:e,preType:x})}else l.unbind("live."+u(h,j),e);return this}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){i.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)};i.attrFn&&(i.attrFn[b]=
!0)});(function(){function a(b,c,d,e,h,f){for(var h=0,i=e.length;h<i;h++){var g=e[h];if(g){for(var k=!1,g=g[b];g;){if(g.sizcache===d){k=e[g.sizset];break}if(g.nodeType===1)if(f||(g.sizcache=d,g.sizset=h),typeof c!="string"){if(g===c){k=!0;break}}else if(l.filter(c,[g]).length>0){k=g;break}g=g[b]}e[h]=k}}}function c(a,b,d,e,h,f){for(var h=0,i=e.length;h<i;h++){var g=e[h];if(g){for(var k=!1,g=g[a];g;){if(g.sizcache===d){k=e[g.sizset];break}g.nodeType===1&&!f&&(g.sizcache=d,g.sizset=h);if(g.nodeName.toLowerCase()===
b){k=g;break}g=g[a]}e[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,h=Object.prototype.toString,f=!1,g=!0,k=/\\/g,j=/\W/;[0,0].sort(function(){g=!1;return 0});var l=function(a,b,c,e){c=c||[];b=b||t;var f=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var i,g,k,x,j,N,P,r=!0,o=l.isXML(b),G=[],za=a;do if(d.exec(""),i=d.exec(za),i&&(za=i[3],G.push(i[1]),i[2])){x=i[3];
break}while(i);if(G.length>1&&p.exec(a))if(G.length===2&&m.relative[G[0]])g=y(G[0]+G[1],b);else for(g=m.relative[G[0]]?[b]:l(G.shift(),b);G.length;)a=G.shift(),m.relative[a]&&(a+=G.shift()),g=y(a,g);else if(!e&&G.length>1&&b.nodeType===9&&!o&&m.match.ID.test(G[0])&&!m.match.ID.test(G[G.length-1])&&(j=l.find(G.shift(),b,o),b=j.expr?l.filter(j.expr,j.set)[0]:j.set[0]),b)for(j=e?{expr:G.pop(),set:q(e)}:l.find(G.pop(),G.length===1&&(G[0]==="~"||G[0]==="+")&&b.parentNode?b.parentNode:b,o),g=j.expr?l.filter(j.expr,
j.set):j.set,G.length>0?k=q(g):r=!1;G.length;)N=G.pop(),P=N,m.relative[N]?P=G.pop():N="",P==null&&(P=b),m.relative[N](k,P,o);else k=[];k||(k=g);k||l.error(N||a);if(h.call(k)==="[object Array]")if(r)if(b&&b.nodeType===1)for(a=0;k[a]!=null;a++)k[a]&&(k[a]===!0||k[a].nodeType===1&&l.contains(b,k[a]))&&c.push(g[a]);else for(a=0;k[a]!=null;a++)k[a]&&k[a].nodeType===1&&c.push(g[a]);else c.push.apply(c,k);else q(k,c);x&&(l(x,f,c,e),l.uniqueSort(c));return c};l.uniqueSort=function(a){if(v&&(f=g,a.sort(v),
f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};l.matches=function(a,b){return l(a,null,null,b)};l.matchesSelector=function(a,b){return l(b,null,null,[a]).length>0};l.find=function(a,b,c){var d;if(!a)return[];for(var e=0,h=m.order.length;e<h;e++){var f,i=m.order[e];if(f=m.leftMatch[i].exec(a)){var g=f[1];f.splice(1,1);if(g.substr(g.length-1)!=="\\"&&(f[1]=(f[1]||"").replace(k,""),d=m.find[i](f,b,c),d!=null)){a=a.replace(m.match[i],"");break}}}d||(d=typeof b.getElementsByTagName!=
"undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};l.filter=function(a,c,d,e){for(var h,f,i=a,g=[],k=c,x=c&&c[0]&&l.isXML(c[0]);a&&c.length;){for(var j in m.filter)if((h=m.leftMatch[j].exec(a))!=null&&h[2]){var N,P,O=m.filter[j];P=h[1];f=!1;h.splice(1,1);if(P.substr(P.length-1)!=="\\"){k===g&&(g=[]);if(m.preFilter[j])if(h=m.preFilter[j](h,k,d,g,e,x)){if(h===!0)continue}else f=N=!0;if(h)for(var p=0;(P=k[p])!=null;p++)if(P){N=O(P,h,p,k);var Aa=e^!!N;d&&N!=null?Aa?f=!0:k[p]=!1:Aa&&(g.push(P),
f=!0)}if(N!==b){d||(k=g);a=a.replace(m.match[j],"");if(!f)return[];break}}}if(a===i)if(f==null)l.error(a);else break;i=a}return k};l.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var m=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=
typeof b=="string",d=c&&!j.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,h;d<e;d++)if(h=a[d]){for(;(h=h.previousSibling)&&h.nodeType!==1;);a[d]=c||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}c&&l.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,h=a.length;if(d&&!j.test(b))for(b=b.toLowerCase();e<h;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<h;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&l.filter(b,a,!0)}},"":function(b,
d,h){var f,i=e++,g=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),f=d,g=c);g("parentNode",d,i,b,f,h)},"~":function(b,d,h){var f,i=e++,g=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),f=d,g=c);g("previousSibling",d,i,b,f,h)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){for(var c=[],d=b.getElementsByName(a[1]),e=0,h=d.length;e<h;e++)d[e].getAttribute("name")===
a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,h){a=" "+a[1].replace(k,"")+" ";if(h)return a;for(var h=0,f;(f=b[h])!=null;h++)f&&(e^(f.className&&(" "+f.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(f):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(k,"")},TAG:function(a){return a[1].replace(k,"").toLowerCase()},CHILD:function(a){if(a[1]===
"nth"){a[2]||l.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&l.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,h){b=a[1]=a[1].replace(k,"");!h&&m.attrMap[b]&&(a[1]=m.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(k,"");a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,h){if(a[1]==="not")if((d.exec(a[3])||"").length>1||
/^\w/.test(a[3]))a[3]=l(a[3],null,null,b);else return a=l.filter(a[3],b,c,1^h),c||e.push.apply(e,a),!1;else if(m.match.POS.test(a[0])||m.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()===
"input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],h=m.filters[e];if(h)return h(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||l.getText([a])||"").indexOf(b[3])>=
0;if(e==="not"){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}l.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case "only":case "first":for(;d=d.previousSibling;)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case "last":for(;d=d.nextSibling;)if(d.nodeType===1)return!1;return!0;case "nth":var c=b[2],e=b[3];if(c===1&&e===0)return!0;var h=b[0],f=a.parentNode;if(f&&(f.sizcache!==h||!a.nodeIndex)){for(var i=0,d=f.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=
++i);f.sizcache=h}d=a.nodeIndex-e;return c===0?d===0:d%c===0&&d/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],c=m.attrHandle[c]?m.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),d=c+"",e=b[2],h=b[4];return c==null?e==="!=":e==="="?d===h:e==="*="?d.indexOf(h)>=0:e==="~="?
(" "+d+" ").indexOf(h)>=0:h?e==="!="?d!==h:e==="^="?d.indexOf(h)===0:e==="$="?d.substr(d.length-h.length)===h:e==="|="?d===h||d.substr(0,h.length+1)===h+"-":!1:d&&c!==!1},POS:function(a,b,c,d){var e=m.setFilters[b[2]];if(e)return e(a,c,b,d)}}},p=m.match.POS,r=function(a,b){return"\\"+(b-0+1)},o;for(o in m.match)m.match[o]=RegExp(m.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),m.leftMatch[o]=RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[o].source.replace(/\\(\d+)/g,r));var q=function(a,b){a=Array.prototype.slice.call(a,
0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(t.documentElement.childNodes,0)}catch(s){q=function(a,b){var c=0,d=b||[];if(h.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var v,w;t.documentElement.compareDocumentPosition?v=function(a,b){return a===b?(f=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&
4?-1:1}:(v=function(a,b){if(a===b)return f=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],h=[];c=a.parentNode;d=b.parentNode;var i=c;if(c===d)return w(a,b);if(!c)return-1;if(!d)return 1;for(;i;)e.unshift(i),i=i.parentNode;for(i=d;i;)h.unshift(i),i=i.parentNode;c=e.length;d=h.length;for(i=0;i<c&&i<d;i++)if(e[i]!==h[i])return w(e[i],h[i]);return i===c?w(a,h[i],-1):w(e[i],b,1)},w=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});
l.getText=function(a){for(var b="",c,d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=l.getText(c.childNodes));return b};(function(){var a=t.createElement("div"),c="script"+(new Date).getTime(),d=t.documentElement;a.innerHTML="<a name='"+c+"'/>";d.insertBefore(a,d.firstChild);t.getElementById(c)&&(m.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d)return(c=c.getElementById(a[1]))?c.id===a[1]||typeof c.getAttributeNode!="undefined"&&c.getAttributeNode("id").nodeValue===
a[1]?[c]:b:[]},m.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b});d.removeChild(a);d=a=null})();(function(){var a=t.createElement("div");a.appendChild(t.createComment(""));a.getElementsByTagName("*").length>0&&(m.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var d=[],e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&typeof a.firstChild.getAttribute!=
"undefined"&&a.firstChild.getAttribute("href")!=="#"&&(m.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();t.querySelectorAll&&function(){var a=l,b=t.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){l=function(b,c,d,e){c=c||t;if(!e&&!l.isXML(c)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(c.nodeType===1||c.nodeType===9)){if(h[1])return q(c.getElementsByTagName(b),d);if(h[2]&&m.find.CLASS&&c.getElementsByClassName)return q(c.getElementsByClassName(h[2]),
d)}if(c.nodeType===9){if(b==="body"&&c.body)return q([c.body],d);if(h&&h[3]){var f=c.getElementById(h[3]);if(!f||!f.parentNode)return q([],d);if(f.id===h[3])return q([f],d)}try{return q(c.querySelectorAll(b),d)}catch(i){}}else if(c.nodeType===1&&c.nodeName.toLowerCase()!=="object"){var h=c,g=(f=c.getAttribute("id"))||"__sizzle__",k=c.parentNode,x=/^\s*[+~]/.test(b);f?g=g.replace(/'/g,"\\$&"):c.setAttribute("id",g);x&&k&&(c=c.parentNode);try{if(!x||k)return q(c.querySelectorAll("[id='"+g+"'] "+b),
d)}catch(j){}finally{f||h.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)l[c]=a[c];b=null}}();(function(){var a=t.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(t.createElement("div"),"div"),d=!1;try{b.call(t.documentElement,"[test!='']:sizzle")}catch(e){d=!0}l.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(a))try{if(d||!m.match.PSEUDO.test(e)&&!/!=/.test(e)){var h=b.call(a,
e);if(h||!c||a.document&&a.document.nodeType!==11)return h}}catch(f){}return l(e,null,null,[a]).length>0}}})();(function(){var a=t.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0&&(a.lastChild.className="e",a.getElementsByClassName("e").length!==1))m.order.splice(1,0,"CLASS"),m.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},
a=null})();t.documentElement.contains?l.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:t.documentElement.compareDocumentPosition?l.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:l.contains=function(){return!1};l.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":!1};var y=function(a,b){for(var c,d=[],e="",h=b.nodeType?[b]:b;c=m.match.PSEUDO.exec(a);)e+=c[0],a=a.replace(m.match.PSEUDO,"");a=m.relative[a]?a+"*":a;c=0;for(var f=
h.length;c<f;c++)l(a,h[c],d);return l.filter(e,d)};i.find=l;i.expr=l.selectors;i.expr[":"]=i.expr.filters;i.unique=l.uniqueSort;i.text=l.getText;i.isXMLDoc=l.isXML;i.contains=l.contains})();var jb=/Until$/,kb=/^(?:parents|prevUntil|prevAll)/,lb=/,/,cb=/^.[^:#\[\.,]*$/,mb=Array.prototype.slice,Fa=i.expr.match.POS,nb={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return i(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(i.contains(b[c],
this))return!0});var e=this.pushStack("","find",a),h,f,g;for(c=0,d=this.length;c<d;c++)if(h=e.length,i.find(a,this[c],e),c>0)for(f=h;f<e.length;f++)for(g=0;g<h;g++)if(e[g]===e[f]){e.splice(f--,1);break}return e},has:function(a){var b=i(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(i.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(y(this,a,!1),"not",a)},filter:function(a){return this.pushStack(y(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a==
"string"?i.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,h=this[0];if(i.isArray(a)){var f,g,k={},j=1;if(h&&a.length){for(d=0,e=a.length;d<e;d++)g=a[d],k[g]||(k[g]=Fa.test(g)?i(g,b||this.context):g);for(;h&&h.ownerDocument&&h!==b;){for(g in k)f=k[g],(f.jquery?f.index(h)>-1:i(h).is(f))&&c.push({selector:g,elem:h,level:j});h=h.parentNode;j++}}return c}f=Fa.test(a)||typeof a!="string"?i(a,b||this.context):0;for(d=0,e=this.length;d<e;d++)for(h=this[d];h;){if(f?f.index(h)>
-1:i.find.matchesSelector(h,a)){c.push(h);break}h=h.parentNode;if(!h||!h.ownerDocument||h===b||h.nodeType===11)break}c=c.length>1?i.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return!a||typeof a=="string"?i.inArray(this[0],a?i(a):this.parent().children()):i.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?i(a,b):i.makeArray(a&&a.nodeType?[a]:a),d=i.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||c[0].parentNode.nodeType===11||!d[0]||
!d[0].parentNode||d[0].parentNode.nodeType===11?d:i.unique(d))},andSelf:function(){return this.add(this.prevObject)}});i.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return i.dir(a,"parentNode")},parentsUntil:function(a,b,c){return i.dir(a,"parentNode",c)},next:function(a){return i.nth(a,2,"nextSibling")},prev:function(a){return i.nth(a,2,"previousSibling")},nextAll:function(a){return i.dir(a,"nextSibling")},prevAll:function(a){return i.dir(a,"previousSibling")},
nextUntil:function(a,b,c){return i.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return i.dir(a,"previousSibling",c)},siblings:function(a){return i.sibling(a.parentNode.firstChild,a)},children:function(a){return i.sibling(a.firstChild)},contents:function(a){return i.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:i.makeArray(a.childNodes)}},function(a,b){i.fn[a]=function(c,d){var e=i.map(this,b,c),h=mb.call(arguments);jb.test(a)||(d=c);d&&typeof d=="string"&&(e=i.filter(d,e));
e=this.length>1&&!nb[a]?i.unique(e):e;(this.length>1||lb.test(d))&&kb.test(a)&&(e=e.reverse());return this.pushStack(e,a,h.join(","))}});i.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?i.find.matchesSelector(b[0],a)?[b[0]]:[]:i.find.matches(a,b)},dir:function(a,c,d){for(var e=[],a=a[c];a&&a.nodeType!==9&&(d===b||a.nodeType!==1||!i(a).is(d));)a.nodeType===1&&e.push(a),a=a[c];return e},nth:function(a,b,c){for(var b=b||1,d=0;a;a=a[c])if(a.nodeType===1&&++d===b)break;return a},
sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var ob=/ jQuery\d+="(?:\d+|null)"/g,sa=/^\s+/,Ga=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ha=/<([\w:]+)/,pb=/<tbody/i,qb=/<|&#?\w+;/,Ia=/<(?:script|object|embed|option|style)/i,Ja=/checked\s*(?:[^=]|=\s*.checked.)/i,rb=/\/(java|ecma)script/i,bb=/^\s*<!(?:\[CDATA\[|\-\-)/,L={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,
"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};L.optgroup=L.option;L.tbody=L.tfoot=L.colgroup=L.caption=L.thead;L.th=L.td;i.support.htmlSerialize||(L._default=[1,"div<div>","</div>"]);i.fn.extend({text:function(a){return i.isFunction(a)?this.each(function(b){var c=i(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&
a!==b?this.empty().append((this[0]&&this[0].ownerDocument||t).createTextNode(a)):i.text(this)},wrapAll:function(a){if(i.isFunction(a))return this.each(function(b){i(this).wrapAll(a.call(this,b))});if(this[0]){var b=i(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return i.isFunction(a)?this.each(function(b){i(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=i(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){i(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},
before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=i(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,i(arguments[0]).toArray());
return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||i.filter(a,[d]).length)!b&&d.nodeType===1&&(i.cleanData(d.getElementsByTagName("*")),i.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&i.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?!1:a;b=b==null?a:b;return this.map(function(){return i.clone(this,a,b)})},
html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ob,""):null;if(typeof a=="string"&&!Ia.test(a)&&(i.support.leadingWhitespace||!sa.test(a))&&!L[(Ha.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ga,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(i.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else i.isFunction(a)?this.each(function(b){var c=i(this);c.html(a.call(this,b,c.html()))}):
this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(i.isFunction(a))return this.each(function(b){var c=i(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=i(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;i(this).remove();b?i(b).before(a):i(c).append(a)})}return this.length?this.pushStack(i(i.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,
c,d){var e,h,f,g,k=a[0],j=[];if(!i.support.checkClone&&arguments.length===3&&typeof k=="string"&&Ja.test(k))return this.each(function(){i(this).domManip(a,c,d,!0)});if(i.isFunction(k))return this.each(function(e){var h=i(this);a[0]=k.call(this,e,c?h.html():b);h.domManip(a,c,d)});if(this[0]){g=k&&k.parentNode;i.support.parentNode&&g&&g.nodeType===11&&g.childNodes.length===this.length?e={fragment:g}:e=i.buildFragment(a,this,j);f=e.fragment;f.childNodes.length===1?h=f=f.firstChild:h=f.firstChild;if(h){c=
c&&i.nodeName(h,"tr");h=0;g=this.length;for(var l=g-1;h<g;h++)d.call(c?i.nodeName(this[h],"table")?this[h].getElementsByTagName("tbody")[0]||this[h].appendChild(this[h].ownerDocument.createElement("tbody")):this[h]:this[h],e.cacheable||g>1&&h<l?i.clone(f,!0,!0):f)}j.length&&i.each(j,p)}return this}});i.buildFragment=function(a,b,c){var d,e,h,b=b&&b[0]?b[0].ownerDocument||b[0]:t;a.length===1&&typeof a[0]=="string"&&a[0].length<512&&b===t&&a[0].charAt(0)==="<"&&!Ia.test(a[0])&&(i.support.checkClone||
!Ja.test(a[0]))&&(e=!0,h=i.fragments[a[0]],h&&h!==1&&(d=h));d||(d=b.createDocumentFragment(),i.clean(a,b,d,c));e&&(i.fragments[a[0]]=h?d:1);return{fragment:d,cacheable:e}};i.fragments={};i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){i.fn[a]=function(c){var d=[],c=i(c),e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&c.length===1)return c[b](this[0]),this;for(var e=0,h=c.length;e<
h;e++){var f=(e>0?this.clone(!0):this).get();i(c[e])[b](f);d=d.concat(f)}return this.pushStack(d,a,c.selector)}});i.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,h,f;if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!i.isXMLDoc(a)){v(a,d);e=o(a);h=o(d);for(f=0;e[f];++f)v(e[f],h[f])}if(b&&(s(a,d),c)){e=o(a);h=o(d);for(f=0;e[f];++f)s(e[f],h[f])}return d},clean:function(a,b,c,d){b=b||t;typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||
t);for(var e=[],h,f=0,g;(g=a[f])!=null;f++)if(typeof g=="number"&&(g+=""),g){if(typeof g=="string")if(qb.test(g)){g=g.replace(Ga,"<$1></$2>");h=(Ha.exec(g)||["",""])[1].toLowerCase();var k=L[h]||L._default,j=k[0],l=b.createElement("div");for(l.innerHTML=k[1]+g+k[2];j--;)l=l.lastChild;if(!i.support.tbody){j=pb.test(g);k=h==="table"&&!j?l.firstChild&&l.firstChild.childNodes:k[1]==="<table>"&&!j?l.childNodes:[];for(h=k.length-1;h>=0;--h)i.nodeName(k[h],"tbody")&&!k[h].childNodes.length&&k[h].parentNode.removeChild(k[h])}!i.support.leadingWhitespace&&
sa.test(g)&&l.insertBefore(b.createTextNode(sa.exec(g)[0]),l.firstChild);g=l.childNodes}else g=b.createTextNode(g);var m;if(!i.support.appendChecked)if(g[0]&&typeof(m=g.length)=="number")for(h=0;h<m;h++)r(g[h]);else r(g);g.nodeType?e.push(g):e=i.merge(e,g)}if(c){a=function(a){return!a.type||rb.test(a.type)};for(f=0;e[f];f++)d&&i.nodeName(e[f],"script")&&(!e[f].type||e[f].type.toLowerCase()==="text/javascript")?d.push(e[f].parentNode?e[f].parentNode.removeChild(e[f]):e[f]):(e[f].nodeType===1&&(b=i.grep(e[f].getElementsByTagName("script"),
a),e.splice.apply(e,[f+1,0].concat(b))),c.appendChild(e[f]))}return e},cleanData:function(a){for(var b,c,d=i.cache,e=i.expando,h=i.event.special,f=i.support.deleteExpando,g=0,k;(k=a[g])!=null;g++)if(!k.nodeName||!i.noData[k.nodeName.toLowerCase()])if(c=k[i.expando]){if((b=d[c]&&d[c][e])&&b.events){for(var j in b.events)h[j]?i.event.remove(k,j):i.removeEvent(k,j,b.handle);b.handle&&(b.handle.elem=null)}f?delete k[i.expando]:k.removeAttribute&&k.removeAttribute(i.expando);delete d[c]}}});var Ka=/alpha\([^)]*\)/i,
sb=/opacity=([^)]*)/,tb=/-([a-z])/ig,ub=/([A-Z]|^ms)/g,La=/^-?\d+(?:px)?$/i,vb=/^-?\d/,wb=/^[+\-]=/,xb=/[^+\-\.\de]+/g,yb={position:"absolute",visibility:"hidden",display:"block"},$a=["Left","Right"],ab=["Top","Bottom"],X,Ma,ha,zb=function(a,b){return b.toUpperCase()};i.fn.css=function(a,c){return arguments.length===2&&c===b?this:i.access(this,a,c,!0,function(a,c,d){return d!==b?i.style(a,c,d):i.css(a,c)})};i.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=X(a,"opacity","opacity");return c===
""?"1":c}return a.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0,widows:!0,orphans:!0},cssProps:{"float":i.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var h,f=i.camelCase(c),g=a.style,k=i.cssHooks[f],c=i.cssProps[f]||f;if(d===b)return k&&"get"in k&&(h=k.get(a,!1,e))!==b?h:g[c];e=typeof d;if(!(e==="number"&&isNaN(d)||d==null))if(e==="string"&&wb.test(d)&&(d=+d.replace(xb,"")+parseFloat(i.css(a,
c))),e==="number"&&!i.cssNumber[f]&&(d+="px"),!k||!("set"in k)||(d=k.set(a,d))!==b)try{g[c]=d}catch(j){}}},css:function(a,c,d){var e,h;c=i.camelCase(c);h=i.cssHooks[c];c=i.cssProps[c]||c;c==="cssFloat"&&(c="float");if(h&&"get"in h&&(e=h.get(a,!0,d))!==b)return e;if(X)return X(a,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]},camelCase:function(a){return a.replace(tb,zb)}});i.curCSS=i.css;i.each(["height","width"],function(a,b){i.cssHooks[b]=
{get:function(a,c,d){var e;if(c){a.offsetWidth!==0?e=m(a,b,d):i.swap(a,yb,function(){e=m(a,b,d)});if(e<=0&&(e=X(a,b,b),e==="0px"&&ha&&(e=ha(a,b,b)),e!=null))return e===""||e==="auto"?"0px":e;return e<0||e==null?(e=a.style[b],e===""||e==="auto"?"0px":e):typeof e=="string"?e:e+"px"}},set:function(a,b){if(!La.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}});i.support.opacity||(i.cssHooks.opacity={get:function(a,b){return sb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?
parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=i.isNaN(b)?"":"alpha(opacity="+b*100+")",d=d&&d.filter||c.filter||"";c.filter=Ka.test(d)?d.replace(Ka,e):d+" "+e}});i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(a,b){var c;i.swap(a,{display:"inline-block"},function(){b?c=X(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})});t.defaultView&&t.defaultView.getComputedStyle&&(Ma=function(a,c){var d,
e,c=c.replace(ub,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(e=e.getComputedStyle(a,null))d=e.getPropertyValue(c),d===""&&!i.contains(a.ownerDocument.documentElement,a)&&(d=i.style(a,c));return d});t.documentElement.currentStyle&&(ha=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],h=a.style;!La.test(d)&&vb.test(d)&&(c=h.left,e&&(a.runtimeStyle.left=a.currentStyle.left),h.left=b==="fontSize"?"1em":d||0,d=h.pixelLeft+"px",h.left=c,
e&&(a.runtimeStyle.left=e));return d===""?"auto":d});X=Ma||ha;i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!i.support.reliableHiddenOffsets&&(a.style.display||i.css(a,"display"))==="none"},i.expr.filters.visible=function(a){return!i.expr.filters.hidden(a)});var Ab=/%20/g,Za=/\[\]$/,Na=/\r?\n/g,Bb=/#.*$/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Db=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Oa=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/^(?:select|textarea)/i,Ba=/\s+/,Ib=/([?&])_=[^&]*/,Pa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Qa=i.fn.load,ma={},Ra={},T,U;try{T=F.href}catch(Ob){T=t.createElement("a"),T.href="",T=T.href}U=Pa.exec(T.toLowerCase())||[];i.fn.extend({load:function(a,c,d){if(typeof a!="string"&&Qa)return Qa.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0)var h=a.slice(e,a.length),
a=a.slice(0,e);e="GET";c&&(i.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=i.param(c,i.ajaxSettings.traditional),e="POST"));var f=this;i.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),f.html(h?i("<div>").append(c.replace(Gb,"")).find(h):c));d&&f.each(d,[c,b,a])}});return this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Hb.test(this.nodeName)||Db.test(this.type))}).map(function(a,b){var c=i(this).val();return c==null?null:i.isArray(c)?i.map(c,function(a){return{name:b.name,value:a.replace(Na,"\r\n")}}):{name:b.name,value:c.replace(Na,"\r\n")}}).get()}});i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){i.fn[b]=function(a){return this.bind(b,a)}});i.each(["get","post"],function(a,c){i[c]=function(a,
d,e,h){i.isFunction(d)&&(h=h||e,e=d,d=b);return i.ajax({type:c,url:a,data:d,success:e,dataType:h})}});i.extend({getScript:function(a,c){return i.get(a,b,c,"script")},getJSON:function(a,b,c){return i.get(a,b,c,"json")},ajaxSetup:function(a,b){b?i.extend(!0,a,i.ajaxSettings,b):(b=a,a=i.extend(!0,i.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in i.ajaxSettings&&(a[c]=i.ajaxSettings[c]);return a},ajaxSettings:{url:T,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(U[1]),
global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML}},ajaxPrefilter:l(ma),ajaxTransport:l(Ra),ajax:function(a,c){function d(a,c,k,x){if(w!==2){w=
2;v&&clearTimeout(v);t=b;o=x||"";u.readyState=a?4:0;var p,r,q;if(k){var x=e,N=u,O=x.contents,s=x.dataTypes,z=x.responseFields,A,B,Q,C;for(B in z)B in k&&(N[z[B]]=k[B]);for(;s[0]==="*";)s.shift(),A===b&&(A=x.mimeType||N.getResponseHeader("content-type"));if(A)for(B in O)if(O[B]&&O[B].test(A)){s.unshift(B);break}if(s[0]in k)Q=s[0];else{for(B in k){if(!s[0]||x.converters[B+" "+s[0]]){Q=B;break}C||(C=B)}Q=Q||C}Q?(Q!==s[0]&&s.unshift(Q),k=k[Q]):k=void 0}else k=b;if(a>=200&&a<300||a===304){if(e.ifModified){if(A=
u.getResponseHeader("Last-Modified"))i.lastModified[m]=A;if(A=u.getResponseHeader("Etag"))i.etag[m]=A}if(a===304)c="notmodified",p=!0;else try{A=e;A.dataFilter&&(k=A.dataFilter(k,A.dataType));var D=A.dataTypes;B={};var E,F,K=D.length,I,H=D[0],V,L,J,S,M;for(E=1;E<K;E++){if(E===1)for(F in A.converters)typeof F=="string"&&(B[F.toLowerCase()]=A.converters[F]);V=H;H=D[E];if(H==="*")H=V;else if(V!=="*"&&V!==H){L=V+" "+H;J=B[L]||B["* "+H];if(!J)for(S in M=b,B)if(I=S.split(" "),I[0]===V||I[0]==="*")if(M=
B[I[1]+" "+H]){S=B[S];S===!0?J=M:M===!0&&(J=S);break}!J&&!M&&i.error("No conversion from "+L.replace(" "," to "));J!==!0&&(k=J?J(k):M(S(k)))}}r=k;c="success";p=!0}catch(na){c="parsererror",q=na}}else if(q=c,!c||a)c="error",a<0&&(a=0);u.status=a;u.statusText=c;p?g.resolveWith(h,[r,c,u]):g.rejectWith(h,[u,c,q]);u.statusCode(l);l=b;y&&f.trigger("ajax"+(p?"Success":"Error"),[u,e,p?r:q]);j.resolveWith(h,[u,c]);y&&(f.trigger("ajaxComplete",[u,e]),--i.active||i.event.trigger("ajaxStop"))}}typeof a=="object"&&
(c=a,a=b);c=c||{};var e=i.ajaxSetup({},c),h=e.context||e,f=h!==e&&(h.nodeType||h instanceof i)?i(h):i.event,g=i.Deferred(),j=i._Deferred(),l=e.statusCode||{},m,p={},r={},o,q,t,v,s,w=0,y,z,u={readyState:0,setRequestHeader:function(a,b){if(!w){var c=a.toLowerCase();a=r[c]=r[c]||a;p[a]=b}return this},getAllResponseHeaders:function(){return w===2?o:null},getResponseHeader:function(a){var c;if(w===2){if(!q)for(q={};c=Cb.exec(o);)q[c[1].toLowerCase()]=c[2];c=q[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){w||
(e.mimeType=a);return this},abort:function(a){a=a||"abort";t&&t.abort(a);d(0,a);return this}};g.promise(u);u.success=u.done;u.error=u.fail;u.complete=j.done;u.statusCode=function(a){if(a){var b;if(w<2)for(b in a)l[b]=[l[b],a[b]];else b=a[u.status],u.then(b,b)}return this};e.url=((a||e.url)+"").replace(Bb,"").replace(Fb,U[1]+"//");e.dataTypes=i.trim(e.dataType||"*").toLowerCase().split(Ba);e.crossDomain==null&&(s=Pa.exec(e.url.toLowerCase()),e.crossDomain=!(!s||s[1]==U[1]&&s[2]==U[2]&&(s[3]||(s[1]===
"http:"?80:443))==(U[3]||(U[1]==="http:"?80:443))));e.data&&e.processData&&typeof e.data!="string"&&(e.data=i.param(e.data,e.traditional));k(ma,e,c,u);if(w===2)return!1;y=e.global;e.type=e.type.toUpperCase();e.hasContent=!Eb.test(e.type);y&&i.active++===0&&i.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(Oa.test(e.url)?"&":"?")+e.data),m=e.url,e.cache===!1)){s=i.now();var A=e.url.replace(Ib,"$1_="+s);e.url=A+(A===e.url?(Oa.test(e.url)?"&":"?")+"_="+s:"")}(e.data&&e.hasContent&&e.contentType!==
!1||c.contentType)&&u.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(m=m||e.url,i.lastModified[m]&&u.setRequestHeader("If-Modified-Since",i.lastModified[m]),i.etag[m]&&u.setRequestHeader("If-None-Match",i.etag[m]));u.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(z in e.headers)u.setRequestHeader(z,e.headers[z]);if(e.beforeSend&&(e.beforeSend.call(h,u,e)===!1||w===2))return u.abort(),
!1;for(z in{success:1,error:1,complete:1})u[z](e[z]);if(t=k(Ra,e,c,u)){u.readyState=1;y&&f.trigger("ajaxSend",[u,e]);e.async&&e.timeout>0&&(v=setTimeout(function(){u.abort("timeout")},e.timeout));try{w=1,t.send(p,d)}catch(B){status<2?d(-1,B):i.error(B)}}else d(-1,"No Transport");return u},param:function(a,c){var d=[],e=function(a,b){b=i.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=i.ajaxSettings.traditional);if(i.isArray(a)||a.jquery&&!i.isPlainObject(a))i.each(a,
function(){e(this.name,this.value)});else for(var f in a)h(f,a[f],c,e);return d.join("&").replace(Ab,"+")}});i.extend({active:0,lastModified:{},etag:{}});var Jb=i.now(),ia=/(\=)\?(&|$)|\?\?/i;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return i.expando+"_"+Jb++}});i.ajaxPrefilter("json jsonp",function(b,c,d){c=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ia.test(b.url)||c&&ia.test(b.data))){var e,h=b.jsonpCallback=
i.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,f=a[h],g=b.url,k=b.data,j="$1"+h+"$2";b.jsonp!==!1&&(g=g.replace(ia,j),b.url===g&&(c&&(k=k.replace(ia,j)),b.data===k&&(g+=(/\?/.test(g)?"&":"?")+b.jsonp+"="+h)));b.url=g;b.data=k;a[h]=function(a){e=[a]};d.always(function(){a[h]=f;e&&i.isFunction(f)&&a[h](e[0])});b.converters["script json"]=function(){e||i.error(h+" was not called");return e[0]};b.dataTypes[0]="json";return"script"}});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){i.globalEval(a);return a}}});i.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});i.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=t.head||t.getElementsByTagName("head")[0]||t.documentElement;return{send:function(e,h){c=t.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||h(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var ta=a.ActiveXObject?function(){for(var a in Y)Y[a](0,1)}:!1,Kb=0,Y;i.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&j()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:j;(function(a){i.extend(i.support,{ajax:!!a,
cors:!!a&&"withCredentials"in a})})(i.ajaxSettings.xhr());i.support.ajax&&i.ajaxTransport(function(c){if(!c.crossDomain||i.support.cors){var d;return{send:function(e,h){var f=c.xhr(),g,k;c.username?f.open(c.type,c.url,c.async,c.username,c.password):f.open(c.type,c.url,c.async);if(c.xhrFields)for(k in c.xhrFields)f[k]=c.xhrFields[k];c.mimeType&&f.overrideMimeType&&f.overrideMimeType(c.mimeType);!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(k in e)f.setRequestHeader(k,
e[k])}catch(j){}f.send(c.hasContent&&c.data||null);d=function(a,e){var k,j,l,m,p;try{if(d&&(e||f.readyState===4))if(d=b,g&&(f.onreadystatechange=i.noop,ta&&delete Y[g]),e)f.readyState!==4&&f.abort();else{k=f.status;l=f.getAllResponseHeaders();m={};p=f.responseXML;p&&p.documentElement&&(m.xml=p);m.text=f.responseText;try{j=f.statusText}catch(r){j=""}!k&&c.isLocal&&!c.crossDomain?k=m.text?200:404:k===1223&&(k=204)}}catch(o){e||h(-1,o)}m&&h(k,j,m,l)};!c.async||f.readyState===4?d():(g=++Kb,ta&&(Y||(Y=
{},i(a).unload(ta)),Y[g]=d),f.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var la={},J,aa,Lb=/^(?:toggle|show|hide)$/,Mb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Z,ya=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],da,ua=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;i.fn.extend({show:function(a,b,c){var e,h;if(a||a===0)return this.animate(f("show",3),a,b,c);
a=0;for(b=this.length;a<b;a++)e=this[a],e.style&&(h=e.style.display,!i._data(e,"olddisplay")&&h==="none"&&(h=e.style.display=""),h===""&&i.css(e,"display")==="none"&&i._data(e,"olddisplay",d(e.nodeName)));for(a=0;a<b;a++)if(e=this[a],e.style&&(h=e.style.display,h===""||h==="none"))e.style.display=i._data(e,"olddisplay")||"";return this},hide:function(a,b,c){if(a||a===0)return this.animate(f("hide",3),a,b,c);a=0;for(b=this.length;a<b;a++)this[a].style&&(c=i.css(this[a],"display"),c!=="none"&&!i._data(this[a],
"olddisplay")&&i._data(this[a],"olddisplay",c));for(a=0;a<b;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:i.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";i.isFunction(a)&&i.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:i(this).is(":hidden");i(this)[b?"show":"hide"]()}):this.animate(f("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},
a,c,d)},animate:function(a,b,c,e){var h=i.speed(b,c,e);if(i.isEmptyObject(a))return this.each(h.complete,[!1]);a=i.extend({},a);return this[h.queue===!1?"each":"queue"](function(){var x;h.queue===!1&&i._mark(this);var b=i.extend({},h),c=this.nodeType===1,e=c&&i(this).is(":hidden"),f,g,k,j,l,m,p,r,o;b.animatedProperties={};for(k in a){f=i.camelCase(k);k!==f&&(a[f]=a[k],delete a[k]);g=a[f];i.isArray(g)?(b.animatedProperties[f]=g[1],x=a[f]=g[0],g=x):b.animatedProperties[f]=b.specialEasing&&b.specialEasing[f]||
b.easing||"swing";if(g==="hide"&&e||g==="show"&&!e)return b.complete.call(this);c&&(f==="height"||f==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],i.css(this,"display")==="inline"&&i.css(this,"float")==="none"&&(i.support.inlineBlockNeedsLayout?(j=d(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(k in a)l=new i.fx(this,
b,k),g=a[k],Lb.test(g)?l[g==="toggle"?e?"show":"hide":g]():(m=Mb.exec(g),p=l.cur(),m?(r=parseFloat(m[2]),o=m[3]||(i.cssNumber[k]?"":"px"),o!=="px"&&(i.style(this,k,(r||1)+o),p*=(r||1)/l.cur(),i.style(this,k,p+o)),m[1]&&(r=(m[1]==="-="?-1:1)*r+p),l.custom(p,r,o)):l.custom(p,g,""));return!0})},stop:function(a,b){a&&this.queue([]);this.each(function(){var a=i.timers,c=a.length;for(b||i._unmark(!0,this);c--;)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))});b||this.dequeue();return this}});i.each({slideDown:f("show",
1),slideUp:f("hide",1),slideToggle:f("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){i.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});i.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?i.extend({},a):{complete:c||!c&&b||i.isFunction(a)&&a,duration:a,easing:c&&b||b&&!i.isFunction(b)&&b};d.duration=i.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in i.fx.speeds?i.fx.speeds[d.duration]:i.fx.speeds._default;d.old=d.complete;
d.complete=function(a){d.queue!==!1?i.dequeue(this):a!==!1&&i._unmark(this);i.isFunction(d.old)&&d.old.call(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});i.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=
null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=i.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function d(a){return e.step(a)}var e=this,h=i.fx,f;this.startTime=da||g();this.start=a;this.end=b;this.unit=c||this.unit||(i.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;d.elem=this.elem;d()&&i.timers.push(d)&&!Z&&(ua?(Z=1,f=function(){Z&&(ua(f),h.tick())},ua(f)):Z=setInterval(h.tick,
h.interval))},show:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.show=!0;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b=da||g(),c=!0,d=this.elem,e=this.options,h,f;if(a||b>=e.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();e.animatedProperties[this.prop]=
!0;for(h in e.animatedProperties)e.animatedProperties[h]!==!0&&(c=!1);if(c){e.overflow!=null&&!i.support.shrinkWrapBlocks&&i.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]});e.hide&&i(d).hide();if(e.hide||e.show)for(var k in e.animatedProperties)i.style(d,k,e.orig[k]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(f=b-this.startTime,this.state=f/e.duration,this.pos=i.easing[e.animatedProperties[this.prop]](this.state,f,0,1,e.duration),this.now=this.start+(this.end-
this.start)*this.pos);this.update();return!0}};i.extend(i.fx,{tick:function(){for(var a=i.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||i.fx.stop()},interval:13,stop:function(){clearInterval(Z);Z=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){i.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}});i.expr&&i.expr.filters&&
(i.expr.filters.animated=function(a){return i.grep(i.timers,function(b){return a===b.elem}).length});var Nb=/^t(?:able|d|h)$/i,Sa=/^(?:body|html)$/i;"getBoundingClientRect"in t.documentElement?i.fn.offset=function(a){var b=this[0],d;if(a)return this.each(function(b){i.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return i.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var h=b.ownerDocument,f=h.documentElement;if(!d||!i.contains(f,b))return d?
{top:d.top,left:d.left}:{top:0,left:0};b=h.body;h=c(h);return{top:d.top+(h.pageYOffset||i.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(h.pageXOffset||i.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:i.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){i.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return i.offset.bodyOffset(b);i.offset.initialize();for(var c,
d=b.offsetParent,e=b.ownerDocument,h=e.documentElement,f=e.body,g=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,j=b.offsetLeft;(b=b.parentNode)&&b!==f&&b!==h;){if(i.offset.supportsFixedPosition&&g.position==="fixed")break;c=e?e.getComputedStyle(b,null):b.currentStyle;k-=b.scrollTop;j-=b.scrollLeft;b===d&&(k+=b.offsetTop,j+=b.offsetLeft,i.offset.doesNotAddBorder&&(!i.offset.doesAddBorderForTableAndCells||!Nb.test(b.nodeName))&&(k+=parseFloat(c.borderTopWidth)||0,j+=parseFloat(c.borderLeftWidth)||
0),d=b.offsetParent);i.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(k+=parseFloat(c.borderTopWidth)||0,j+=parseFloat(c.borderLeftWidth)||0);g=c}if(g.position==="relative"||g.position==="static")k+=f.offsetTop,j+=f.offsetLeft;i.offset.supportsFixedPosition&&g.position==="fixed"&&(k+=Math.max(h.scrollTop,f.scrollTop),j+=Math.max(h.scrollLeft,f.scrollLeft));return{top:k,left:j}};i.offset={initialize:function(){var a=t.body,b=t.createElement("div"),c,d,e,h=parseFloat(i.css(a,
"marginTop"))||0;i.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(b,a.firstChild);c=b.firstChild;d=c.firstChild;e=
c.nextSibling.firstChild.firstChild;this.doesNotAddBorder=d.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;d.style.position="fixed";d.style.top="20px";this.supportsFixedPosition=d.offsetTop===20||d.offsetTop===15;d.style.position=d.style.top="";c.style.overflow="hidden";c.style.position="relative";this.subtractsBorderForOverflowNotVisible=d.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==h;a.removeChild(b);i.offset.initialize=i.noop},bodyOffset:function(a){var b=
a.offsetTop,c=a.offsetLeft;i.offset.initialize();i.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(i.css(a,"marginTop"))||0,c+=parseFloat(i.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=i.css(a,"position");d==="static"&&(a.style.position="relative");var e=i(a),h=e.offset(),f=i.css(a,"top"),g=i.css(a,"left"),k={},j={},l,m;(d==="absolute"||d==="fixed")&&i.inArray("auto",[f,g])>-1?(j=e.position(),l=j.top,m=j.left):(l=parseFloat(f)||0,m=parseFloat(g)||0);i.isFunction(b)&&
(b=b.call(a,c,h));b.top!=null&&(k.top=b.top-h.top+l);b.left!=null&&(k.left=b.left-h.left+m);"using"in b?b.using.call(a,k):e.css(k)}};i.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=Sa.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(i.css(a,"marginTop"))||0;c.left-=parseFloat(i.css(a,"marginLeft"))||0;d.top+=parseFloat(i.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(i.css(b[0],"borderLeftWidth"))||0;return{top:c.top-
d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||t.body;a&&!Sa.test(a.nodeName)&&i.css(a,"position")==="static";)a=a.offsetParent;return a})}});i.each(["Left","Top"],function(a,d){var e="scroll"+d;i.fn[e]=function(d){var h,f;if(d===b){h=this[0];return!h?null:(f=c(h))?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:i.support.boxModel&&f.document.documentElement[e]||f.document.body[e]:h[e]}return this.each(function(){f=c(this);f?f.scrollTo(a?
i(f).scrollLeft():d,a?d:i(f).scrollTop()):this[e]=d})}});i.each(["Height","Width"],function(a,c){var d=c.toLowerCase();i.fn["inner"+c]=function(){return this[0]?parseFloat(i.css(this[0],d,"padding")):null};i.fn["outer"+c]=function(a){return this[0]?parseFloat(i.css(this[0],d,a?"margin":"border")):null};i.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(i.isFunction(a))return this.each(function(b){var c=i(this);c[d](a.call(this,b,c[d]()))});if(i.isWindow(e)){var h=e.document.documentElement["client"+
c];return e.document.compatMode==="CSS1Compat"&&h||e.document.body["client"+c]||h}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);return a===b?(e=i.css(e,d),h=parseFloat(e),i.isNaN(h)?e:h):this.css(d,typeof a=="string"?a:a+"px")}});a.jQuery=a.$=i})(window);(function(a){function b(b,c,d,e){function f(d){d=a[b][c][d]||[];return typeof d=="string"?d.split(/,?\s+/):d}var g=f("getter");e.length==1&&typeof e[0]=="string"&&(g=g.concat(f("getterSetter")));return a.inArray(d,g)!=-1}var c=a.fn.remove,d=a.browser.mozilla&&parseFloat(a.browser.version)<1.9;a.ui={version:"1.6rc5",plugin:{add:function(b,c,d){var b=a.ui[b].prototype,e;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){if(b=a.plugins[b])for(var d=0;d<b.length;d++)a.options[b[d][0]]&&
b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},cssCache:{},css:function(b){if(a.ui.cssCache[b])return a.ui.cssCache[b];var c=a('<div class="ui-gen"></div>').addClass(b).css({position:"absolute",top:"-5000px",left:"-5000px",display:"block"}).appendTo("body");a.ui.cssCache[b]=!(/auto|default/.test(c.css("cursor"))&&!/^[1-9]/.test(c.css("height"))&&!/^[1-9]/.test(c.css("width"))&&/none/.test(c.css("backgroundImage"))&&
/transparent|rgba\(0, 0, 0, 0\)/.test(c.css("backgroundColor")));try{a("body").get(0).removeChild(c.get(0))}catch(d){}return a.ui.cssCache[b]},hasScroll:function(b,c){if(a(b).css("overflow")=="hidden")return!1;var d=c&&c=="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1;e=b[d]>0;b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,
DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(d){var f=a.attr,e=a.fn.removeAttr,g=/^aria-/,j=/^wairole:/;a.attr=function(a,b,c){var d=c!==void 0;return b=="role"?d?f.call(this,a,b,"wairole:"+c):(f.apply(this,arguments)||"").replace(j,""):g.test(b)?d?a.setAttributeNS("http://www.w3.org/2005/07/aaa",
b.replace(g,"aaa:"),c):f.call(this,a,b.replace(g,"aaa:")):f.apply(this,arguments)};a.fn.removeAttr=function(a){return g.test(a)?this.each(function(){this.removeAttributeNS("http://www.w3.org/2005/07/aaa",a.replace(g,""))}):e.call(this,a)}}a.fn.extend({remove:function(){a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return c.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable",
"on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},tabbable:function(b){var c=b.nodeName.toLowerCase();return b.tabIndex>=0&&("a"==c&&b.href||/input|select|textarea|button/.test(c)&&"hidden"!=b.type&&!b.disabled)&&!(a(b).is(":hidden")||a(b).parents(":hidden").length)}});a.widget=function(c,d){var e=c.split(".")[0],c=c.split(".")[1];
a.fn[c]=function(d){var f=typeof d=="string",g=Array.prototype.slice.call(arguments,1);if(f&&d.substring(0,1)=="_")return this;if(f&&b(e,c,d,g)){var k=a.data(this[0],c);return k?k[d].apply(k,g):void 0}return this.each(function(){var b=a.data(this,c);!b&&!f&&a.data(this,c,new a[e][c](this,d));b&&f&&a.isFunction(b[d])&&b[d].apply(b,g)})};a[e]=a[e]||{};a[e][c]=function(b,d){var f=this;this.namespace=e;this.widgetName=c;this.widgetEventPrefix=a[e][c].eventPrefix||c;this.widgetBaseClass=e+"-"+c;this.options=
a.extend({},a.widget.defaults,a[e][c].defaults,a.metadata&&a.metadata.get(b)[c],d);this.element=a(b).bind("setData."+c,function(a,c,d){if(a.target==b)return f._setData(c,d)}).bind("getData."+c,function(a,c){if(a.target==b)return f._getData(c)}).bind("remove",function(){return f.destroy()});this._init()};a[e][c].prototype=a.extend({},a.widget.prototype,d);a[e][c].getterSetter="option"};a.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+
"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(b,c){var d=b,e=this;if(typeof b=="string"){if(c===void 0)return this._getData(b);d={};d[b]=c}a.each(d,function(a,b){e._setData(a,b)})},_getData:function(a){return this.options[a]},_setData:function(a,b){this.options[a]=b;a=="disabled"&&this.element[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b)},enable:function(){this._setData("disabled",
!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b],b=b==this.widgetEventPrefix?b:this.widgetEventPrefix+b,c=a.Event(c);c.type=b;this.element.trigger(c,d);return!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}};a.widget.defaults={disabled:!1};a.ui.mouse={_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(){if(b._preventClickEvent)return b._preventClickEvent=
!1});if(a.browser.msie)this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on");this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);a.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(b){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=b.which==1,e=typeof this.options.cancel=="string"?a(b.target).parents().add(b.target).filter(this.options.cancel).length:!1;if(!d||
e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted))return b.preventDefault(),!0;this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);a.browser.safari||b.preventDefault();return!0},_mouseMove:function(b){if(a.browser.msie&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1)?this._mouseDrag(b):this._mouseUp(b);return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=!1,this._preventClickEvent=!0,this._mouseStop(b);return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}};a.ui.mouse.defaults={cancel:null,distance:1,
delay:0}})(jQuery);(function(a){var b,c,d;a.fn.simpledraw=function(b,e,f){if(f&&this[0].VCanvas)return this[0].VCanvas;b===void 0&&(b=a(this).innerWidth());e===void 0&&(e=a(this).innerHeight());return a.browser.hasCanvas?new c(b,e,this):a.browser.msie?new d(b,e,this):!1};var f=[];a.fn.sparkline=function(b,c){return this.each(function(){var d=new a.fn.sparkline.options(this,c),e=function(){var c,e,f;if(b==="html"||b===void 0){c=this.getAttribute(d.get("tagValuesAttribute"));if(c===void 0||c===null)c=a(this).html();c=
c.replace(/(^\s*<\!--)|(--\>\s*$)|\s+/g,"").split(",")}else c=b;e=d.get("width")=="auto"?c.length*d.get("defaultPixelsPerValue"):d.get("width");if(d.get("height")=="auto"){if(!d.get("composite")||!this.VCanvas){var g=document.createElement("span");g.innerHTML="a";a(this).html(g);f=a(g).innerHeight();a(g).remove()}}else f=d.get("height");a.fn.sparkline[d.get("type")].call(this,c,d,e,f)};a(this).html()&&a(this).is(":hidden")||a.fn.jquery<"1.3.0"&&a(this).parents().is(":hidden")||!a(this).parents("body").length?
f.push([this,e]):e.call(this)})};a.fn.sparkline.defaults={common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1},line:{spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:void 0,chartRangeMax:void 0,chartRangeMinX:void 0,chartRangeMaxX:void 0},
bar:{barColor:"#00f",negBarColor:"#f44",zeroColor:void 0,nullColor:void 0,zeroAxis:void 0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,colorMap:void 0},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},discrete:{lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1},bullet:{targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE",
"#A8B6FF","#7F94FF"],base:void 0},pie:{sliceColors:["#f00","#0f0","#00f"]},box:{raw:!1,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:void 0,targetColor:"#4a2",chartRangeMax:void 0,chartRangeMin:void 0}};a.sparkline_display_visible=function(){for(var b=f.length-1;b>=0;b--){var c=f[b][0];a(c).is(":visible")&&!a(c).parents().is(":hidden")&&(f[b][1].call(c),f.splice(b,
1))}};var e={},g=function(a){switch(a){case "undefined":a=void 0;break;case "null":a=null;break;case "true":a=!0;break;case "false":a=!1;break;default:var b=parseFloat(a);a==b&&(a=b)}return a};a.fn.sparkline.options=function(b,c){this.userOptions=c=c||{};this.tag=b;this.tagValCache={};var d=a.fn.sparkline.defaults,f=d.common;this.tagOptionsPrefix=c.enableTagOptions&&(c.tagOptionsPrefix||f.tagOptionsPrefix);var g=this.getTagSetting("type");this.mergedOptions=a.extend({},f,g===e?d[c.type||f.type]:d[g],
c)};a.fn.sparkline.options.prototype.getTagSetting=function(a){var b;b=this.tagOptionsPrefix;if(b===!1||b===void 0)return e;if(this.tagValCache.hasOwnProperty(a))a=this.tagValCache.key;else{a=this.tag.getAttribute(b+a);if(a===void 0||a===null)a=e;else if(a.substr(0,1)=="["){a=a.substr(1,a.length-2).split(",");for(b=a.length;b--;)a[b]=g(a[b].replace(/(^\s*)|(\s*$)/g,""))}else if(a.substr(0,1)=="{"){var c=a.substr(1,a.length-2).split(","),a={};for(b=c.length;b--;){var d=c[b].split(":",2);a[d[0].replace(/(^\s*)|(\s*$)/g,
"")]=g(d[1].replace(/(^\s*)|(\s*$)/g,""))}}else a=g(a);this.tagValCache.key=a}return a};a.fn.sparkline.options.prototype.get=function(a){var b=this.getTagSetting(a);return b!==e?b:this.mergedOptions[a]};a.fn.sparkline.line=function(b,c,d,e){for(var f=[],g=[],j=[],o=0;o<b.length;o++){var v=b[o],s=typeof b[o]=="string",y=typeof b[o]=="object"&&b[o]instanceof Array,u=s&&b[o].split(":");s&&u.length==2?(f.push(Number(u[0])),g.push(Number(u[1])),j.push(Number(u[1]))):y?(f.push(v[0]),g.push(v[1]),j.push(v[1])):
(f.push(o),b[o]===null||b[o]=="null"?g.push(null):(g.push(Number(v)),j.push(Number(v))))}c.get("xvalues")&&(f=c.get("xvalues"));var v=b=Math.max.apply(Math,j),z=Math.min.apply(Math,j),j=z,o=Math.max.apply(Math,f),s=Math.min.apply(Math,f),C=c.get("normalRangeMin"),D=c.get("normalRangeMax");C!==void 0&&(C<z&&(z=C),D>b&&(b=D));if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<z))z=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&(c.get("chartRangeClip")||
c.get("chartRangeMax")>b))b=c.get("chartRangeMax");if(c.get("chartRangeMinX")!==void 0&&(c.get("chartRangeClipX")||c.get("chartRangeMinX")<s))s=c.get("chartRangeMinX");if(c.get("chartRangeMaxX")!==void 0&&(c.get("chartRangeClipX")||c.get("chartRangeMaxX")>o))o=c.get("chartRangeMaxX");var y=o-s===0?1:o-s,A=b-z===0?1:b-z,u=g.length-1;if(u<1)this.innerHTML="";else{var w=a(this).simpledraw(d,e,c.get("composite"));if(w){var E=w.pixel_width,B=w.pixel_height,t=0,H=0;if((d=c.get("spotRadius"))&&(E<d*4||B<
d*4))d=0;if(d){if(c.get("minSpotColor")||c.get("spotColor")&&g[u]==z)B-=Math.ceil(d);if(c.get("maxSpotColor")||c.get("spotColor")&&g[u]==b)B-=Math.ceil(d),t+=Math.ceil(d);if(c.get("minSpotColor")||c.get("maxSpotColor")&&(g[0]==z||g[0]==b))H+=Math.ceil(d),E-=Math.ceil(d);if(c.get("spotColor")||c.get("minSpotColor")||c.get("maxSpotColor")&&(g[u]==z||g[u]==b))E-=Math.ceil(d)}B--;e=function(){if(C!==void 0){var a=t+Math.round(B-B*((D-z)/A)),b=Math.round(B*(D-C)/A);w.drawRect(H,a,E,b,void 0,c.get("normalRangeColor"))}};
c.get("drawNormalOnTop")||e();for(var F=[],i=[F],K,I,M=g.length,o=0;o<M;o++)K=f[o],I=g[o],I===null?o&&g[o-1]!==null&&(F=[],i.push(F)):(I<z&&(I=z),I>b&&(I=b),F.length||F.push([H+Math.round((K-s)*(E/y)),t+B]),F.push([H+Math.round((K-s)*(E/y)),t+Math.round(B-B*((I-z)/A))]));K=[];I=[];M=i.length;for(o=0;o<M;o++)F=i[o],F.length&&(c.get("fillColor")&&(F.push([F[F.length-1][0],t+B-1]),I.push(F.slice(0)),F.pop()),F.length>2&&(F[0]=[F[0][0],F[1][1]]),K.push(F));M=I.length;for(o=0;o<M;o++)w.drawShape(I[o],
void 0,c.get("fillColor"));c.get("drawNormalOnTop")&&e();M=K.length;for(o=0;o<M;o++)w.drawShape(K[o],c.get("lineColor"),void 0,c.get("lineWidth"));d&&c.get("spotColor")&&w.drawCircle(H+Math.round(f[f.length-1]*(E/y)),t+Math.round(B-B*((g[u]-z)/A)),d,void 0,c.get("spotColor"));b!=j&&(d&&c.get("minSpotColor")&&(K=f[a.inArray(j,g)],w.drawCircle(H+Math.round((K-s)*(E/y)),t+Math.round(B-B*((j-z)/A)),d,void 0,c.get("minSpotColor"))),d&&c.get("maxSpotColor")&&(K=f[a.inArray(v,g)],w.drawCircle(H+Math.round((K-
s)*(E/y)),t+Math.round(B-B*((v-z)/A)),d,void 0,c.get("maxSpotColor"))))}else this.innerHTML=""}};a.fn.sparkline.bar=function(b,c,d,e){for(var d=b.length*c.get("barWidth")+(b.length-1)*c.get("barSpacing"),f=[],g=0,j=b.length;g<j;g++)b[g]=="null"||b[g]===null?b[g]=null:(b[g]=Number(b[g]),f.push(Number(b[g])));j=Math.max.apply(Math,f);f=Math.min.apply(Math,f);if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<f))f=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&
(c.get("chartRangeClip")||c.get("chartRangeMax")>j))j=c.get("chartRangeMax");var o=c.get("zeroAxis");o===void 0&&(o=f<0);var v=j-f===0?1:j-f,s,y;a.isArray(c.get("colorMap"))?(s=c.get("colorMap"),y=null):(s=null,y=c.get("colorMap"));if(d=a(this).simpledraw(d,e,c.get("composite")))for(var u,z=d.pixel_height,C=f<0&&o?z-Math.round(z*(Math.abs(f)/v))-1:z-1,g=b.length;g--;){var D=g*(c.get("barWidth")+c.get("barSpacing")),A,w=b[g];if(w===null)if(c.get("nullColor"))u=c.get("nullColor"),e=1,A=o&&f<0?C:z-e;
else continue;else if(w<f&&(w=f),w>j&&(w=j),u=w<0?c.get("negBarColor"):c.get("barColor"),o&&f<0?(e=Math.round(z*(Math.abs(w)/v))+1,A=w<0?C:C-e):(e=Math.round(z*((w-f)/v))+1,A=z-e),w===0&&c.get("zeroColor")!==void 0&&(u=c.get("zeroColor")),y&&y[w]?u=y[w]:s&&s.length>g&&(u=s[g]),u===null)continue;d.drawRect(D,A,c.get("barWidth")-1,e-1,u,u)}else this.innerHTML=""};a.fn.sparkline.tristate=function(b,c,d,e){var b=a.map(b,Number),d=b.length*c.get("barWidth")+(b.length-1)*c.get("barSpacing"),f,g;a.isArray(c.get("colorMap"))?
(f=c.get("colorMap"),g=null):(f=null,g=c.get("colorMap"));if(d=a(this).simpledraw(d,e,c.get("composite")))for(var j=Math.round(d.pixel_height/2),o=b.length;o--;){var v=o*(c.get("barWidth")+c.get("barSpacing")),s,y;b[o]<0?(s=j,e=j-1,y=c.get("negBarColor")):b[o]>0?(s=0,e=j-1,y=c.get("posBarColor")):(s=j-1,e=2,y=c.get("zeroBarColor"));g&&g[b[o]]?y=g[b[o]]:f&&f.length>o&&(y=f[o]);y!==null&&d.drawRect(v,s,c.get("barWidth")-1,e-1,y,y)}else this.innerHTML=""};a.fn.sparkline.discrete=function(b,c,d,e){var b=
a.map(b,Number),d=c.get("width")=="auto"?b.length*2:d,f=Math.floor(d/b.length);if(d=a(this).simpledraw(d,e,c.get("composite"))){var g=d.pixel_height,e=c.get("lineHeight")=="auto"?Math.round(g*0.3):c.get("lineHeight");g-=e;var j=Math.min.apply(Math,b),o=Math.max.apply(Math,b);if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<j))j=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMax")>o))o=c.get("chartRangeMax");
for(var v=o-j,s=b.length;s--;){var y=b[s];y<j&&(y=j);y>o&&(y=o);var u=s*f,z=Math.round(g-g*((y-j)/v));d.drawLine(u,z,u,z+e,c.get("thresholdColor")&&y<c.get("thresholdValue")?c.get("thresholdColor"):c.get("lineColor"))}}else this.innerHTML=""};a.fn.sparkline.bullet=function(b,c,d,e){b=a.map(b,Number);d=c.get("width")=="auto"?"4.0em":d;if((d=a(this).simpledraw(d,e,c.get("composite")))&&b.length>1){var f=d.pixel_width-Math.ceil(c.get("targetWidth")/2),e=d.pixel_height,g=Math.min.apply(Math,b),j=Math.max.apply(Math,
b),g=c.get("base")===void 0?g<0?g:0:c.get("base");j-=g;for(var o=2,v=b.length;o<v;o++){var s=Math.round(f*((b[o]-g)/j));d.drawRect(0,0,s-1,e-1,c.get("rangeColors")[o-2],c.get("rangeColors")[o-2])}o=Math.round(f*((b[1]-g)/j));d.drawRect(0,Math.round(e*0.3),o-1,Math.round(e*0.4)-1,c.get("performanceColor"),c.get("performanceColor"));b=Math.round(f*((b[0]-g)/j)-c.get("targetWidth")/2);f=Math.round(e*0.1);e-=f*2;d.drawRect(b,f,c.get("targetWidth")-1,e-1,c.get("targetColor"),c.get("targetColor"))}else this.innerHTML=
""};a.fn.sparkline.pie=function(b,c,d,e){b=a.map(b,Number);d=c.get("width")=="auto"?e:d;if((d=a(this).simpledraw(d,e,c.get("composite")))&&b.length>1){for(var e=Math.floor(Math.min(d.pixel_width,d.pixel_height)/2),f=0,g=0,j=2*Math.PI,o=b.length;o--;)f+=b[o];c.get("offset")&&(g+=2*Math.PI*(c.get("offset")/360));for(var v=b.length,o=0;o<v;o++){var s=g,y=g;f>0&&(y=g+j*(b[o]/f));d.drawPieSlice(e,e,e,s,y,void 0,c.get("sliceColors")[o%c.get("sliceColors").length]);g=y}}};var j=function(a,b){if(b==2){var c=
Math.floor(a.length/2);return a.length%2?a[c]:(a[c]+a[c+1])/2}else return c=Math.floor(a.length/4),a.length%2?(a[c*b]+a[c*b+1])/2:a[c*b]};a.fn.sparkline.box=function(b,c,d,e){var b=a.map(b,Number),d=c.get("width")=="auto"?"4.0em":d,f=c.get("chartRangeMin")===void 0?Math.min.apply(Math,b):c.get("chartRangeMin"),g=c.get("chartRangeMax")===void 0?Math.max.apply(Math,b):c.get("chartRangeMax"),d=a(this).simpledraw(d,e,c.get("composite")),q=b.length,o,v,s,y,u,z,C;if(d&&b.length>1){var D=d.pixel_width,e=
d.pixel_height;if(c.get("raw"))c.get("showOutliers")&&b.length>5?(v=b[0],o=b[1],s=b[2],y=b[3],u=b[4],z=b[5],C=b[6]):(o=b[0],s=b[1],y=b[2],u=b[3],z=b[4]);else{b.sort(function(a,b){return a-b});s=j(b,1);y=j(b,2);u=j(b,3);var A=u-s;if(c.get("showOutliers")){z=o=void 0;for(v=0;v<q;v++)o===void 0&&b[v]>s-A*c.get("outlierIQR")&&(o=b[v]),b[v]<u+A*c.get("outlierIQR")&&(z=b[v]);v=b[0];C=b[q-1]}else o=b[0],z=b[q-1]}b=D/(g-f+1);q=0;c.get("showOutliers")&&(q=Math.ceil(c.get("spotRadius")),D-=2*Math.ceil(c.get("spotRadius")),
b=D/(g-f+1),v<o&&d.drawCircle((v-f)*b+q,e/2,c.get("spotRadius"),c.get("outlierLineColor"),c.get("outlierFillColor")),C>z&&d.drawCircle((C-f)*b+q,e/2,c.get("spotRadius"),c.get("outlierLineColor"),c.get("outlierFillColor")));d.drawRect(Math.round((s-f)*b+q),Math.round(e*0.1),Math.round((u-s)*b),Math.round(e*0.8),c.get("boxLineColor"),c.get("boxFillColor"));d.drawLine(Math.round((o-f)*b+q),Math.round(e/2),Math.round((s-f)*b+q),Math.round(e/2),c.get("lineColor"));d.drawLine(Math.round((o-f)*b+q),Math.round(e/
4),Math.round((o-f)*b+q),Math.round(e-e/4),c.get("whiskerColor"));d.drawLine(Math.round((z-f)*b+q),Math.round(e/2),Math.round((u-f)*b+q),Math.round(e/2),c.get("lineColor"));d.drawLine(Math.round((z-f)*b+q),Math.round(e/4),Math.round((z-f)*b+q),Math.round(e-e/4),c.get("whiskerColor"));d.drawLine(Math.round((y-f)*b+q),Math.round(e*0.1),Math.round((y-f)*b+q),Math.round(e*0.9),c.get("medianColor"));c.get("target")&&(g=Math.ceil(c.get("spotRadius")),d.drawLine(Math.round((c.get("target")-f)*b+q),Math.round(e/
2-g),Math.round((c.get("target")-f)*b+q),Math.round(e/2+g),c.get("targetColor")),d.drawLine(Math.round((c.get("target")-f)*b+q-g),Math.round(e/2),Math.round((c.get("target")-f)*b+q+g),Math.round(e/2),c.get("targetColor")))}else this.innerHTML=""};a.browser.msie&&!document.namespaces.v&&document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");if(a.browser.hasCanvas===void 0)b=document.createElement("canvas"),a.browser.hasCanvas=b.getContext!==void 0;b=function(){};b.prototype={init:function(a,
b,c){this.width=a;this.height=b;this.target=c;c[0]&&(c=c[0]);c.VCanvas=this},drawShape:function(){alert("drawShape not implemented")},drawLine:function(a,b,c,d,e,f){return this.drawShape([[a,b],[c,d]],e,f)},drawCircle:function(){alert("drawCircle not implemented")},drawPieSlice:function(){alert("drawPieSlice not implemented")},drawRect:function(){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(b,c){a(c).html(b)}};c=function(a,b,c){return this.init(a,b,
c)};c.prototype=a.extend(new b,{_super:b.prototype,init:function(b,c,d){this._super.init(b,c,d);this.canvas=document.createElement("canvas");d[0]&&(d=d[0]);d.VCanvas=this;a(this.canvas).css({display:"inline-block",width:b,height:c,verticalAlign:"top"});this._insert(this.canvas,d);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;a(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},
_getContext:function(a,b,c){var d=this.canvas.getContext("2d");if(a!==void 0)d.strokeStyle=a;d.lineWidth=c===void 0?1:c;if(b!==void 0)d.fillStyle=b;return d},drawShape:function(a,b,c,d){d=this._getContext(b,c,d);d.beginPath();d.moveTo(a[0][0]+0.5,a[0][1]+0.5);for(var e=1,f=a.length;e<f;e++)d.lineTo(a[e][0]+0.5,a[e][1]+0.5);b!==void 0&&d.stroke();c!==void 0&&d.fill()},drawCircle:function(a,b,c,d,e){var f=this._getContext(d,e);f.beginPath();try{f.arc(a,b,c,0,2*Math.PI,!1)}catch(g){console.log(g+"x="+
a+" y="+b+" r="+c)}d!==void 0&&f.stroke();e!==void 0&&f.fill()},drawPieSlice:function(a,b,c,d,e,f,g){var j=this._getContext(f,g);j.beginPath();j.moveTo(a,b);j.arc(a,b,c,d,e,!1);j.lineTo(a,b);j.closePath();f!==void 0&&j.stroke();g&&j.fill()},drawRect:function(a,b,c,d,e,f){return this.drawShape([[a,b],[a+c,b],[a+c,b+d],[a,b+d],[a,b]],e,f)}});d=function(a,b,c){return this.init(a,b,c)};d.prototype=a.extend(new b,{_super:b.prototype,init:function(b,c,d){this._super.init(b,c,d);d[0]&&(d=d[0]);d.VCanvas=
this;this.canvas=document.createElement("span");a(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:b,height:c,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,d);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;this.canvas.insertAdjacentHTML("beforeEnd",'<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+
this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>');this.group=a(this.canvas).children()[0]},drawShape:function(a,b,c,d){for(var e=[],f=0,g=a.length;f<g;f++)e[f]=""+a[f][0]+","+a[f][1];a=e.splice(0,1);f=e[0]==e[e.length-1]?"x ":"";this.group.insertAdjacentHTML("beforeEnd",'<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+(b===void 0?' stroked="false" ':' strokeWeight="'+(d===void 0?1:d)+'" strokeColor="'+b+'" ')+(c===void 0?' filled="false"':' fillColor="'+
c+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+a+" l "+e.join(", ")+" "+f+'e"> </v:shape>')},drawCircle:function(a,b,c,d,e){a-=c+1;b-=c+1;this.group.insertAdjacentHTML("beforeEnd","<v:oval "+(d===void 0?' stroked="false" ':' strokeWeight="1" strokeColor="'+d+'" ')+(e===void 0?' filled="false"':' fillColor="'+e+'" filled="true" ')+' style="position:absolute;top:'+b+"px; left:"+a+"px; width:"+
c*2+"px; height:"+c*2+'px"></v:oval>')},drawPieSlice:function(a,b,c,d,e,f,g){if(d!=e){e-d==2*Math.PI&&(d=0,e=2*Math.PI);var j=a+Math.round(Math.cos(d)*c),v=b+Math.round(Math.sin(d)*c),s=a+Math.round(Math.cos(e)*c),y=b+Math.round(Math.sin(e)*c);j==s&&v==y&&e-d<Math.PI||this.group.insertAdjacentHTML("beforeEnd",'<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+(f===void 0?' stroked="false" ':' strokeWeight="1" strokeColor="'+f+'" ')+(g===void 0?' filled="false"':' fillColor="'+
g+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+a+","+b+" wa "+[a-c,b-c,a+c,b+c,j,v,s,y].join(", ")+' x e"> </v:shape>')}},drawRect:function(a,b,c,d,e,f){return this.drawShape([[a,b],[a,b+d],[a+c,b+d],[a+c,b],[a,b]],e,f)}})})(jQuery);Ext.namespace("LABKEY","LABKEY.ext");
LABKEY.ext.Timeline=Ext.extend(Ext.Panel,{constructor:function(a){if(!a.eventStore)throw"eventStore required for LABKEY.ext.Timeline";Ext.apply(this,a,{border:!1,frame:!1,tl:null,tp:null,format:"iso8601",seriesNames:[],bands:[],eventSourceLine:null,eventSourcePlot:null,seriesSource:null});this.storeCount=this.bands.length+1;this.eventStore.on("load",this.eventStoreLoad,this);for(a=0;a<this.bands.length;a++)this.bands[a].store.on("load",this.seriesStoreLoad,this);LABKEY.ext.Timeline.superclass.constructor.call(this)},
initComponent:function(){this.initSeries();this.eventStore.load();for(var a=0;a<this.bands.length;a++)this.bands[a].store.load();LABKEY.ext.Timeline.superclass.initComponent.apply(this,arguments)},initSeries:function(){},eventStoreLoad:function(){this.populateEventSources()},seriesStoreLoad:function(){this.populateEventSources()},populateEventSources:function(){if(!this.callCount)this.callCount=1;if(this.storeCount==this.callCount){Timeline.DateTime=SimileAjax.DateTime;this.eventSourceLine=new Timeline.DefaultEventSource;
this.seriesSource=new Timeplot.DefaultEventSource;this.loadJsonAsSeries();var a=this.getStoreAsJson(this.eventStore);this.eventSourceLine.loadJSON({events:a},LABKEY.ActionURL.getContextPath()+LABKEY.timeline.directory);this.renderCharts();this.tl.getBand(0).setMaxVisibleDate(a[a.length-1].start)}else this.callCount++},renderCharts:function(){this.createTimeline();for(var a=this.tl.getBand(0),b=0;b<this.bands.length;b++)a=this.tl.getBand(b+1),this.renderSeries(a,this.bands[b])},createTimeline:function(){var a=
""+Math.floor(100/(this.bands.length+1))+"%",b=[];b.push(Timeline.createBandInfo({eventSource:this.eventSourceLine,width:a,intervalUnit:Timeline.DateTime.MONTH,intervalPixels:30,color:"#eeeeee"}));for(var c=0;c<this.bands.length;c++){var d=Timeline.createBandInfo({width:a,intervalUnit:Timeline.DateTime.MONTH,intervalPixels:30,color:"#dddddd"});d.syncWith=0;b.push(d)}this.tl=Timeline.create(this.getEl().dom.parentNode,b,Timeline.HORIZONTAL)},renderSeries:function(a,b){var c=this.getStoreAsJson(b.store);
if(c.length!=0){var d,f,e;for(f=0;f<b.series.length;f++){e=[];for(d=0;d<c.length;d++){var g=c[d];g.title&&g.start&&g.value&&g.title==b.series[f].id&&e.push([new Date(g.start),g.value])}e.length>0&&this.renderLineChart(a,e,b.series[f])}}},renderLineChart:function(a,b,c){var d=b[0][0],f=b[b.length-1][0],e=Math.round(a.dateToPixelOffset(d)),g=Math.round(a.dateToPixelOffset(f)),j=Math.max(g-e,10),h=a.getViewWidth()-4;if(!a.spklLayer)a.spklLayer=a.createLayerDiv(100);if(!a.spklDiv)div=LABKEY.createElement("div",
null,{}),Ext.apply(div.style,{position:"absolute",top:"5px",left:e+"px",width:j,height:h}),a.spklDiv=div,a.spklLayer.appendChild(div),a.addOnScrollListener(function(a){var b=Math.round(a.dateToPixelOffset(d));a.spklDiv.style.left=b+"px"});if(!a.labelDiv)a.labelDiv=LABKEY.createElement("div","",{style:"font-weight:bold; position:absolute; left:0; top:0; z-index:1000;"}),a.labelDiv.style.position="absolute",a.labelDiv.style.top="5px",a.labelDiv.style.left=(e+g)/2+"px",a.spklLayer.appendChild(a.labelDiv),
a.addOnScrollListener(function(a){var b=Math.round(a.dateToPixelOffset(d)),c=Math.round(a.dateToPixelOffset(f));a.labelDiv.style.left=(b+c)/2+"px"});e=c.yRange||1;for(g=0;g<b.length;g++){var k=b[g][1];k>e&&(e=k)}g=Ext.apply({},c);g.chartRangeMax=e;this._renderLineChartImpl(a.spklDiv,h,j,b,g);b=LABKEY.createElement("span",c.caption||c.id);b.style.color=c.lineColor||"#000000";a.labelDiv.appendChild(b);a.labelDiv.appendChild(LABKEY.createElement("br"))},_renderLineChartImpl:function(a,b,c,d,f){f.spotRadius=
0;f.composite=!0;$(a).sparkline(d,Ext.apply({height:b,width:c,fillColor:!1},f))},loadJsonAsSeries:function(){this.seriesSource._events.maxValues=[];var a=!1,b,c;for(c=0;c<this.bands.length;c++)for(b=0;b<this.bands[c].store.getCount();b++){var d=this.bands[c].store.getAt(b);if(d=d.data.start?new Date(d.data.start):null)a=[],this.seriesSource._events.add(new Timeplot.DefaultEventSource.NumericEvent(d,a)),a=!0}a&&this.seriesSource._fire("onAddMany",[])},getStoreAsJson:function(a){for(var b=[],c=0;c<
a.getCount();c++)b.push(a.getAt(c).data);return b}});LABKEY.timeline.isLoaded=!0;
